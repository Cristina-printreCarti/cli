"use strict";(self.webpackChunkclients=self.webpackChunkclients||[]).push([[179],{2011:(lt,Se,k)=>{k.d(Se,{Dh:()=>fe,GT:()=>he,cc:()=>Me,hO:()=>Ve,on:()=>B,pX:()=>ie,xv:()=>ge});var h=k(4650),te=k(127),O=k(5813);lt=k.hmd(lt);const ae=["ngOnDestroy"],ie=(pe,Ye,rt,Ae={})=>new Proxy(pe,{get:(ve,De)=>rt.runOutsideAngular(()=>{var Be;if(pe[De])return!(null===(Be=Ae?.spy)||void 0===Be)&&Be.get&&Ae.spy.get(De,pe[De]),pe[De];if(ae.indexOf(De)>-1)return()=>{};const je=Ye.toPromise().then(U=>{const ye=U&&U[De];return"function"==typeof ye?ye.bind(U):ye&&ye.then?ye.then(Y=>rt.run(()=>Y)):rt.run(()=>ye)});return new Proxy(()=>{},{get:(U,ye)=>je[ye],apply:(U,ye,Y)=>je.then(X=>{var se;const ne=X&&X(...Y);return!(null===(se=Ae?.spy)||void 0===se)&&se.apply&&Ae.spy.apply(De,Y,ne),ne})})})}),he=(pe,Ye)=>{Ye.forEach(rt=>{Object.getOwnPropertyNames(rt.prototype||rt).forEach(Ae=>{Object.defineProperty(pe.prototype,Ae,Object.getOwnPropertyDescriptor(rt.prototype||rt,Ae))})})};class le{constructor(Ye){return Ye}}const fe=new h.OlP("angularfire2.app.options"),ge=new h.OlP("angularfire2.app.name");function B(pe,Ye,rt){const ve="object"==typeof rt&&rt||{};ve.name=ve.name||"string"==typeof rt&&rt||"[DEFAULT]";const Be=te.Z.apps.filter(je=>je&&je.name===ve.name)[0]||Ye.runOutsideAngular(()=>te.Z.initializeApp(pe,ve));try{JSON.stringify(pe)!==JSON.stringify(Be.options)&&$("error",`${Be.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(Be)}const $=(pe,...Ye)=>{(0,h.X6Q)()&&typeof console<"u"&&console[pe](...Ye)},Q={provide:le,useFactory:B,deps:[fe,h.R0b,[new h.FiY,ge]]};let Ve=(()=>{class pe{constructor(rt){te.Z.registerVersion("angularfire",O.q4.full,"core"),te.Z.registerVersion("angularfire",O.q4.full,"app-compat"),te.Z.registerVersion("angular",h.q4F.full,rt.toString())}static initializeApp(rt,Ae){return{ngModule:pe,providers:[{provide:fe,useValue:rt},{provide:ge,useValue:Ae}]}}}return pe.\u0275fac=function(rt){return new(rt||pe)(h.LFG(h.Lbi))},pe.\u0275mod=h.oAB({type:pe}),pe.\u0275inj=h.cJS({providers:[Q]}),pe})();function Me(pe,Ye,rt,Ae,ve){const[,De,Be]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===pe)||[];if(De)return function we(pe,Ye){try{return pe.toString()===Ye.toString()}catch{return pe===Ye}}(ve,Be)||(_e("error",`${Ye} was already initialized on the ${rt} Firebase App with different settings.${Xe?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:ve,was:Be})),De;{const je=Ae();return globalThis.\u0275AngularfireInstanceCache.push([pe,je,ve]),je}}const Xe=!!lt.hot,_e=(pe,...Ye)=>{(0,h.X6Q)()&&typeof console<"u"&&console[pe](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,Se,k)=>{k.d(Se,{q4:()=>ot,iC:()=>as,HU:()=>Wo,vb:()=>Ns,JM:()=>Ka});var h=k(4650),te=k(5867),O=k(5861),ae=k(9681),ie=k(2090),he=k(4859),le=k(1877),fe=k(8766);const ge="@firebase/installations",B="0.5.12",Q=`w:${B}`,Ve="FIS_v2",Ye=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function rt(b){return b instanceof ie.ZR&&b.code.includes("request-failed")}function Ae({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function ve(b){return{token:b.token,requestStatus:2,expiresIn:X(b.expiresIn),creationTime:Date.now()}}function De(b,C){return Be.apply(this,arguments)}function Be(){return(Be=(0,O.Z)(function*(b,C){const F=(yield C.json()).error;return Ye.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function U(b,{refreshToken:C}){const x=je(b);return x.append("Authorization",function se(b){return`${Ve} ${b}`}(C)),x}function ye(b){return Y.apply(this,arguments)}function Y(){return(Y=(0,O.Z)(function*(b){const C=yield b();return C.status>=500&&C.status<600?b():C})).apply(this,arguments)}function X(b){return Number(b.replace("s","000"))}function ne(b,C){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:C},{fid:x}){const F=Ae(b),J=je(b),re=C.getImmediate({optional:!0});if(re){const wt=yield re.getHeartbeatsHeader();wt&&J.append("x-firebase-client",wt)}const Re={method:"POST",headers:J,body:JSON.stringify({fid:x,authVersion:Ve,appId:b.appId,sdkVersion:Q})},et=yield ye(()=>fetch(F,Re));if(et.ok){const wt=yield et.json();return{fid:wt.fid||x,registrationStatus:2,refreshToken:wt.refreshToken,authToken:ve(wt.authToken)}}throw yield De("Create Installation",et)})).apply(this,arguments)}function Pe(b){return new Promise(C=>{setTimeout(C,b)})}const qt=/^[cdef][\w-]{21}$/;function ze(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function sn(b){return function ft(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return qt.test(x)?x:""}catch{return""}}function xn(b){return`${b.appName}!${b.appId}`}const Zt=new Map;function Kt(b,C){const x=xn(b);rn(x,C),function ba(b,C){const x=function Ir(){return!Hr&&"BroadcastChannel"in self&&(Hr=new BroadcastChannel("[Firebase] FID Change"),Hr.onmessage=b=>{rn(b.data.key,b.data.fid)}),Hr}();x&&x.postMessage({key:b,fid:C}),function Gr(){0===Zt.size&&Hr&&(Hr.close(),Hr=null)}()}(x,C)}function rn(b,C){const x=Zt.get(b);if(x)for(const F of x)F(C)}let Hr=null;const zr="firebase-installations-store";let _i=null;function Ao(){return _i||(_i=(0,fe.X3)("firebase-installations-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(zr)}})),_i}function Ze(b,C){return qr.apply(this,arguments)}function qr(){return(qr=(0,O.Z)(function*(b,C){const x=xn(b),J=(yield Ao()).transaction(zr,"readwrite"),re=J.objectStore(zr),be=yield re.get(x);return yield re.put(C,x),yield J.done,(!be||be.fid!==C.fid)&&Kt(b,C.fid),C})).apply(this,arguments)}function Ki(b){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,O.Z)(function*(b){const C=xn(b),F=(yield Ao()).transaction(zr,"readwrite");yield F.objectStore(zr).delete(C),yield F.done})).apply(this,arguments)}function vi(b,C){return ni.apply(this,arguments)}function ni(){return(ni=(0,O.Z)(function*(b,C){const x=xn(b),J=(yield Ao()).transaction(zr,"readwrite"),re=J.objectStore(zr),be=yield re.get(x),Re=C(be);return void 0===Re?yield re.delete(x):yield re.put(Re,x),yield J.done,Re&&(!be||be.fid!==Re.fid)&&Kt(b,Re.fid),Re})).apply(this,arguments)}function Rn(b){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,O.Z)(function*(b){let C;const x=yield vi(b.appConfig,F=>{const J=hn(F),re=pt(b,J);return C=re.registrationPromise,re.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function hn(b){return Dt(b||{fid:ze(),registrationStatus:0})}function pt(b,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(Ye.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function ut(b,C){return on.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:sr(b)}:{installationEntry:C}}function on(){return(on=(0,O.Z)(function*(b,C){try{const x=yield ne(b,C);return Ze(b.appConfig,x)}catch(x){throw rt(x)&&409===x.customData.serverCode?yield Ki(b.appConfig):yield Ze(b.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function sr(b){return or.apply(this,arguments)}function or(){return(or=(0,O.Z)(function*(b){let C=yield Nr(b.appConfig);for(;1===C.registrationStatus;)yield Pe(100),C=yield Nr(b.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Rn(b);return F||x}return C})).apply(this,arguments)}function Nr(b){return vi(b,C=>{if(!C)throw Ye.create("installation-not-found");return Dt(C)})}function Dt(b){return function Yi(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Yt(b,C){return wi.apply(this,arguments)}function wi(){return(wi=(0,O.Z)(function*({appConfig:b,heartbeatServiceProvider:C},x){const F=Wt(b,x),J=U(b,x),re=C.getImmediate({optional:!0});if(re){const wt=yield re.getHeartbeatsHeader();wt&&J.append("x-firebase-client",wt)}const Re={method:"POST",headers:J,body:JSON.stringify({installation:{sdkVersion:Q,appId:b.appId}})},et=yield ye(()=>fetch(F,Re));if(et.ok)return ve(yield et.json());throw yield De("Generate Auth Token",et)})).apply(this,arguments)}function Wt(b,{fid:C}){return`${Ae(b)}/${C}/authTokens:generate`}function Z(b){return j.apply(this,arguments)}function j(){return(j=(0,O.Z)(function*(b,C=!1){let x;const F=yield vi(b.appConfig,re=>{if(!it(re))throw Ye.create("not-registered");const be=re.authToken;if(!C&&cn(be))return re;if(1===be.requestStatus)return x=V(b,C),re;{if(!navigator.onLine)throw Ye.create("app-offline");const Re=Zn(re);return x=Ce(b,Re),Re}});return x?yield x:F.authToken})).apply(this,arguments)}function V(b,C){return H.apply(this,arguments)}function H(){return(H=(0,O.Z)(function*(b,C){let x=yield q(b.appConfig);for(;1===x.authToken.requestStatus;)yield Pe(100),x=yield q(b.appConfig);const F=x.authToken;return 0===F.requestStatus?Z(b,C):F})).apply(this,arguments)}function q(b){return vi(b,C=>{if(!it(C))throw Ye.create("not-registered");return function jt(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ce(b,C){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,O.Z)(function*(b,C){try{const x=yield Yt(b,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield Ze(b.appConfig,F),x}catch(x){if(!rt(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Ze(b.appConfig,F)}else yield Ki(b.appConfig);throw x}})).apply(this,arguments)}function it(b){return void 0!==b&&2===b.registrationStatus}function cn(b){return 2===b.requestStatus&&!function Qt(b){const C=Date.now();return C<b.creationTime||b.creationTime+b.expiresIn<C+36e5}(b)}function Zn(b){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:C})}function mn(){return(mn=(0,O.Z)(function*(b){const C=b,{installationEntry:x,registrationPromise:F}=yield Rn(C);return F?F.catch(console.error):Z(C).catch(console.error),x.fid})).apply(this,arguments)}function Pi(){return(Pi=(0,O.Z)(function*(b,C=!1){const x=b;return yield Rr(x),(yield Z(x,C)).token})).apply(this,arguments)}function Rr(b){return Un.apply(this,arguments)}function Un(){return(Un=(0,O.Z)(function*(b){const{registrationPromise:C}=yield Rn(b);C&&(yield C)})).apply(this,arguments)}function ys(b){return Ye.create("missing-app-config-values",{valueName:b})}const qs="installations",_n=b=>{const C=b.getProvider("app").getImmediate(),x=function yn(b){if(!b||!b.options)throw ys("App Configuration");if(!b.name)throw ys("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!b.options[x])throw ys(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,ae._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Ws=b=>{const C=b.getProvider("app").getImmediate(),x=(0,ae._getProvider)(C,qs).getImmediate();return{getId:()=>function Pt(b){return mn.apply(this,arguments)}(x),getToken:J=>function Vn(b){return Pi.apply(this,arguments)}(x,J)}};(function Vl(){(0,ae._registerComponent)(new he.wA(qs,_n,"PUBLIC")),(0,ae._registerComponent)(new he.wA("installations-internal",Ws,"PRIVATE"))})(),(0,ae.registerVersion)(ge,B),(0,ae.registerVersion)(ge,B,"esm2017");const ki="@firebase/remote-config",jn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Kh{constructor(C,x,F,J){this.client=C,this.storage=x,this.storageCache=F,this.logger=J}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,J=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${J}.`),J}fetch(C){var x=this;return(0,O.Z)(function*(){const[F,J]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(J&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return J;C.eTag=J&&J.eTag;const re=yield x.client.fetch(C),be=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===re.status&&be.push(x.storage.setLastSuccessfulFetchResponse(re)),yield Promise.all(be),re})()}}function Hl(b=navigator){return b.languages&&b.languages[0]||b.language}class Gl{constructor(C,x,F,J,re,be){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=J,this.apiKey=re,this.appId=be}fetch(C){var x=this;return(0,O.Z)(function*(){var F,J,re;const[be,Re]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),wt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,St={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},dt={sdk_version:x.sdkVersion,app_instance_id:be,app_instance_id_token:Re,app_id:x.appId,language_code:Hl()},wn={method:"POST",headers:St,body:JSON.stringify(dt)},_r=fetch(wt,wn),Zo=new Promise((Ko,uo)=>{C.signal.addEventListener(()=>{const Ai=new Error("The operation was aborted.");Ai.name="AbortError",uo(Ai)})});let Ps;try{yield Promise.race([_r,Zo]),Ps=yield _r}catch(Ko){let uo="fetch-client-network";throw"AbortError"===(null===(F=Ko)||void 0===F?void 0:F.name)&&(uo="fetch-timeout"),jn.create(uo,{originalErrorMessage:null===(J=Ko)||void 0===J?void 0:J.message})}let At=Ps.status;const Bi=Ps.headers.get("ETag")||void 0;let ks,ai;if(200===Ps.status){let Ko;try{Ko=yield Ps.json()}catch(uo){throw jn.create("fetch-client-parse",{originalErrorMessage:null===(re=uo)||void 0===re?void 0:re.message})}ks=Ko.entries,ai=Ko.state}if("INSTANCE_STATE_UNSPECIFIED"===ai?At=500:"NO_CHANGE"===ai?At=304:("NO_TEMPLATE"===ai||"EMPTY_CONFIG"===ai)&&(ks={}),304!==At&&200!==At)throw jn.create("fetch-status",{httpStatus:At});return{status:At,eTag:Bi,config:ks}})()}}class tg{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,O.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var J=this;return(0,O.Z)(function*(){yield function Yn(b,C){return new Promise((x,F)=>{const J=Math.max(C-Date.now(),0),re=setTimeout(x,J);b.addEventListener(()=>{clearTimeout(re),F(jn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const re=yield J.client.fetch(C);return yield J.storage.deleteThrottleMetadata(),re}catch(re){if(!function yd(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}(re))throw re;const be={throttleEndTimeMillis:Date.now()+(0,ie.$s)(F),backoffCount:F+1};return yield J.storage.setThrottleMetadata(be),J.attemptFetch(C,be)}})()}}class _d{constructor(C,x,F,J,re){this.app=C,this._client=x,this._storageCache=F,this._storage=J,this._logger=re,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function zl(b,C){var x;const F=b.target.error||void 0;return jn.create(C,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const Es="app_namespace_store";class sg{constructor(C,x,F,J=function ig(){return new Promise((b,C)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=J=>{C(zl(J,"storage-open"))},F.onsuccess=J=>{b(J.target.result)},F.onupgradeneeded=J=>{0===J.oldVersion&&J.target.result.createObjectStore(Es,{keyPath:"compositeKey"})}}catch(F){C(jn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=J}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((J,re)=>{var be;const et=F.transaction([Es],"readonly").objectStore(Es),wt=x.createCompositeKey(C);try{const St=et.get(wt);St.onerror=dt=>{re(zl(dt,"storage-get"))},St.onsuccess=dt=>{const wn=dt.target.result;J(wn?wn.value:void 0)}}catch(St){re(jn.create("storage-get",{originalErrorMessage:null===(be=St)||void 0===be?void 0:be.message}))}})})()}set(C,x){var F=this;return(0,O.Z)(function*(){const J=yield F.openDbPromise;return new Promise((re,be)=>{var Re;const wt=J.transaction([Es],"readwrite").objectStore(Es),St=F.createCompositeKey(C);try{const dt=wt.put({compositeKey:St,value:x});dt.onerror=wn=>{be(zl(wn,"storage-set"))},dt.onsuccess=()=>{re()}}catch(dt){be(jn.create("storage-set",{originalErrorMessage:null===(Re=dt)||void 0===Re?void 0:Re.message}))}})})()}delete(C){var x=this;return(0,O.Z)(function*(){const F=yield x.openDbPromise;return new Promise((J,re)=>{var be;const et=F.transaction([Es],"readwrite").objectStore(Es),wt=x.createCompositeKey(C);try{const St=et.delete(wt);St.onerror=dt=>{re(zl(dt,"storage-delete"))},St.onsuccess=()=>{J()}}catch(St){re(jn.create("storage-delete",{originalErrorMessage:null===(be=St)||void 0===be?void 0:be.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class wd{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),J=C.storage.getActiveConfig(),re=yield x;re&&(C.lastFetchStatus=re);const be=yield F;be&&(C.lastSuccessfulFetchTimestampMillis=be);const Re=yield J;Re&&(C.activeConfig=Re)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function bu(){return Yh.apply(this,arguments)}function Yh(){return(Yh=(0,O.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function Is(){(0,ae._registerComponent)(new he.wA("remote-config",function b(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),J=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw jn.create("registration-window");if(!(0,ie.hl)())throw jn.create("indexed-db-unavailable");const{projectId:re,apiKey:be,appId:Re}=F.options;if(!re)throw jn.create("registration-project-id");if(!be)throw jn.create("registration-api-key");if(!Re)throw jn.create("registration-app-id");const et=new sg(Re,F.name,x=x||"firebase"),wt=new wd(et),St=new le.Yd(ki);St.logLevel=le.in.ERROR;const dt=new Gl(J,ae.SDK_VERSION,x,re,be,Re),wn=new tg(dt,et),_r=new Kh(wn,et,wt,St),Zo=new _d(F,_r,wt,et,St);return function $n(b){const C=(0,ie.m9)(b);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Zo),Zo},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(ki,"0.3.11"),(0,ae.registerVersion)(ki,"0.3.11","esm2017")}();const Fi="/firebase-messaging-sw.js",Ji="/firebase-cloud-messaging-push-scope",Xi="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Sa="google.c.a.c_id",Cu="google.c.a.c_l",ql="google.c.a.ts",Qh="google.c.a.e";var es=(()=>{return(b=es||(es={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",es;var b})();function ii(b){const C=new Uint8Array(b);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Wr(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),J=new Uint8Array(F.length);for(let re=0;re<F.length;++re)J[re]=F.charCodeAt(re);return J}const No="fcm_token_details_db",yr="fcm_token_object_Store";function Jh(b){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,O.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(re=>re.name).includes(No))return null;let C=null;return(yield(0,fe.X3)(No,5,{upgrade:(F=(0,O.Z)(function*(J,re,be,Re){var et;if(re<2||!J.objectStoreNames.contains(yr))return;const wt=Re.objectStore(yr),St=yield wt.index("fcmSenderId").get(b);if(yield wt.clear(),St)if(2===re){const dt=St;if(!dt.auth||!dt.p256dh||!dt.endpoint)return;C={token:dt.fcmToken,createTime:null!==(et=dt.createTime)&&void 0!==et?et:Date.now(),subscriptionOptions:{auth:dt.auth,p256dh:dt.p256dh,endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:"string"==typeof dt.vapidKey?dt.vapidKey:ii(dt.vapidKey)}}}else if(3===re){const dt=St;C={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:ii(dt.auth),p256dh:ii(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:ii(dt.vapidKey)}}}else if(4===re){const dt=St;C={token:dt.fcmToken,createTime:dt.createTime,subscriptionOptions:{auth:ii(dt.auth),p256dh:ii(dt.p256dh),endpoint:dt.endpoint,swScope:dt.swScope,vapidKey:ii(dt.vapidKey)}}}}),function(re,be,Re,et){return F.apply(this,arguments)})})).close(),yield(0,fe.Lj)(No),yield(0,fe.Lj)("fcm_vapid_details_db"),yield(0,fe.Lj)("undefined"),bn(C)?C:null;var F}),Xh.apply(this,arguments)}function bn(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:C}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const si="firebase-messaging-store";let Pr=null;function Su(){return Pr||(Pr=(0,fe.X3)("firebase-messaging-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(si)}})),Pr}function Ro(b){return ts.apply(this,arguments)}function ts(){return(ts=(0,O.Z)(function*(b){const C=Di(b),F=yield(yield Su()).transaction(si).objectStore(si).get(C);if(F)return F;{const J=yield Jh(b.appConfig.senderId);if(J)return yield zt(b,J),J}})).apply(this,arguments)}function zt(b,C){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,O.Z)(function*(b,C){const x=Di(b),J=(yield Su()).transaction(si,"readwrite");return yield J.objectStore(si).put(C,x),yield J.done,C})).apply(this,arguments)}function Ys(b){return Au.apply(this,arguments)}function Au(){return(Au=(0,O.Z)(function*(b){const C=Di(b),F=(yield Su()).transaction(si,"readwrite");yield F.objectStore(si).delete(C),yield F.done})).apply(this,arguments)}function Di({appConfig:b}){return b.appId}const En=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function bt(b,C){return xu.apply(this,arguments)}function xu(){return(xu=(0,O.Z)(function*(b,C){var x;const F=yield Zl(b),J=Te(C),re={method:"POST",headers:F,body:JSON.stringify(J)};let be;try{be=yield(yield fetch(ns(b.appConfig),re)).json()}catch(Re){throw En.create("token-subscribe-failed",{errorInfo:null===(x=Re)||void 0===x?void 0:x.toString()})}if(be.error)throw En.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw En.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function tf(b,C){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,O.Z)(function*(b,C){var x;const F=yield Zl(b),J=Te(C.subscriptionOptions),re={method:"PATCH",headers:F,body:JSON.stringify(J)};let be;try{be=yield(yield fetch(`${ns(b.appConfig)}/${C.token}`,re)).json()}catch(Re){throw En.create("token-update-failed",{errorInfo:null===(x=Re)||void 0===x?void 0:x.toString()})}if(be.error)throw En.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw En.create("token-update-no-token");return be.token})).apply(this,arguments)}function Ru(b,C){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,O.Z)(function*(b,C){var x;const J={method:"DELETE",headers:yield Zl(b)};try{const be=yield(yield fetch(`${ns(b.appConfig)}/${C}`,J)).json();if(be.error)throw En.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(re){throw En.create("token-unsubscribe-failed",{errorInfo:null===(x=re)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function ns({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Zl(b){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,O.Z)(function*({appConfig:b,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function Te({p256dh:b,auth:C,endpoint:x,vapidKey:F}){const J={web:{endpoint:x,auth:C,p256dh:b}};return F!==Xi&&(J.web.applicationPubKey=F),J}const $t=6048e5;function Ou(b){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,O.Z)(function*(b){const C=yield Kl(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:C.endpoint,auth:ii(C.getKey("auth")),p256dh:ii(C.getKey("p256dh"))},F=yield Ro(b.firebaseDependencies);if(F){if(bd(F.subscriptionOptions,x))return Date.now()>=F.createTime+$t?Oo(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield Ru(b.firebaseDependencies,F.token)}catch(J){console.warn(J)}return xa(b.firebaseDependencies,x)}return xa(b.firebaseDependencies,x)})).apply(this,arguments)}function Cn(b){return ku.apply(this,arguments)}function ku(){return(ku=(0,O.Z)(function*(b){const C=yield Ro(b.firebaseDependencies);C&&(yield Ru(b.firebaseDependencies,C.token),yield Ys(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Oo(b,C){return oi.apply(this,arguments)}function oi(){return(oi=(0,O.Z)(function*(b,C){try{const x=yield tf(b.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield zt(b.firebaseDependencies,F),x}catch(x){throw yield Cn(b),x}})).apply(this,arguments)}function xa(b,C){return Na.apply(this,arguments)}function Na(){return(Na=(0,O.Z)(function*(b,C){const F={token:yield bt(b,C),createTime:Date.now(),subscriptionOptions:C};return yield zt(b,F),F.token})).apply(this,arguments)}function Kl(b,C){return Yl.apply(this,arguments)}function Yl(){return(Yl=(0,O.Z)(function*(b,C){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Wr(C)})})).apply(this,arguments)}function bd(b,C){return C.vapidKey===b.vapidKey&&C.endpoint===b.endpoint&&C.auth===b.auth&&C.p256dh===b.p256dh}function Qs(b){const C={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Tn(b,C){if(!C.notification)return;b.notification={};const x=C.notification.title;x&&(b.notification.title=x);const F=C.notification.body;F&&(b.notification.body=F);const J=C.notification.image;J&&(b.notification.image=J)}(C,b),function Li(b,C){!C.data||(b.data=C.data)}(C,b),function Ql(b,C){var x,F,J,re,be;if(!(C.fcmOptions||null!==(x=C.notification)&&void 0!==x&&x.click_action))return;b.fcmOptions={};const Re=null!==(J=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==J?J:null===(re=C.notification)||void 0===re?void 0:re.click_action;Re&&(b.fcmOptions.link=Re);const et=null===(be=C.fcmOptions)||void 0===be?void 0:be.analytics_label;et&&(b.fcmOptions.analyticsLabel=et)}(C,b),C}function Js(b){return"object"==typeof b&&!!b&&Sa in b}function rs(b,C){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function Ra(b){return En.create("missing-app-config-values",{valueName:b})}rs("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),rs("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ag{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const J=function og(b){if(!b||!b.options)throw Ra("App Configuration Object");if(!b.name)throw Ra("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of C)if(!x[F])throw Ra(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:J,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Jl(b){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,O.Z)(function*(b){var C;try{b.swRegistration=yield navigator.serviceWorker.register(Fi,{scope:Ji}),b.swRegistration.update().catch(()=>{})}catch(x){throw En.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function Oa(b,C){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,O.Z)(function*(b,C){if(!C&&!b.swRegistration&&(yield Jl(b)),C||!b.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw En.create("invalid-sw-registration");b.swRegistration=C}})).apply(this,arguments)}function Pa(b,C){return ec.apply(this,arguments)}function ec(){return(ec=(0,O.Z)(function*(b,C){C?b.vapidKey=C:b.vapidKey||(b.vapidKey=Xi)})).apply(this,arguments)}function Vu(){return(Vu=(0,O.Z)(function*(b,C){if(!navigator)throw En.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw En.create("permission-blocked");return yield Pa(b,C?.vapidKey),yield Oa(b,C?.serviceWorkerRegistration),Ou(b)})).apply(this,arguments)}function tc(b,C,x){return nc.apply(this,arguments)}function nc(){return(nc=(0,O.Z)(function*(b,C,x){const F=rc(C);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Sa],message_name:x[Cu],message_time:x[ql],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function rc(b){switch(b){case es.NOTIFICATION_CLICKED:return"notification_open";case es.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Xs(){return(Xs=(0,O.Z)(function*(b,C){const x=C.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===es.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(Qs(x)):b.onMessageHandler.next(Qs(x)));const F=x.data;Js(F)&&"1"===F[Qh]&&(yield tc(b,x.messageType,F))})).apply(this,arguments)}const eo="@firebase/messaging",Qn=b=>{const C=new ag(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function Cd(b,C){return Xs.apply(this,arguments)}(C,x)),C},Zr=b=>{const C=b.getProvider("messaging").getImmediate();return{getToken:F=>function Lu(b,C){return Vu.apply(this,arguments)}(C,F)}};function Td(){return ic.apply(this,arguments)}function ic(){return(ic=(0,O.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function fn(){(0,ae._registerComponent)(new he.wA("messaging",Qn,"PUBLIC")),(0,ae._registerComponent)(new he.wA("messaging-internal",Zr,"PRIVATE")),(0,ae.registerVersion)(eo,"0.9.16"),(0,ae.registerVersion)(eo,"0.9.16","esm2017")}();const Fo="analytics",Md="firebase_id",to="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ju="https://www.googletagmanager.com/gtag/js",Sn=new le.Yd("@firebase/analytics");function $u(b){return Promise.all(b.map(C=>C.catch(x=>x)))}function Hu(b,C){const x=document.createElement("script");x.src=`${ju}?l=${b}&id=${C}`,x.async=!0,document.head.appendChild(x)}function rf(b,C,x,F,J,re){return no.apply(this,arguments)}function no(){return(no=(0,O.Z)(function*(b,C,x,F,J,re){const be=F[J];try{if(be)yield C[be];else{const et=(yield $u(x)).find(wt=>wt.measurementId===J);et&&(yield C[et.appId])}}catch(Re){Sn.error(Re)}b("config",J,re)})).apply(this,arguments)}function Lo(b,C,x,F,J){return ro.apply(this,arguments)}function ro(){return(ro=(0,O.Z)(function*(b,C,x,F,J){try{let re=[];if(J&&J.send_to){let be=J.send_to;Array.isArray(be)||(be=[be]);const Re=yield $u(x);for(const et of be){const wt=Re.find(dt=>dt.measurementId===et),St=wt&&C[wt.appId];if(!St){re=[];break}re.push(St)}}0===re.length&&(re=Object.values(C)),yield Promise.all(re),b("event",F,J||{})}catch(re){Sn.error(re)}})).apply(this,arguments)}function Nd(){const b=window.document.getElementsByTagName("script");for(const C of Object.values(b))if(C.src&&C.src.includes(ju))return C;return null}const ur=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Va=new class Vi{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Od(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Ua(b){return ac.apply(this,arguments)}function ac(){return(ac=(0,O.Z)(function*(b){var C;const{appId:x,apiKey:F}=b,J={method:"GET",headers:Od(F)},re=to.replace("{app-id}",x),be=yield fetch(re,J);if(200!==be.status&&304!==be.status){let Re="";try{const et=yield be.json();null!==(C=et.error)&&void 0!==C&&C.message&&(Re=et.error.message)}catch{}throw ur.create("config-fetch-failed",{httpStatus:be.status,responseMessage:Re})}return be.json()})).apply(this,arguments)}function On(b){return bi.apply(this,arguments)}function bi(){return(bi=(0,O.Z)(function*(b,C=Va,x){const{appId:F,apiKey:J,measurementId:re}=b.options;if(!F)throw ur.create("no-app-id");if(!J){if(re)return{measurementId:re,appId:F};throw ur.create("no-api-key")}const be=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Re=new Wu;return setTimeout((0,O.Z)(function*(){Re.abort()}),void 0!==x?x:6e4),zu({appId:F,apiKey:J,measurementId:re},be,Re,C)})).apply(this,arguments)}function zu(b,C,x){return io.apply(this,arguments)}function io(){return(io=(0,O.Z)(function*(b,{throttleEndTimeMillis:C,backoffCount:x},F,J=Va){var re,be;const{appId:Re,measurementId:et}=b;try{yield Ba(F,C)}catch(wt){if(et)return Sn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${null===(re=wt)||void 0===re?void 0:re.message}]`),{appId:Re,measurementId:et};throw wt}try{const wt=yield Ua(b);return J.deleteThrottleMetadata(Re),wt}catch(wt){const St=wt;if(!qu(St)){if(J.deleteThrottleMetadata(Re),et)return Sn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${et} provided in the "measurementId" field in the local Firebase config. [${St?.message}]`),{appId:Re,measurementId:et};throw wt}const dt=503===Number(null===(be=St?.customData)||void 0===be?void 0:be.httpStatus)?(0,ie.$s)(x,J.intervalMillis,30):(0,ie.$s)(x,J.intervalMillis),wn={throttleEndTimeMillis:Date.now()+dt,backoffCount:x+1};return J.setThrottleMetadata(Re,wn),Sn.debug(`Calling attemptFetch again in ${dt} millis`),zu(b,wn,F,J)}})).apply(this,arguments)}function Ba(b,C){return new Promise((x,F)=>{const J=Math.max(C-Date.now(),0),re=setTimeout(x,J);b.addEventListener(()=>{clearTimeout(re),F(ur.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function qu(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Wu{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let Cs,$a;function Ts(){return(Ts=(0,O.Z)(function*(b,C,x,F,J){if(J&&J.global)b("event",x,F);else{const re=yield C;b("event",x,Object.assign(Object.assign({},F),{send_to:re}))}})).apply(this,arguments)}function oo(b){$a=b}function lc(b){Cs=b}function ss(){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,O.Z)(function*(){var b;if(!(0,ie.hl)())return Sn.warn(ur.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(C){return Sn.warn(ur.create("indexeddb-unavailable",{errorInfo:null===(b=C)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function Bo(){return(Bo=(0,O.Z)(function*(b,C,x,F,J,re,be){var Re;const et=On(b);et.then(_r=>{x[_r.measurementId]=_r.appId,b.options.measurementId&&_r.measurementId!==b.options.measurementId&&Sn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${_r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_r=>Sn.error(_r)),C.push(et);const wt=ss().then(_r=>{if(_r)return F.getId()}),[St,dt]=yield Promise.all([et,wt]);Nd()||Hu(re,St.measurementId),$a&&(J("consent","default",$a),oo(void 0)),J("js",new Date);const wn=null!==(Re=be?.config)&&void 0!==Re?Re:{};return wn.origin="firebase",wn.update=!0,null!=dt&&(wn[Md]=dt),J("config",St.measurementId,wn),Cs&&(J("set",Cs),lc(void 0)),St.measurementId})).apply(this,arguments)}class Qu{constructor(C){this.app=C}_delete(){return delete Kr[this.app.options.appId],Promise.resolve()}}let Kr={},Ss=[];const jo={};let Ho,ao,$o="dataLayer",Ha=!1;function jy(b,C,x){!function ug(){const b=[];if((0,ie.ru)()&&b.push("This is a browser extension environment."),(0,ie.zI)()||b.push("Cookies are not available."),b.length>0){const C=b.map((F,J)=>`(${J+1}) ${F}`).join(" "),x=ur.create("invalid-analytics-context",{errorInfo:C});Sn.warn(x.message)}}();const F=b.options.appId;if(!F)throw ur.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw ur.create("no-api-key");Sn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Kr[F])throw ur.create("already-exists",{id:F});if(!Ha){!function xd(b){let C=[];Array.isArray(window[b])?C=window[b]:window[b]=C}($o);const{wrappedGtag:re,gtagCore:be}=function ka(b,C,x,F,J){let re=function(...be){window[F].push(arguments)};return window[J]&&"function"==typeof window[J]&&(re=window[J]),window[J]=function Gu(b,C,x,F){function re(){return(re=(0,O.Z)(function*(be,Re,et){try{"event"===be?yield Lo(b,C,x,Re,et):"config"===be?yield rf(b,C,x,F,Re,et):"consent"===be?b("consent","update",et):b("set",Re)}catch(wt){Sn.error(wt)}})).apply(this,arguments)}return function J(be,Re,et){return re.apply(this,arguments)}}(re,b,C,x),{gtagCore:re,wrappedGtag:window[J]}}(Kr,Ss,jo,$o,"gtag");ao=re,Ho=be,Ha=!0}return Kr[F]=function Uo(b,C,x,F,J,re,be){return Bo.apply(this,arguments)}(b,Ss,jo,C,Ho,$o,x),new Qu(b)}function Hy(){return sf.apply(this,arguments)}function sf(){return(sf=(0,O.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const st="@firebase/analytics";!function vn(){(0,ae._registerComponent)(new he.wA(Fo,(C,{options:x})=>jy(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ae._registerComponent)(new he.wA("analytics-internal",function b(C){try{const x=C.getProvider(Fo).getImmediate();return{logEvent:(F,J,re)=>function un(b,C,x,F){b=(0,ie.m9)(b),function Pd(b,C,x,F,J){return Ts.apply(this,arguments)}(ao,Kr[b.app.options.appId],C,x,F).catch(J=>Sn.error(J))}(x,F,J,re)}}catch(x){throw ur.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ae.registerVersion)(st,"0.8.0"),(0,ae.registerVersion)(st,"0.8.0","esm2017")}();var Ti=k(4408),kr=k(7565);const Xu=new class As extends kr.v{}(class za extends Ti.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):C.flush(this)}});var cc=k(4986),qa=k(8505),Go=k(9468),Ms=k(5363);const ot=new h.GfV("7.4.1"),Wa="__angularfire_symbol__analyticsIsSupportedValue",xs="__angularfire_symbol__analyticsIsSupported",Za="__angularfire_symbol__remoteConfigIsSupportedValue",zo="__angularfire_symbol__remoteConfigIsSupported",Jn="__angularfire_symbol__messagingIsSupportedValue",dc="__angularfire_symbol__messagingIsSupported";function Ka(b,C,x){if(C){if(1===C.length)return C[0];const re=C.filter(be=>be.app===x);if(1===re.length)return re[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[xs]||(globalThis[xs]=Hy().then(b=>globalThis[Wa]=b).catch(()=>globalThis[Wa]=!1)),globalThis[dc]||(globalThis[dc]=Td().then(b=>globalThis[Jn]=b).catch(()=>globalThis[Jn]=!1)),globalThis[zo]||(globalThis[zo]=bu().then(b=>globalThis[Za]=b).catch(()=>globalThis[Za]=!1));const Ns=(b,C)=>{const x=C?[C]:(0,te.C6)(),F=[];return x.forEach(J=>{J.container.getProvider(b).instances.forEach(be=>{F.includes(be)||F.push(be)})}),F};function Rs(){}class Si{constructor(C,x=Xu){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const J=this.zone;return this.delegate.schedule(function(be){J.runGuarded(()=>{C.apply(this,[be])})},x,F)}}class fc{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Rs,{},Rs,Rs)),x.pipe((0,qa.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wo=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new Si(Zone.current)),this.insideAngular=x.run(()=>new Si(Zone.current,cc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(h.LFG(h.R0b))},b.\u0275prov=h.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Yr(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function as(b){return Yr(),function Gn(b){return function(x){return(x=x.lift(new fc(b.ngZone))).pipe((0,Go.R)(b.outsideAngular),(0,Ms.Q)(b.insideAngular))}}(Yr())(b)}},2090:(lt,Se,k)=>{k.d(Se,{$s:()=>Yi,BH:()=>Ve,G6:()=>je,L:()=>fe,LL:()=>Fe,Mn:()=>De,Sg:()=>Me,UG:()=>_e,US:()=>he,ZB:()=>$,ZR:()=>ne,b$:()=>rt,d:()=>Ae,eu:()=>ye,hl:()=>U,jU:()=>pe,m9:()=>Wt,ne:()=>Ao,pd:()=>zr,r3:()=>xr,ru:()=>Ye,tV:()=>ge,uI:()=>Xe,vZ:()=>Hr,w1:()=>ve,xO:()=>ms,xb:()=>rn,z$:()=>we,zI:()=>Y,zd:()=>Oi});const ae=function(Z){const j=[];let V=0;for(let H=0;H<Z.length;H++){let q=Z.charCodeAt(H);q<128?j[V++]=q:q<2048?(j[V++]=q>>6|192,j[V++]=63&q|128):55296==(64512&q)&&H+1<Z.length&&56320==(64512&Z.charCodeAt(H+1))?(q=65536+((1023&q)<<10)+(1023&Z.charCodeAt(++H)),j[V++]=q>>18|240,j[V++]=q>>12&63|128,j[V++]=q>>6&63|128,j[V++]=63&q|128):(j[V++]=q>>12|224,j[V++]=q>>6&63|128,j[V++]=63&q|128)}return j},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Z,j){if(!Array.isArray(Z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const V=j?this.byteToCharMapWebSafe_:this.byteToCharMap_,H=[];for(let q=0;q<Z.length;q+=3){const Ce=Z[q],Ue=q+1<Z.length,it=Ue?Z[q+1]:0,cn=q+2<Z.length,Qt=cn?Z[q+2]:0;let Pt=(15&it)<<2|Qt>>6,mn=63&Qt;cn||(mn=64,Ue||(Pt=64)),H.push(V[Ce>>2],V[(3&Ce)<<4|it>>4],V[Pt],V[mn])}return H.join("")},encodeString(Z,j){return this.HAS_NATIVE_SUPPORT&&!j?btoa(Z):this.encodeByteArray(ae(Z),j)},decodeString(Z,j){return this.HAS_NATIVE_SUPPORT&&!j?atob(Z):function(Z){const j=[];let V=0,H=0;for(;V<Z.length;){const q=Z[V++];if(q<128)j[H++]=String.fromCharCode(q);else if(q>191&&q<224){const Ce=Z[V++];j[H++]=String.fromCharCode((31&q)<<6|63&Ce)}else if(q>239&&q<365){const cn=((7&q)<<18|(63&Z[V++])<<12|(63&Z[V++])<<6|63&Z[V++])-65536;j[H++]=String.fromCharCode(55296+(cn>>10)),j[H++]=String.fromCharCode(56320+(1023&cn))}else{const Ce=Z[V++],Ue=Z[V++];j[H++]=String.fromCharCode((15&q)<<12|(63&Ce)<<6|63&Ue)}}return j.join("")}(this.decodeStringToByteArray(Z,j))},decodeStringToByteArray(Z,j){this.init_();const V=j?this.charToByteMapWebSafe_:this.charToByteMap_,H=[];for(let q=0;q<Z.length;){const Ce=V[Z.charAt(q++)],it=q<Z.length?V[Z.charAt(q)]:0;++q;const Qt=q<Z.length?V[Z.charAt(q)]:64;++q;const jt=q<Z.length?V[Z.charAt(q)]:64;if(++q,null==Ce||null==it||null==Qt||null==jt)throw Error();H.push(Ce<<2|it>>4),64!==Qt&&(H.push(it<<4&240|Qt>>2),64!==jt&&H.push(Qt<<6&192|jt))}return H},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Z=0;Z<this.ENCODED_VALS.length;Z++)this.byteToCharMap_[Z]=this.ENCODED_VALS.charAt(Z),this.charToByteMap_[this.byteToCharMap_[Z]]=Z,this.byteToCharMapWebSafe_[Z]=this.ENCODED_VALS_WEBSAFE.charAt(Z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Z]]=Z,Z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Z)]=Z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Z)]=Z)}}},fe=function(Z){return function(Z){const j=ae(Z);return he.encodeByteArray(j,!0)}(Z).replace(/\./g,"")},ge=function(Z){try{return he.decodeString(Z,!0)}catch(j){console.error("base64Decode failed: ",j)}return null};function $(Z,j){if(!(j instanceof Object))return j;switch(j.constructor){case Date:return new Date(j.getTime());case Object:void 0===Z&&(Z={});break;case Array:Z=[];break;default:return j}for(const V in j)!j.hasOwnProperty(V)||!Q(V)||(Z[V]=$(Z[V],j[V]));return Z}function Q(Z){return"__proto__"!==Z}class Ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((j,V)=>{this.resolve=j,this.reject=V})}wrapCallback(j){return(V,H)=>{V?this.reject(V):this.resolve(H),"function"==typeof j&&(this.promise.catch(()=>{}),1===j.length?j(V):j(V,H))}}}function Me(Z,j){if(Z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const H=j||"demo-project",q=Z.iat||0,Ce=Z.sub||Z.user_id;if(!Ce)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ue=Object.assign({iss:`https://securetoken.google.com/${H}`,aud:H,iat:q,exp:q+3600,auth_time:q,sub:Ce,user_id:Ce,firebase:{sign_in_provider:"custom",identities:{}}},Z);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(Ue)),""].join(".")}function we(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(we())}function _e(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function pe(){return"object"==typeof self&&self.self===self}function Ye(){const Z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Z&&void 0!==Z.id}function rt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ae(){return we().indexOf("Electron/")>=0}function ve(){const Z=we();return Z.indexOf("MSIE ")>=0||Z.indexOf("Trident/")>=0}function De(){return we().indexOf("MSAppHost/")>=0}function je(){return!_e()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function U(){return"object"==typeof indexedDB}function ye(){return new Promise((Z,j)=>{try{let V=!0;const H="validate-browser-context-for-indexeddb-analytics-module",q=self.indexedDB.open(H);q.onsuccess=()=>{q.result.close(),V||self.indexedDB.deleteDatabase(H),Z(!0)},q.onupgradeneeded=()=>{V=!1},q.onerror=()=>{var Ce;j((null===(Ce=q.error)||void 0===Ce?void 0:Ce.message)||"")}}catch(V){j(V)}})}function Y(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class ne extends Error{constructor(j,V,H){super(V),this.code=j,this.customData=H,this.name="FirebaseError",Object.setPrototypeOf(this,ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fe.prototype.create)}}class Fe{constructor(j,V,H){this.service=j,this.serviceName=V,this.errors=H}create(j,...V){const H=V[0]||{},q=`${this.service}/${j}`,Ce=this.errors[j],Ue=Ce?function Pe(Z,j){return Z.replace(ft,(V,H)=>{const q=j[H];return null!=q?String(q):`<${H}?>`})}(Ce,H):"Error";return new ne(q,`${this.serviceName}: ${Ue} (${q}).`,H)}}const ft=/\{\$([^}]+)}/g;function xr(Z,j){return Object.prototype.hasOwnProperty.call(Z,j)}function rn(Z){for(const j in Z)if(Object.prototype.hasOwnProperty.call(Z,j))return!1;return!0}function Hr(Z,j){if(Z===j)return!0;const V=Object.keys(Z),H=Object.keys(j);for(const q of V){if(!H.includes(q))return!1;const Ce=Z[q],Ue=j[q];if(Ir(Ce)&&Ir(Ue)){if(!Hr(Ce,Ue))return!1}else if(Ce!==Ue)return!1}for(const q of H)if(!V.includes(q))return!1;return!0}function Ir(Z){return null!==Z&&"object"==typeof Z}function ms(Z){const j=[];for(const[V,H]of Object.entries(Z))Array.isArray(H)?H.forEach(q=>{j.push(encodeURIComponent(V)+"="+encodeURIComponent(q))}):j.push(encodeURIComponent(V)+"="+encodeURIComponent(H));return j.length?"&"+j.join("&"):""}function Oi(Z){const j={};return Z.replace(/^\?/,"").split("&").forEach(H=>{if(H){const[q,Ce]=H.split("=");j[decodeURIComponent(q)]=decodeURIComponent(Ce)}}),j}function zr(Z){const j=Z.indexOf("?");if(!j)return"";const V=Z.indexOf("#",j);return Z.substring(j,V>0?V:void 0)}function Ao(Z,j){const V=new Ze(Z,j);return V.subscribe.bind(V)}class Ze{constructor(j,V){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=V,this.task.then(()=>{j(this)}).catch(H=>{this.error(H)})}next(j){this.forEachObserver(V=>{V.next(j)})}error(j){this.forEachObserver(V=>{V.error(j)}),this.close(j)}complete(){this.forEachObserver(j=>{j.complete()}),this.close()}subscribe(j,V,H){let q;if(void 0===j&&void 0===V&&void 0===H)throw new Error("Missing Observer.");q=function Ki(Z,j){if("object"!=typeof Z||null===Z)return!1;for(const V of j)if(V in Z&&"function"==typeof Z[V])return!0;return!1}(j,["next","error","complete"])?j:{next:j,error:V,complete:H},void 0===q.next&&(q.next=Nn),void 0===q.error&&(q.error=Nn),void 0===q.complete&&(q.complete=Nn);const Ce=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?q.error(this.finalError):q.complete()}catch{}}),this.observers.push(q),Ce}unsubscribeOne(j){void 0===this.observers||void 0===this.observers[j]||(delete this.observers[j],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(j){if(!this.finalized)for(let V=0;V<this.observers.length;V++)this.sendOne(V,j)}sendOne(j,V){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[j])try{V(this.observers[j])}catch(H){typeof console<"u"&&console.error&&console.error(H)}})}close(j){this.finalized||(this.finalized=!0,void 0!==j&&(this.finalError=j),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nn(){}function Yi(Z,j=1e3,V=2){const H=j*Math.pow(V,Z),q=Math.round(.5*H*(Math.random()-.5)*2);return Math.min(144e5,H+q)}function Wt(Z){return Z&&Z._delegate?Z._delegate:Z}},107:(lt,Se,k)=>{var h=k(4650);let te=null;function O(){return te}const le=new h.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ge(){return(0,h.LFG)($)}()},providedIn:"platform"}),n})();const B=new h.OlP("Location Initialized");let $=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Ve(){return new $((0,h.LFG)(le))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Me(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function we(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Xe(n){return n&&"?"!==n[0]?"?"+n:n}let _e=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ye)},providedIn:"root"}),n})();const pe=new h.OlP("appBaseHref");let Ye=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Me(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Xe(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Xe(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Xe(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(pe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rt=(()=>{class n extends _e{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Me(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Xe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Xe(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(fe),h.LFG(pe,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=we(Be(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xe(r))}normalize(t){return n.stripTrailingSlash(function De(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xe(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Xe,n.joinWithSlash=Me,n.stripTrailingSlash=we,n.\u0275fac=function(t){return new(t||n)(h.LFG(_e))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function ve(){return new Ae((0,h.LFG)(_e))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}let $n=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new jl,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ar("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ar("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class jl{constructor(){this.$implicit=null,this.ngIf=null}}function ar(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,h.AaK)(e)}'.`)}let xo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function yr(n){return"server"===n}let Tu=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new ef((0,h.LFG)(le),window)}),n})();class ef{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Pr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=si(this.window.history)||si(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function si(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Xs extends class Cd extends class he{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){te||(te=n)}(new Xs)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Uu(){return eo=eo||document.querySelector("base"),eo?eo.getAttribute("href"):null}();return null==t?null:function Zr(n){Qn=Qn||document.createElement("a"),Qn.setAttribute("href",n);const e=Qn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){eo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Iu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let Qn,eo=null;const fn=new h.OlP("TRANSITION_ID"),ic=[{provide:h.ip1,useFactory:function Td(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[fn,le,h.zs3],multi:!0}];let sc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Bu=new h.OlP("EventManagerPlugins");let Sd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Bu),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class oc{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=O().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Po=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),ko=(()=>{class n extends Po{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Ad),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ad))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Ad(n){O().remove(n)}const Fo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Md=/%COMP%/g;function Hu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Hu(n,i,t):(i=i.replace(Md,n),t.push(i))}return t}function xd(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let no=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Lo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Nd(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case h.ifc.ShadowDom:return new Rd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Hu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Sd),h.LFG(ko),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Lo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Fo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ka(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ka(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=Fo[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=Fo[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,i&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xd(r)):this.eventManager.addEventListener(e,t,xd(r))}}function ka(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Nd extends Lo{constructor(e,t,r,i){super(e),this.component=r;const u=Hu(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Sn(n){return"_ngcontent-%COMP%".replace(Md,n)}(i+"-"+r.id),this.hostAttr=function $u(n){return"_nghost-%COMP%".replace(Md,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Rd extends Lo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Hu(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ur=(()=>{class n extends oc{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Fa=["alt","control","meta","shift"],La={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Va=(()=>{class n extends oc{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),c="code."),Fa.forEach(I=>{const T=r.indexOf(I);T>-1&&(r.splice(T,1),c+=I+".")}),c+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=i,_.fullKey=c,_}static matchEventFullKeyCode(t,r){let i=La[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(i=t.code,u="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Fa.forEach(c=>{c!==i&&(0,Vi[c])(t)&&(u+=c+".")}),u+=i,u===r)}static eventCallback(t,r,i){return u=>{n.matchEventFullKeyCode(u,t)&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Wu=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function zu(){Xs.makeCurrent()},multi:!0},{provide:le,useFactory:function Ba(){return(0,h.RDi)(document),document},deps:[]}]),Cs=new h.OlP(""),Pd=[{provide:h.rWj,useClass:class nf{addToWindow(e){h.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const i=h.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],Ts=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function io(){return new h.qLn},deps:[]},{provide:Bu,useClass:ur,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:Bu,useClass:Va,multi:!0,deps:[le]},{provide:no,useClass:no,deps:[Sd,ko,h.AFp]},{provide:h.FYo,useExisting:no},{provide:Po,useExisting:ko},{provide:ko,useClass:ko,deps:[le]},{provide:Sd,useClass:Sd,deps:[Bu,h.R0b]},{provide:class Ro{},useClass:sc,deps:[]},[]];let Zu=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:fn,useExisting:h.AFp},ic]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Cs,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...Ts,...Pd],imports:[xo,h.hGG]}),n})(),is=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Vo(){return new is((0,h.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;let Ga=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):h.LFG(dg),r},providedIn:"root"}),n})(),dg=(()=>{class n extends Ga{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case h.q3G.NONE:return r;case h.q3G.HTML:return(0,h.qzn)(r,"HTML")?(0,h.z3N)(r):(0,h.EiD)(this._doc,String(r)).toString();case h.q3G.STYLE:return(0,h.qzn)(r,"Style")?(0,h.z3N)(r):r;case h.q3G.SCRIPT:if((0,h.qzn)(r,"Script"))return(0,h.z3N)(r);throw new Error("unsafe value used in a script context");case h.q3G.URL:return(0,h.qzn)(r,"URL")?(0,h.z3N)(r):(0,h.mCW)(String(r));case h.q3G.RESOURCE_URL:if((0,h.qzn)(r,"ResourceURL"))return(0,h.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,h.JVY)(t)}bypassSecurityTrustStyle(t){return(0,h.L6k)(t)}bypassSecurityTrustScript(t){return(0,h.eBb)(t)}bypassSecurityTrustUrl(t){return(0,h.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,h.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function cg(n){return new dg(n.get(le))}(h.LFG(h.zs3)),r},providedIn:"root"}),n})();var un=k(8996),Ci=k(7669);function st(...n){const e=(0,Ci.yG)(n);return(0,un.D)(n,e)}var Hn=k(7579);class vn extends Hn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const za=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var kr=k(9751);const{isArray:As}=Array,{getPrototypeOf:Xu,prototype:hg,keys:cc}=Object;function qa(n){if(1===n.length){const e=n[0];if(As(e))return{args:e,keys:null};if(function Go(n){return n&&"object"==typeof n&&Xu(n)===hg}(e)){const t=cc(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ms=k(4671),ot=k(4004);const{isArray:Wa}=Array;function Za(n){return(0,ot.U)(e=>function xs(n,e){return Wa(e)?n(...e):n(e)}(n,e))}function zo(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Jn=k(5403),dc=k(9672);function qo(...n){const e=(0,Ci.yG)(n),t=(0,Ci.jO)(n),{args:r,keys:i}=qa(n);if(0===r.length)return(0,un.D)([],e);const u=new kr.y(function fg(n,e,t=Ms.y){return r=>{hc(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)hc(e,()=>{const I=(0,un.D)(n[_],e);let T=!1;I.subscribe((0,Jn.x)(r,M=>{u[_]=M,T||(T=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>zo(i,c):Ms.y));return t?u.pipe(Za(t)):u}function hc(n,e,t){n?(0,dc.f)(t,n,e):e()}var el=k(8189);function Ns(...n){return function Ka(){return(0,el.J)(1)}()((0,un.D)(n,(0,Ci.yG)(n)))}var Rs=k(8421);function Si(n){return new kr.y(e=>{(0,Rs.Xf)(n()).subscribe(e)})}var fc=k(9635),Wo=k(576);function Yr(n,e){const t=(0,Wo.m)(n)?n:()=>n,r=i=>i.error(t());return new kr.y(e?i=>e.schedule(r,0,i):r)}var os=k(515),Ui=k(727),br=k(4482);function Os(){return(0,br.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Jn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class as extends kr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,br.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ui.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Jn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ui.w0.EMPTY)}return e}refCount(){return Os()(this)}}function Gn(n,e){return(0,br.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,Jn.x)(r,_=>{i?.unsubscribe();let I=0;const T=u++;(0,Rs.Xf)(n(_,T)).subscribe(i=(0,Jn.x)(r,M=>r.next(e?e(_,M,T,I++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}function pn(n){return n<=0?()=>os.E:(0,br.e)((e,t)=>{let r=0;e.subscribe((0,Jn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function tl(...n){const e=(0,Ci.yG)(n);return(0,br.e)((t,r)=>{(e?Ns(n,t,e):Ns(n,t)).subscribe(r)})}function b(n,e){return(0,br.e)((t,r)=>{let i=0;t.subscribe((0,Jn.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}var C=k(5577);function x(n){return(0,br.e)((e,t)=>{let r=!1;e.subscribe((0,Jn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function F(n=J){return(0,br.e)((e,t)=>{let r=!1;e.subscribe((0,Jn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function J(){return new za}function re(n,e){const t=arguments.length>=2;return r=>r.pipe(n?b((i,u)=>n(i,u,r)):Ms.y,pn(1),t?x(e):F(()=>new za))}function be(n,e){return(0,Wo.m)(e)?(0,C.z)(n,e,1):(0,C.z)(n,1)}var Re=k(8505);function et(n){return(0,br.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,Jn.x)(t,void 0,void 0,c=>{u=(0,Rs.Xf)(n(c,et(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}function wt(n,e,t,r,i){return(u,c)=>{let p=t,_=e,I=0;u.subscribe((0,Jn.x)(c,T=>{const M=I++;_=p?n(_,T,M):(p=!0,T),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function St(n,e){return(0,br.e)(wt(n,e,arguments.length>=2,!0))}function dt(n){return n<=0?()=>os.E:(0,br.e)((e,t)=>{let r=[];e.subscribe((0,Jn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function wn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?b((i,u)=>n(i,u,r)):Ms.y,dt(1),t?x(e):F(()=>new za))}function Ps(n){return(0,br.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const At="primary",Bi=Symbol("RouteTitle");class ks{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ai(n){return new ks(n)}function Ko(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ai(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!af(n[i],e[i]))return!1;return!0}function af(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function pg(n){return Array.prototype.concat.apply([],n)}function gg(n){return n.length>0?n[n.length-1]:null}function Xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ji(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,un.D)(Promise.resolve(n)):st(n)}const a0={exact:function yg(n,e,t){if(!co(n.segments,e.segments)||!lo(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yg(n.children[r],e.children[r],t))return!1;return!0},subset:Ya},lf={exact:function cf(n,e){return Ai(n,e)},subset:function _g(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>af(n[t],e[t]))},ignored:()=>!0};function zy(n,e,t){return a0[t.paths](n.root,e.root,t.matrixParams)&&lf[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ya(n,e,t){return Fd(n,e,e.segments,t)}function Fd(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!co(i,t)||e.hasChildren()||!lo(i,t,r))}if(n.segments.length===t.length){if(!co(n.segments,t)||!lo(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ya(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(co(n.segments,i)&&lo(n.segments,i,r)&&n.children[At])&&Fd(n.children[At],e,u,r)}}function lo(n,e,t){return e.every((r,i)=>lf[t](n[i].parameters,r.parameters))}class Qa{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ai(this.queryParams)),this._queryParamMap}toString(){return ho.serialize(this)}}class Ht{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ud(this)}}class Ld{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ai(this.parameters)),this._parameterMap}toString(){return ff(this)}}function co(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let df=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new Vd},providedIn:"root"}),n})();class Vd{parse(e){const t=new Jy(e);return new Qa(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ja(e.root,!0)}`,r=function Zy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${gc(t)}=${gc(i)}`).join("&"):`${gc(t)}=${gc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function qy(n){return encodeURI(n)}(e.fragment)}`:""}`}}const ho=new Vd;function Ud(n){return n.segments.map(e=>ff(e)).join("/")}function Ja(n,e){if(!n.hasChildren())return Ud(n);if(e){const t=n.children[At]?Ja(n.children[At],!1):"",r=[];return Xn(n.children,(i,u)=>{u!==At&&r.push(`${u}:${Ja(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function vg(n,e){let t=[];return Xn(n.children,(r,i)=>{i===At&&(t=t.concat(e(r,i)))}),Xn(n.children,(r,i)=>{i!==At&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===At?[Ja(n.children[At],!1)]:[`${i}:${Ja(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[At]?`${Ud(n)}/${t[0]}`:`${Ud(n)}/(${t.join("//")})`}}function wg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gc(n){return wg(n).replace(/%3B/gi,";")}function Mi(n){return wg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fo(n){return decodeURIComponent(n)}function hf(n){return fo(n.replace(/\+/g,"%20"))}function ff(n){return`${Mi(n.path)}${function Wy(n){return Object.keys(n).map(e=>`;${Mi(e)}=${Mi(n[e])}`).join("")}(n.parameters)}`}const Ky=/^[^\/()?;=#]+/;function pf(n){const e=n.match(Ky);return e?e[0]:""}const Yo=/^[^=?&#]+/,Qy=/^[^&#]+/;class Jy{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ht([],{}):new Ht([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[At]=new Ht(e,t)),r}parseSegment(){const e=pf(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new Ld(fo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=pf(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=pf(this.remaining);i&&(r=i,this.capture(r))}e[fo(t)]=fo(r)}parseQueryParam(e){const t=function Yy(n){const e=n.match(Yo);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function gf(n){const e=n.match(Qy);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=hf(t),u=hf(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=pf(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=At);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[At]:new Ht([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function po(n){return n.segments.length>0?new Ht([],{[At]:n}):n}function mc(n){const e={};for(const r of Object.keys(n.children)){const u=mc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Fs(n){if(1===n.numberOfChildren&&n.children[At]){const e=n.children[At];return new Ht(n.segments.concat(e.segments),e.children)}return n}(new Ht(n.segments,e))}function xi(n){return n instanceof Qa}function l0(n,e,t,r,i){if(0===t.length)return Qo(e.root,e.root,e.root,r,i);const u=function e_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new mf(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return Xn(u.outlets,(_,I)=>{p[I]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new mf(t,e,r)}(t);return u.toRoot()?Qo(e.root,e.root,new Ht([],{}),r,i):function c(_){const I=function _f(n,e,t,r){if(n.isAbsolute)return new eu(e.root,!0,0);if(-1===r)return new eu(t,t===e.root,0);return function Eg(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new h.vHH(4005,!1);i=r.segments.length}return new eu(r,!1,i-u)}(t,r+($d(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,_),T=I.processChildren?Jo(I.segmentGroup,I.index,u.commands):tu(I.segmentGroup,I.index,u.commands);return Qo(e.root,I.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function $d(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Xa(n){return"object"==typeof n&&null!=n&&n.outlets}function Qo(n,e,t,r,i){let c,u={};r&&Xn(r,(_,I)=>{u[I]=Array.isArray(_)?_.map(T=>`${T}`):`${_}`}),c=n===e?t:yc(n,e,t);const p=po(mc(c));return new Qa(p,u,i)}function yc(n,e,t){const r={};return Xn(n.children,(i,u)=>{r[u]=i===e?t:yc(i,e,t)}),new Ht(n.segments,r)}class mf{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&$d(r[0]))throw new h.vHH(4003,!1);const i=r.find(Xa);if(i&&i!==gg(r))throw new h.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class eu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function tu(n,e,t){if(n||(n=new Ht([],{})),0===n.segments.length&&n.hasChildren())return Jo(n,e,t);const r=function Ig(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(Xa(p))break;const _=`${p}`,I=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!vf(_,I,c))return u;r+=2}else{if(!vf(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ht(n.segments.slice(0,r.pathIndex),{});return u.children[At]=new Ht(n.segments.slice(r.pathIndex),n.children),Jo(u,0,i)}return r.match&&0===i.length?new Ht(n.segments,{}):r.match&&!n.hasChildren()?_c(n,e,t):r.match?Jo(n,0,i):_c(n,e,t)}function Jo(n,e,t){if(0===t.length)return new Ht(n.segments,{});{const r=function t_(n){return Xa(n[0])?n[0].outlets:{[At]:n}}(t),i={};return Xn(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=tu(n.children[c],e,u))}),Xn(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new Ht(n.segments,i)}}function _c(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Xa(u)){const _=Dg(u.outlets);return new Ht(r,_)}if(0===i&&$d(t[0])){r.push(new Ld(n.segments[e].path,Pn(t[0]))),i++;continue}const c=Xa(u)?u.outlets[At]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&$d(p)?(r.push(new Ld(c,Pn(p))),i+=2):(r.push(new Ld(c,{})),i++)}return new Ht(r,{})}function Dg(n){const e={};return Xn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=_c(new Ht([],{}),0,t))}),e}function Pn(n){const e={};return Xn(n,(t,r)=>e[r]=`${t}`),e}function vf(n,e,t){return n==t.path&&Ai(e,t.parameters)}class go{constructor(e,t){this.id=e,this.url=t}}class vc extends go{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $i extends go{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Hd extends go{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class wf extends go{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class n_ extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r_ extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class i_ extends go{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class c0 extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s_ extends go{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nu{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class wc{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ef{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gd{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o_{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qr{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ec{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Cg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Cg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Ic(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ic(e,this._root).map(t=>t.value)}}function Cg(n,e){if(n===e.value)return e;for(const t of e.children){const r=Cg(n,t);if(r)return r}return null}function Ic(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Ic(n,t);if(r.length)return r.unshift(e),r}return[]}class Ni{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ru(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class zd extends Ec{constructor(e,t){super(e),this.snapshot=t,kn(this,e)}toString(){return this.snapshot.toString()}}function Xo(n,e){const t=function ea(n,e){const c=new rl([],{},{},"",{},At,e,null,n.root,-1,{});return new il("",new Ni(c,[]))}(n,e),r=new vn([new Ld("",{})]),i=new vn({}),u=new vn({}),c=new vn({}),p=new vn(""),_=new us(r,i,c,p,u,At,e,t.root);return _.snapshot=t.root,new zd(new Ni(_,[]),t)}class us{constructor(e,t,r,i,u,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.pipe((0,ot.U)(I=>I[Bi]))??st(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ot.U)(e=>ai(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ot.U)(e=>ai(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Dc(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function a_(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class rl{constructor(e,t,r,i,u,c,p,_,I,T,M,L){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.title=this.data?.[Bi],this.routeConfig=_,this._urlSegment=I,this._lastPathIndex=T,this._correctedLastPathIndex=L??T,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ai(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ai(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class il extends Ec{constructor(e,t){super(t),this.url=e,kn(this,t)}toString(){return bc(this._root)}}function kn(n,e){e.value._routerState=n,e.children.forEach(t=>kn(n,t))}function bc(n){const e=n.children.length>0?` { ${n.children.map(bc).join(", ")} } `:"";return`${n.value}${e}`}function iu(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ai(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ai(e.params,t.params)||n.params.next(t.params),function uo(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ai(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ai(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function If(n,e){const t=Ai(n.params,e.params)&&function pc(n,e){return co(n,e)&&n.every((t,r)=>Ai(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||If(n.parent,e.parent))}function Ls(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function su(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Ls(n,r,i);return Ls(n,r)})}(n,e,t);return new Ni(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>Ls(n,p)),c}}const r=function Tg(n){return new us(new vn(n.url),new vn(n.params),new vn(n.queryParams),new vn(n.fragment),new vn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>Ls(n,u));return new Ni(r,i)}}const Df="ngNavigationCancelingError";function qd(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=xi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Sg(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Sg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Df]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Wd(n){return Ag(n)&&xi(n.url)}function Ag(n){return n&&n[Df]}class Mg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new y,this.attachRef=null}}let y=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Mg,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const f=!1;let m=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=i||At,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,f);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,f);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,f);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,f);this._activatedRoute=t;const i=this.location,c=t._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,_=new w(t,p,i.injector);if(r&&function A(n){return!!n.resolveComponentFactory}(r)){const I=r.resolveComponentFactory(c);this.activated=i.createComponent(I,i.length,_)}else this.activated=i.createComponent(c,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(y),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class w{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===us?this.route:e===y?this.childContexts:this.parent.get(e,t)}}let R=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[m],encapsulation:2}),n})();function W(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Tc(n){const e=n.children&&n.children.map(Tc),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==At&&(t.component=R),t}function Fr(n){return n.outlet||At}function bf(n,e){const t=n.filter(r=>Fr(r)===e);return t.push(...n.filter(r=>Fr(r)!==e)),t}function sl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class u_{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),iu(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ru(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),Xn(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=ru(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=ru(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ru(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new o_(u.value.snapshot))}),e.children.length&&this.forwardEvent(new bg(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(iu(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),iu(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=sl(i.snapshot),_=p?.get(h._Vd)??null;c.attachRef=null,c.route=i,c.resolver=_,c.injector=p,c.outlet&&c.outlet.activateWith(i,c.injector),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class xg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ta{constructor(e,t){this.component=e,this.route=t}}function l_(n,e,t){const r=n._root;return Zd(r,e?e._root:null,t,[r.value])}function ou(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Zd(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=ru(e);return n.children.forEach(c=>{(function OM(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function Sb(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!co(n.url,e.url);case"pathParamsOrQueryParamsChange":return!co(n.url,e.url)||!Ai(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!If(n,e)||!Ai(n.queryParams,e.queryParams);default:return!If(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new xg(r)):(u.data=c.data,u._resolvedData=c._resolvedData),Zd(n,e,u.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new ta(p.outlet.component,c))}else c&&Kd(e,p,i),i.canActivateChecks.push(new xg(r)),Zd(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),Xn(u,(c,p)=>Kd(c,t.getContext(p),i)),i}function Kd(n,e,t){const r=ru(n),i=n.value;Xn(r,(u,c)=>{Kd(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new ta(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Ac(n){return"function"==typeof n}function h_(n){return n instanceof za||"EmptyError"===n?.name}const Rg=Symbol("INITIAL_VALUE");function Mc(){return Gn(n=>qo(n.map(e=>e.pipe(pn(1),tl(Rg)))).pipe((0,ot.U)(e=>{for(const t of e)if(!0!==t){if(t===Rg)return Rg;if(!1===t||t instanceof Qa)return t}return!0}),b(e=>e!==Rg),pn(1)))}function m0(n){return(0,fc.z)((0,Re.b)(e=>{if(xi(e))throw qd(0,e)}),(0,ot.U)(e=>!0===e))}const Jr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Og(n,e,t,r,i){const u=Pg(n,e,t);return u.matched?function Lb(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?st(i.map(c=>{const p=ou(c,n);return ji(function d_(n){return n&&Ac(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(Mc(),m0()):st(!0)}(r=W(e,r),e,t).pipe((0,ot.U)(c=>!0===c?u:{...Jr})):st(u)}function Pg(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Jr}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ko)(t,n,e);if(!i)return{...Jr};const u={};Xn(i.posParams,(p,_)=>{u[_]=p.path});const c=i.consumed.length>0?{...u,...i.consumed[i.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:c,positionalParamSegments:i.posParams??{}}}function Yd(n,e,t,r,i="corrected"){if(t.length>0&&function p_(n,e,t){return t.some(r=>kg(n,e,r)&&Fr(r)!==At)}(n,t,r)){const c=new Ht(e,function Cf(n,e,t,r){const i={};i[At]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Fr(u)!==At){const c=new Ht([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[Fr(u)]=c}return i}(n,e,r,new Ht(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Vb(n,e,t){return t.some(r=>kg(n,e,r))}(n,t,r)){const c=new Ht(n.segments,function ui(n,e,t,r,i,u){const c={};for(const p of r)if(kg(n,t,p)&&!i[Fr(p)]){const _=new Ht([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[Fr(p)]=_}return{...i,...c}}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new Ht(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function kg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function g_(n,e,t,r){return!!(Fr(n)===r||r!==At&&kg(e,t,n))&&("**"===n.path||Pg(e,n,t).matched)}function y0(n,e,t){return 0===e.length&&!n.children[t]}const Tf=!1;class Fg{constructor(e){this.segmentGroup=e||null}}class m_{constructor(e){this.urlTree=e}}function Sf(n){return Yr(new Fg(n))}function _0(n){return Yr(new m_(n))}class Qd{constructor(e,t,r,i,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0}apply(){const e=Yd(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ht(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,At).pipe((0,ot.U)(u=>this.createUrlTree(mc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(et(u=>{if(u instanceof m_)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Fg?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,At).pipe((0,ot.U)(i=>this.createUrlTree(mc(i),e.queryParams,e.fragment))).pipe(et(i=>{throw i instanceof Fg?this.noMatchError(i):i}))}noMatchError(e){return new h.vHH(4002,Tf)}createUrlTree(e,t,r){const i=po(e);return new Qa(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ot.U)(u=>new Ht([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,un.D)(i).pipe(be(u=>{const c=r.children[u],p=bf(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,ot.U)(_=>({segment:_,outlet:u})))}),St((u,c)=>(u[c.outlet]=c.segment,u),{}),wn())}expandSegment(e,t,r,i,u,c){return(0,un.D)(r).pipe(be(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(et(I=>{if(I instanceof Fg)return st(null);throw I}))),re(p=>!!p),et((p,_)=>{if(h_(p))return y0(t,i,u)?st(new Ht([],{})):Sf(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return g_(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):Sf(t):Sf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?_0(u):this.lineralizeSegments(r,u).pipe((0,C.z)(c=>{const p=new Ht(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:_,remainingSegments:I,positionalParamSegments:T}=Pg(t,i,u);if(!p)return Sf(t);const M=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?_0(M):this.lineralizeSegments(i,M).pipe((0,C.z)(L=>this.expandSegment(e,t,r,L.concat(I),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){return"**"===r.path?(e=W(r,e),r.loadChildren?(r._loadedRoutes?st({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ot.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new Ht(i,{})))):st(new Ht(i,{}))):Og(t,r,i,e).pipe(Gn(({matched:c,consumedSegments:p,remainingSegments:_})=>c?this.getChildConfig(e=r._injector??e,r,i).pipe((0,C.z)(T=>{const M=T.injector??e,L=T.routes,{segmentGroup:G,slicedSegments:K}=Yd(t,p,_,L),ue=new Ht(G.segments,G.children);if(0===K.length&&ue.hasChildren())return this.expandChildren(M,L,ue).pipe((0,ot.U)(mt=>new Ht(p,mt)));if(0===L.length&&0===K.length)return st(new Ht(p,{}));const Ie=Fr(r)===u;return this.expandSegment(M,ue,L,K,Ie?At:u,!0).pipe((0,ot.U)(nt=>new Ht(p.concat(nt.segments),nt.children)))})):Sf(t)))}getChildConfig(e,t,r){return t.children?st({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?st({routes:t._loadedRoutes,injector:t._loadedInjector}):function g0(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?st(!0):st(i.map(c=>{const p=ou(c,n);return ji(function f0(n){return n&&Ac(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(Mc(),m0())}(e,t,r).pipe((0,C.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,Re.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Bb(n){return Yr(Sg(Tf,3))}())):st({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[At])return Yr(new h.vHH(4e3,Tf));i=i.children[At]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new Qa(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xn(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return Xn(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new Ht(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new h.vHH(4001,Tf);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class $b{}class v0{constructor(e,t,r,i,u,c,p,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=p,this.urlSerializer=_}recognize(){const e=Yd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,At).pipe((0,ot.U)(t=>{if(null===t)return null;const r=new rl([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},At,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ni(r,t),u=new il(this.url,i);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Dc(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,un.D)(Object.keys(r.children)).pipe(be(i=>{const u=r.children[i],c=bf(t,i);return this.processSegmentGroup(e,c,u,i)}),St((i,u)=>i&&u?(i.push(...u),i):null),function _r(n,e=!1){return(0,br.e)((t,r)=>{let i=0;t.subscribe((0,Jn.x)(r,u=>{const c=n(u,i++);(c||e)&&r.next(u),!c&&r.complete()}))})}(i=>null!==i),x(null),wn(),(0,ot.U)(i=>{if(null===i)return null;const u=Vg(i);return function FM(n){n.sort((e,t)=>e.value.outlet===At?-1:t.value.outlet===At?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,i,u){return(0,un.D)(t).pipe(be(c=>this.processSegmentAgainstRoute(c._injector??e,c,r,i,u)),re(c=>!!c),et(c=>{if(h_(c))return y0(r,i,u)?st([]):st(null);throw c}))}processSegmentAgainstRoute(e,t,r,i,u){if(t.redirectTo||!g_(t,r,i,u))return st(null);let c;if("**"===t.path){const p=i.length>0?gg(i).parameters:{},_=w0(r)+i.length;c=st({snapshot:new rl(i,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,E0(t),Fr(t),t.component??t._loadedComponent??null,t,__(r),_,I0(t),_),consumedSegments:[],remainingSegments:[]})}else c=Og(r,t,i,e).pipe((0,ot.U)(({matched:p,consumedSegments:_,remainingSegments:I,parameters:T})=>{if(!p)return null;const M=w0(r)+_.length;return{snapshot:new rl(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,E0(t),Fr(t),t.component??t._loadedComponent??null,t,__(r),M,I0(t),M),consumedSegments:_,remainingSegments:I}}));return c.pipe(Gn(p=>{if(null===p)return st(null);const{snapshot:_,consumedSegments:I,remainingSegments:T}=p;e=t._injector??e;const M=t._loadedInjector??e,L=function na(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:G,slicedSegments:K}=Yd(r,I,T,L.filter(Ie=>void 0===Ie.redirectTo),this.relativeLinkResolution);if(0===K.length&&G.hasChildren())return this.processChildren(M,L,G).pipe((0,ot.U)(Ie=>null===Ie?null:[new Ni(_,Ie)]));if(0===L.length&&0===K.length)return st([new Ni(_,[])]);const ue=Fr(t)===u;return this.processSegment(M,L,G,K,ue?At:u).pipe((0,ot.U)(Ie=>null===Ie?null:[new Ni(_,Ie)]))}))}}function y_(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Vg(n){const e=[],t=new Set;for(const r of n){if(!y_(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Vg(r.children);e.push(new Ni(r.value,i))}return e.filter(r=>!t.has(r))}function __(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function w0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function E0(n){return n.data||{}}function I0(n){return n.resolve||{}}function I_(n){return"string"==typeof n.title||null===n.title}function D_(n){return Gn(e=>{const t=n(e);return t?(0,un.D)(t).pipe((0,ot.U)(()=>e)):st(e)})}let Ug=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(u=>u.outlet===At);return r}getResolvedTitleForRoute(t){return t.data[Bi]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(b0)},providedIn:"root"}),n})(),b0=(()=>{class n extends Ug{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(is))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Gb{}class qb extends class zb{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Af=new h.OlP("",{providedIn:"root",factory:()=>({})}),jg=new h.OlP("ROUTES");let Mf=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return st(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=ji(t.loadComponent()).pipe((0,Re.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Ps(()=>{this.componentLoaders.delete(t)})),i=new as(r,()=>new Hn.x).pipe(Os());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return st({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ot.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,I,T=!1;Array.isArray(p)?I=p:(_=p.create(t).injector,I=pg(_.get(jg,[],h.XFs.Self|h.XFs.Optional)));return{routes:I.map(Tc),injector:_}}),Ps(()=>{this.childrenLoaders.delete(r)})),c=new as(u,()=>new Hn.x).pipe(Os());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return ji(t()).pipe((0,C.z)(r=>r instanceof h.YKP||Array.isArray(r)?st(r):(0,un.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Zb{}class Kb{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function C0(n){throw n}function xc(n,e,t){return e.parse("/")}const T0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},S0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Qb(){const n=(0,h.f3M)(df),e=(0,h.f3M)(y),t=(0,h.f3M)(Ae),r=(0,h.f3M)(h.zs3),i=(0,h.f3M)(h.Sil),u=(0,h.f3M)(jg,{optional:!0})??[],c=(0,h.f3M)(Af,{optional:!0})??{},p=(0,h.f3M)(b0),_=(0,h.f3M)(Ug,{optional:!0}),I=(0,h.f3M)(Zb,{optional:!0}),T=(0,h.f3M)(Gb,{optional:!0}),M=new dr(null,n,e,t,r,i,pg(u));return I&&(M.urlHandlingStrategy=I),T&&(M.routeReuseStrategy=T),M.titleStrategy=_??p,function Yb(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,M),M}let dr=(()=>{class n{constructor(t,r,i,u,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Hn.x,this.errorHandler=C0,this.malformedUriErrorHandler=xc,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>st(void 0),this.urlHandlingStrategy=new Kb,this.routeReuseStrategy=new qb,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(Mf),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new wc(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new nu(L)),this.ngModule=c.get(h.h0i),this.console=c.get(h.c2e);const M=c.get(h.R0b);this.isNgZoneEnabled=M instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function mg(){return new Qa(new Ht([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Xo(this.currentUrlTree,this.rootComponentType),this.transitions=new vn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(b(i=>0!==i.id),(0,ot.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Gn(i=>{let u=!1,c=!1;return st(i).pipe((0,Re.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Gn(p=>{const _=this.browserUrlTree.toString(),I=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return b_(p.source)&&(this.browserUrlTree=p.extractedUrl),st(p).pipe(Gn(M=>{const L=this.transitions.getValue();return r.next(new vc(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?os.E:Promise.resolve(M)}),function au(n,e,t,r){return Gn(i=>function jb(n,e,t,r,i){return new Qd(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ot.U)(u=>({...i,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Re.b)(M=>{this.currentNavigation={...this.currentNavigation,finalUrl:M.urlAfterRedirects},i.urlAfterRedirects=M.urlAfterRedirects}),function v_(n,e,t,r,i,u){return(0,C.z)(c=>function kM(n,e,t,r,i,u,c="emptyOnly",p="legacy"){return new v0(n,e,t,r,i,c,p,u).recognize().pipe(Gn(_=>null===_?function PM(n){return new kr.y(e=>e.error(n))}(new $b):st(_)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,i,u).pipe((0,ot.U)(p=>({...c,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Re.b)(M=>{if(i.targetSnapshot=M.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(G,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new n_(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:K,restoredState:ue,extras:Ie}=p,We=new vc(L,this.serializeUrl(G),K,ue);r.next(We);const nt=Xo(G,this.rootComponentType).snapshot;return st(i={...p,targetSnapshot:nt,urlAfterRedirects:G,extras:{...Ie,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),os.E}),(0,Re.b)(p=>{const _=new r_(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,ot.U)(p=>i={...p,guards:l_(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function xb(n,e){return(0,C.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?st({...t,guardsResult:!0}):function Nb(n,e,t,r){return(0,un.D)(n).pipe((0,C.z)(i=>function Fb(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(p=>{const _=sl(e)??i,I=ou(p,_);return ji(function Ab(n){return n&&Ac(n.canDeactivate)}(I)?I.canDeactivate(n,e,t,r):_.runInContext(()=>I(n,e,t,r))).pipe(re())})).pipe(Mc()):st(!0)}(i.component,i.route,t,e,r)),re(i=>!0!==i,!0))}(c,r,i,n).pipe((0,C.z)(p=>p&&function h0(n){return"boolean"==typeof n}(p)?function Rb(n,e,t,r){return(0,un.D)(e).pipe(be(i=>Ns(function f_(n,e){return null!==n&&e&&e(new Ef(n)),st(!0)}(i.route.parent,r),function Ob(n,e){return null!==n&&e&&e(new Gd(n)),st(!0)}(i.route,r),function kb(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function d0(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Si(()=>st(c.guards.map(_=>{const I=sl(c.node)??t,T=ou(_,I);return ji(function c_(n){return n&&Ac(n.canActivateChild)}(T)?T.canActivateChild(r,n):I.runInContext(()=>T(r,n))).pipe(re())})).pipe(Mc())));return st(u).pipe(Mc())}(n,i.path,t),function Pb(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(u=>Si(()=>{const c=sl(e)??t,p=ou(u,c);return ji(function p0(n){return n&&Ac(n.canActivate)}(p)?p.canActivate(e,n):c.runInContext(()=>p(e,n))).pipe(re())}));return st(i).pipe(Mc())}(n,i.route,t))),re(i=>!0!==i,!0))}(r,u,n,e):st(p)),(0,ot.U)(p=>({...t,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Re.b)(p=>{if(i.guardsResult=p.guardsResult,xi(p.guardsResult))throw qd(0,p.guardsResult);const _=new i_(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),b(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),D_(p=>{if(p.guards.canActivateChecks.length)return st(p).pipe((0,Re.b)(_=>{const I=new c0(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}),Gn(_=>{let I=!1;return st(_).pipe(function w_(n,e){return(0,C.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let u=0;return(0,un.D)(i).pipe(be(c=>function D0(n,e,t,r){const i=n.routeConfig,u=n._resolve;return void 0!==i?.title&&!I_(i)&&(u[Bi]=i.title),function LM(n,e,t,r){const i=function Xd(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return st({});const u={};return(0,un.D)(i).pipe((0,C.z)(c=>function E_(n,e,t,r){const i=sl(e)??r,u=ou(n,i);return ji(u.resolve?u.resolve(e,t):i.runInContext(()=>u(e,t)))}(n[c],e,t,r).pipe(re(),(0,Re.b)(p=>{u[c]=p}))),dt(1),function Zo(n){return(0,ot.U)(()=>n)}(u),et(c=>h_(c)?os.E:Yr(c)))}(u,n,e,r).pipe((0,ot.U)(c=>(n._resolvedData=c,n.data=Dc(n,t).resolve,i&&I_(i)&&(n.data[Bi]=i.title),null)))}(c.route,r,n,e)),(0,Re.b)(()=>u++),dt(1),(0,C.z)(c=>u===i.length?st(t):os.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Re.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,Re.b)(_=>{const I=new s_(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}))}),D_(p=>{const _=I=>{const T=[];I.routeConfig?.loadComponent&&!I.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(I.routeConfig).pipe((0,Re.b)(M=>{I.component=M}),(0,ot.U)(()=>{})));for(const M of I.children)T.push(..._(M));return T};return qo(_(p.targetSnapshot.root)).pipe(x(),pn(1))}),D_(()=>this.afterPreactivation()),(0,ot.U)(p=>{const _=function mo(n,e,t){const r=Ls(n,e._root,t?t._root:void 0);return new zd(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return i={...p,targetRouterState:_}}),(0,Re.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,ot.U)(r=>(new u_(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Re.b)({next(){u=!0},complete(){u=!0}}),Ps(()=>{u||c||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),et(p=>{if(c=!0,Ag(p)){Wd(p)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new Hd(i.id,this.serializeUrl(i.extractedUrl),p.message,p.cancellationCode);if(r.next(_),Wd(p)){const I=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||b_(i.source)};this.scheduleNavigation(I,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new wf(i.id,this.serializeUrl(i.extractedUrl),p,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(p))}catch(I){i.reject(I)}}return os.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const p={...u};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(i.state=p)}const c=this.parseUrl(t.url);this.scheduleNavigation(c,r,u,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Tc),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,I=i||this.routerState.root,T=_?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M={...this.currentUrlTree.queryParams,...u};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),l0(I,this.currentUrlTree,t,M,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=xi(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Jb(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...T0}:!1===r?{...S0}:r,xi(t))return zy(this.currentUrlTree,t,i);const u=this.parseUrl(t);return zy(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new $i(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){if(this.disposed)return Promise.resolve(!1);let p,_,I;c?(p=c.resolve,_=c.reject,I=c.promise):I=new Promise((L,G)=>{p=L,_=G});const T=++this.navigationId;let M;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),M=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):M=0,this.setTransition({id:T,targetPageId:M,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:p,reject:_,promise:I,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),I.catch(L=>Promise.reject(L))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const u=new Hd(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return Qb()},providedIn:"root"}),n})();function b_(n){return"imperative"!==n}let Nf=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Hn.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,h.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,h.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,h.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(dr),h.Y36(us),h.$8M("tabindex"),h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[h.TTD]}),n})();class Rf{}let S_=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(b(t=>t instanceof $i),be(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const c=u._injector??t,p=u._loadedInjector??c;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?i.push(this.preloadConfig(c,u)):(u.children||u._loadedRoutes)&&i.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,un.D)(i).pipe((0,el.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):st(null);const u=i.pipe((0,C.z)(c=>null===c?st(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(c.injector??t,c.routes))));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,un.D)([u,c]).pipe((0,el.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(dr),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Rf),h.LFG(Mf))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hg=new h.OlP("");let Gg=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof vc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $i&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qr&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Qr(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function eh(n,e){return{\u0275kind:n,\u0275providers:e}}function M_(n){return[{provide:jg,multi:!0,useValue:n}]}function zg(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(dr),i=n.get(x_);1===n.get(M0)&&r.initialNavigation(),n.get(R0,null,h.XFs.Optional)?.setUpPreloading(),n.get(Hg,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.next(),i.complete()}}const x_=new h.OlP("",{factory:()=>new Hn.x}),M0=new h.OlP("",{providedIn:"root",factory:()=>1});const R0=new h.OlP("");function nC(n){return eh(0,[{provide:R0,useExisting:S_},{provide:Rf,useExisting:n}])}const O0=new h.OlP("ROUTER_FORROOT_GUARD"),iC=[Ae,{provide:df,useClass:Vd},{provide:dr,useFactory:Qb},y,{provide:us,useFactory:function A_(n){return n.routerState.root},deps:[dr]},Mf];function sC(){return new h.PXZ("Router",dr)}let P0=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[iC,[],M_(t),{provide:O0,useFactory:uC,deps:[[dr,new h.FiY,new h.tp0]]},{provide:Af,useValue:r||{}},r?.useHash?{provide:_e,useClass:rt}:{provide:_e,useClass:Ye},{provide:Hg,useFactory:()=>{const n=(0,h.f3M)(dr),e=(0,h.f3M)(Tu),t=(0,h.f3M)(Af);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Gg(n,e,t)}},r?.preloadingStrategy?nC(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:sC},r?.initialNavigation?Ft(r):[],[{provide:N_,useFactory:zg},{provide:h.tb,multi:!0,useExisting:N_}]]}}static forChild(t){return{ngModule:n,providers:[M_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(O0,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[R]}),n})();function uC(n){return"guarded"}function Ft(n){return["disabled"===n.initialNavigation?eh(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(dr);return()=>{e.setUpLocationChangeListener()}}},{provide:M0,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?eh(2,[{provide:M0,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(B,Promise.resolve(null));let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(dr),p=e.get(x_);(function i(u){e.get(dr).events.pipe(b(p=>p instanceof $i||p instanceof Hd||p instanceof wf),(0,ot.U)(p=>p instanceof $i||p instanceof Hd&&(0===p.code||1===p.code)&&null),b(p=>null!==p),pn(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||p.closed?st(void 0):p),c.initialNavigation()}))}}]).\u0275providers:[]]}const N_=new h.OlP("");let L0=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),al=(()=>{class n extends L0{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ia=new h.OlP("NgValueAccessor"),dC={provide:ia,useExisting:(0,h.Gpc)(()=>Of),multi:!0},B0=new h.OlP("CompositionEventMode");let Of=(()=>{class n extends L0{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function BM(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(B0,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([dC]),h.qOj]}),n})();function ul(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Wg(n){return null!=n&&"number"==typeof n.length}const Lr=new h.OlP("NgValidators"),ll=new h.OlP("NgAsyncValidators"),jM=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Rc{static min(e){return function hC(n){return e=>{if(ul(e.value)||ul(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function j0(n){return e=>{if(ul(e.value)||ul(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return R_(e)}static requiredTrue(e){return function fC(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function $0(n){return ul(n.value)||jM.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Oc(n){return e=>ul(e.value)||!Wg(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function H0(n){return e=>Wg(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function O_(n){if(!n)return Pc;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ul(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return Z0(e)}static composeAsync(e){return K0(e)}}function R_(n){return ul(n.value)?{required:!0}:null}function Pc(n){return null}function G0(n){return null!=n}function P_(n){return(0,h.QGY)(n)?(0,un.D)(n):n}function z0(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function q0(n,e){return e.map(t=>t(n))}function W0(n){return n.map(e=>function pC(n){return!n.validate}(e)?e:t=>e.validate(t))}function Z0(n){if(!n)return null;const e=n.filter(G0);return 0==e.length?null:function(t){return z0(q0(t,e))}}function Zg(n){return null!=n?Z0(W0(n)):null}function K0(n){if(!n)return null;const e=n.filter(G0);return 0==e.length?null:function(t){return function cC(...n){const e=(0,Ci.jO)(n),{args:t,keys:r}=qa(n),i=new kr.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let _=c,I=c;for(let T=0;T<c;T++){let M=!1;(0,Rs.Xf)(t[T]).subscribe((0,Jn.x)(u,L=>{M||(M=!0,I--),p[T]=L},()=>_--,void 0,()=>{(!_||!M)&&(I||u.next(r?zo(r,p):p),u.complete())}))}});return e?i.pipe(Za(e)):i}(q0(t,e).map(P_)).pipe((0,ot.U)(z0))}}function Kg(n){return null!=n?K0(W0(n)):null}function k_(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Yg(n){return n._rawValidators}function gC(n){return n._rawAsyncValidators}function Pf(n){return n?Array.isArray(n)?n:[n]:[]}function Qg(n,e){return Array.isArray(n)?n.includes(e):n===e}function mC(n,e){const t=Pf(e);return Pf(n).forEach(i=>{Qg(t,i)||t.push(i)}),t}function kc(n,e){return Pf(e).filter(t=>!Qg(n,t))}class F_{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Zg(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Kg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class li extends F_{get formDirective(){return null}get path(){return null}}class yo extends F_{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Vs{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Jg=(()=>{class n extends Vs{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(yo,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),sa=(()=>{class n extends Vs{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(li,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const Lf="VALID",B_="INVALID",Fc="PENDING",th="DISABLED";function j_(n){return($_(n)?n.validators:n)||null}function Xg(n){return Array.isArray(n)?Zg(n):n||null}function iE(n,e){return($_(e)?e.asyncValidators:n)||null}function EC(n){return Array.isArray(n)?Kg(n):n||null}function $_(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function IC(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")}function DC(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new h.vHH(1002,"")})}class H_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Xg(this._rawValidators),this._composedAsyncValidatorFn=EC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Lf}get invalid(){return this.status===B_}get pending(){return this.status==Fc}get disabled(){return this.status===th}get enabled(){return this.status!==th}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Xg(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=EC(e)}addValidators(e){this.setValidators(mC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(mC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kc(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kc(e,this._rawAsyncValidators))}hasValidator(e){return Qg(this._rawValidators,e)}hasAsyncValidator(e){return Qg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Fc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=th,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Lf,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Lf||this.status===Fc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?th:Lf}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Fc,this._hasOwnPendingAsyncValidator=!0;const t=P_(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?th:this.errors?B_:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fc)?Fc:this._anyControlsHaveStatus(B_)?B_:Lf}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){$_(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class em extends H_{constructor(e,t,r){super(j_(t),iE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){DC(this,0,e),Object.keys(e).forEach(r=>{IC(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class bC extends em{}function Vf(n,e){Bf(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function cl(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&aE(n,e)})}(n,e),function CC(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function oE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&aE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function sE(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Uf(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),tm(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function rh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Bf(n,e){const t=Yg(n);null!==e.validator?n.setValidators(k_(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=gC(n);null!==e.asyncValidator?n.setAsyncValidators(k_(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();rh(e._rawValidators,i),rh(e._rawAsyncValidators,i)}function tm(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=Yg(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=gC(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return rh(e._rawValidators,r),rh(e._rawAsyncValidators,r),t}function aE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function sm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function cE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const om=class extends H_{constructor(e=null,t,r){super(j_(t),iE(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),$_(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=cE(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){sm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){sm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){cE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let W_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),yE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();const um=new h.OlP("NgModelWithFormControlWarning"),K_={provide:li,useExisting:(0,h.Gpc)(()=>lm)};let lm=(()=>{class n extends li{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new h.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(tm(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Vf(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Uf(t.control||null,t,!1),function lE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function ih(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(Uf(r||null,t),(n=>n instanceof om)(i)&&(Vf(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function G_(n,e){Bf(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function TC(n,e){return tm(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Bf(this.form,this),this._oldForm&&tm(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Lr,10),h.Y36(ll,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([K_]),h.qOj,h.TTD]}),n})();const FC={provide:yo,useExisting:(0,h.Gpc)(()=>jf)};let jf=(()=>{class n extends yo{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new h.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function z_(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Of?t=u:function rm(n){return Object.getPrototypeOf(n.constructor)===al}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function dl(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function nh(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(h.Y36(li,13),h.Y36(Lr,10),h.Y36(ll,10),h.Y36(ia,10),h.Y36(um,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[h._Bn([FC]),h.qOj,h.TTD]}),n})();const LC={provide:ia,useExisting:(0,h.Gpc)(()=>sh),multi:!0};function DE(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let sh=(()=>{class n extends al{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const i=DE(this._getOptionId(t),t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function cm(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([LC]),h.qOj]}),n})(),bE=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(DE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36(sh,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const Q_={provide:ia,useExisting:(0,h.Gpc)(()=>$f),multi:!0};function J_(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let $f=(()=>{class n extends al{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const i=t.map(u=>this._getOptionId(u));r=(u,c)=>{u._setSelected(i.indexOf(c.toString())>-1)}}else r=(i,u)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const i=[],u=r.selectedOptions;if(void 0!==u){const c=u;for(let p=0;p<c.length;p++){const I=this._getOptionValue(c[p].value);i.push(I)}}else{const c=r.options;for(let p=0;p<c.length;p++){const _=c[p];if(_.selected){const I=this._getOptionValue(_.value);i.push(I)}}}this.value=i,t(i)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function WM(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&h.NdJ("change",function(u){return r.onChange(u.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[h._Bn([Q_]),h.qOj]}),n})(),VC=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(J_(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(J_(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.SBq),h.Y36(h.Qsj),h.Y36($f,9))},n.\u0275dir=h.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),hl=(()=>{class n{constructor(){this._validator=Pc}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Pc,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,features:[h.TTD]}),n})();const hm={provide:Lr,useExisting:(0,h.Gpc)(()=>fm),multi:!0};let fm=(()=>{class n extends hl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=h.D6c,this.createValidator=t=>R_}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&h.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[h._Bn([hm]),h.qOj]}),n})(),AE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[yE]}),n})(),ME=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[AE]}),n})(),zf=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:um,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[AE]}),n})();class xE extends H_{constructor(e,t,r){super(j_(t),iE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){DC(this,0,e),e.forEach((r,i)=>{IC(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function RE(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let GC=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let u={};return RE(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new em(i,u)}record(t,r=null){const i=this._reduceControls(t);return new bC(i,r)}control(t,r,i){let u={};return this.useNonNullable?(RE(r)?u=r:(u.validators=r,u.asyncValidators=i),new om(t,{...u,nonNullable:!0})):new om(t,r,i)}array(t,r,i){const u=t.map(c=>this._createControl(c));return new xE(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof om||t instanceof H_?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:zf}),n})(),zC=(()=>{class n extends GC{group(t,r=null){return super.group(t,r)}control(t,r,i){return super.control(t,r,i)}array(t,r,i){return super.array(t,r,i)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:zf}),n})();var gm=k(4986),zn=k(5813);function OE(){return(0,br.e)((n,e)=>{let t,r=!1;n.subscribe((0,Jn.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function qC(n,e){return n===e}var Ke,vo=k(2011),WC=(k(2274),k(3942)),me=k(5861),wo=k(9681),Cr=k(4859),Hi=k(1877),Bt=k(2090),Bs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Eo={},fl=fl||{},Ct=Bs||self;function lu(){}function pl(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function oa(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var gl="closure_uid_"+(1e9*Math.random()>>>0),uh=0;function kE(n,e,t){return n.call.apply(n.bind,arguments)}function FE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Vr(n,e,t){return(Vr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kE:FE).apply(null,arguments)}function Wf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ur(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function cu(){this.s=this.s,this.o=this.o}var VE={};cu.prototype.s=!1,cu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function ah(n){return Object.prototype.hasOwnProperty.call(n,gl)&&n[gl]||(n[gl]=++uh)}(this);delete VE[n]}},cu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const tv=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},UE=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in i&&e.call(t,i[u],u,n)};function nv(n){return Array.prototype.concat.apply([],arguments)}function rv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function mm(n){return/^[\s\xa0]*$/.test(n)}var Br,ym=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Xr(n,e){return-1!=n.indexOf(e)}function iv(n,e){return n<e?-1:n>e?1:0}e:{var Zf=Ct.navigator;if(Zf){var _m=Zf.userAgent;if(_m){Br=_m;break e}}Br=""}function sv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Kf(n){const e={};for(const t in n)e[t]=n[t];return e}var Yf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ov(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<Yf.length;u++)t=Yf[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function vm(n){return vm[" "](n),n}vm[" "]=lu;var Qf,n,BE=Xr(Br,"Opera"),Bc=Xr(Br,"Trident")||Xr(Br,"MSIE"),wm=Xr(Br,"Edge"),Em=wm||Bc,jE=Xr(Br,"Gecko")&&!(Xr(Br.toLowerCase(),"webkit")&&!Xr(Br,"Edge"))&&!(Xr(Br,"Trident")||Xr(Br,"MSIE"))&&!Xr(Br,"Edge"),$E=Xr(Br.toLowerCase(),"webkit")&&!Xr(Br,"Edge");function uv(){var n=Ct.document;return n?n.documentMode:void 0}e:{var Im="",lv=(n=Br,jE?/rv:([^\);]+)(\)|;)/.exec(n):wm?/Edge\/([\d\.]+)/.exec(n):Bc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):$E?/WebKit\/(\S+)/.exec(n):BE?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(lv&&(Im=lv?lv[1]:""),Bc){var cv=uv();if(null!=cv&&cv>parseFloat(Im)){Qf=String(cv);break e}}Qf=Im}var KC={};var GE=Ct.document&&Bc&&(uv()||parseInt(Qf,10))||void 0,zE=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",lu,e),Ct.removeEventListener("test",lu,e)}catch{}return n}();function ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function lh(n,e){if(ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(jE){e:{try{vm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:qE[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&lh.Z.h.call(this)}}ei.prototype.h=function(){this.defaultPrevented=!0},Ur(lh,ei);var qE={2:"touch",3:"pen",4:"mouse"};lh.prototype.h=function(){lh.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ch="closure_listenable_"+(1e6*Math.random()|0),WE=0;function ex(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++WE,this.ca=this.fa=!1}function Dm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function bm(n){this.src=n,this.g={},this.h=0}function Cm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=tv(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Dm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function hv(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return i}return-1}bm.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=hv(n,e,r,i);return-1<c?(e=n[c],t||(e.fa=!1)):((e=new ex(e,this.src,u,!!r,i)).fa=t,n.push(e)),e};var hr="closure_lm_"+(1e6*Math.random()|0),Tm={};function ZE(n,e,t,r,i){if(r&&r.once)return QE(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)ZE(n,e[u],t,r,i);return null}return t=gv(t),n&&n[ch]?n.N(e,t,oa(r)?!!r.capture:!!r,i):KE(n,e,t,!1,r,i)}function KE(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=oa(i)?!!i.capture:!!i,p=pv(n);if(p||(n[hr]=p=new bm(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function YE(){var e=YC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)zE||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(jc(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function QE(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)QE(n,e[u],t,r,i);return null}return t=gv(t),n&&n[ch]?n.O(e,t,oa(r)?!!r.capture:!!r,i):KE(n,e,t,!0,r,i)}function fv(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)fv(n,e[u],t,r,i);else r=oa(r)?!!r.capture:!!r,t=gv(t),n&&n[ch]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=hv(u=n.g[e],t,r,i))&&(Dm(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=pv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hv(e,t,r,i)),(t=-1<n?e[n]:null)&&Sm(t))}function Sm(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[ch])Cm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(jc(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=pv(e))?(Cm(t,n),0==t.h&&(t.src=null,e[hr]=null)):Dm(n)}}}function jc(n){return n in Tm?Tm[n]:Tm[n]="on"+n}function YC(n,e){if(n.ca)n=!0;else{e=new lh(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Sm(n),n=t.call(r,e)}return n}function pv(n){return(n=n[hr])instanceof bm?n:null}var Am="__closure_events_fn_"+(1e9*Math.random()>>>0);function gv(n){return"function"==typeof n?n:(n[Am]||(n[Am]=function(e){return n.handleEvent(e)}),n[Am])}function Tr(){cu.call(this),this.i=new bm(this),this.P=this,this.I=null}function ci(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ei(e,n);else if(e instanceof ei)e.target=e.target||n;else{var i=e;ov(e=new ei(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=dh(c,r,!0,e)&&i}if(i=dh(c=e.g=n,r,!0,e)&&i,i=dh(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=dh(c=e.g=t[u],r,!1,e)&&i}function dh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ca&&c.capture==t){var p=c.listener,_=c.ia||c.src;c.fa&&Cm(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}Ur(Tr,cu),Tr.prototype[ch]=!0,Tr.prototype.removeEventListener=function(n,e,t,r){fv(this,n,e,t,r)},Tr.prototype.M=function(){if(Tr.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Dm(t[r]);delete n.g[e],n.h--}}this.I=null},Tr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Tr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Xf=Ct.JSON.stringify;function aa(){var n=XE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Mm,mv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new ua,n=>n.reset());class ua{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Io(n){Ct.setTimeout(()=>{throw n},0)}function cs(n,e){Mm||function JE(){var n=Ct.Promise.resolve(void 0);Mm=function(){n.then(JC)}}(),yv||(Mm(),yv=!0),XE.add(n,e)}var yv=!1,XE=new class QC{constructor(){this.h=this.g=null}add(e,t){const r=mv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function JC(){for(var n;n=aa();){try{n.h.call(n.g)}catch(t){Io(t)}var e=mv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}yv=!1}function xm(n,e){Tr.call(this),this.h=n||1,this.g=e||Ct,this.j=Vr(this.kb,this),this.l=Date.now()}function ep(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function $c(n,e,t){if("function"==typeof n)t&&(n=Vr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Vr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function eI(n){n.g=$c(()=>{n.g=null,n.i&&(n.i=!1,eI(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ur(xm,Tr),(Ke=xm.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),ci(this,"tick"),this.da&&(ep(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){xm.Z.M.call(this),ep(this),delete this.g};class tI extends cu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:eI(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tp(n){cu.call(this),this.h=n,this.g={}}Ur(tp,cu);var _v=[];function vv(n,e,t,r){Array.isArray(t)||(t&&(_v[0]=t.toString()),t=_v);for(var i=0;i<t.length;i++){var u=ZE(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function np(n){sv(n.g,function(e,t){this.g.hasOwnProperty(t)&&Sm(e)},n),n.g={}}function Nm(){this.g=!0}function Hc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function iI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Xf(t)}catch{return e}}(n,t)+(r?" "+r:"")})}tp.prototype.M=function(){tp.Z.M.call(this),np(this)},tp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nm.prototype.Aa=function(){this.g=!1},Nm.prototype.info=function(){};var ml={},wv=null;function rp(){return wv=wv||new Tr}function Ev(n){ei.call(this,ml.Ma,n)}function hh(n){const e=rp();ci(e,new Ev(e,n))}function Iv(n,e){ei.call(this,ml.STAT_EVENT,n),this.stat=e}function di(n){const e=rp();ci(e,new Iv(e,n))}function sI(n,e){ei.call(this,ml.Na,n),this.size=e}function ip(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}ml.Ma="serverreachability",Ur(Ev,ei),ml.STAT_EVENT="statevent",Ur(Iv,ei),ml.Na="timingevent",Ur(sI,ei);var Om={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},oI={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Dv(){}function uI(){}Dv.prototype.h=null;var Tv,sp={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function bv(){ei.call(this,"d")}function Cv(){ei.call(this,"c")}function Pm(){}function op(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new tp(this),this.P=XC,this.W=new xm(n=Em?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new lI}function lI(){this.i=null,this.g="",this.h=!1}Ur(bv,ei),Ur(Cv,ei),Ur(Pm,Dv),Pm.prototype.g=function(){return new XMLHttpRequest},Pm.prototype.i=function(){return{}},Tv=new Pm;var XC=45e3,Sv={},km={};function Av(n,e,t){n.K=1,n.v=Lm(la(e)),n.s=t,n.U=!0,Mv(n,null)}function Mv(n,e){n.F=Date.now(),fh(n),n.A=la(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),mI(t.h,"t",r),n.C=0,t=n.l.H,n.h=new lI,n.g=AI(n.l,t?e:null,!n.s),0<n.O&&(n.L=new tI(Vr(n.Ia,n,n.g),n.O)),vv(n.V,n.g,"readystatechange",n.gb),e=n.H?Kf(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),hh(1),function nI(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),_=0;_<p.length;_++){var I=p[_].split("=");if(1<I.length){var T=I[0];I=I[1];var M=T.split("_");c=2<=M.length&&"type"==M[1]?c+(T+"=")+I+"&":c+(T+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function xv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function Nv(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=cI(n,t),i==km){4==e&&(n.o=4,di(14),r=!1),Hc(n.j,n.m,null,"[Incomplete Response]");break}if(i==Sv){n.o=4,di(15),Hc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Hc(n.j,n.m,i,null),Fm(n,i)}xv(n)&&i!=km&&i!=Sv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,di(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),qm(e),e.L=!0,di(11))):(Hc(n.j,n.m,t,"[Invalid Chunked Response]"),yl(n),ph(n))}function cI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?km:(t=Number(e.substring(t,r)),isNaN(t)?Sv:(r+=1)+t>e.length?km:(e=e.substr(r,t),n.C=r+t,e))}function fh(n){n.Y=Date.now()+n.P,Rv(n,n.P)}function Rv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ip(Vr(n.eb,n),e)}function ap(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function ph(n){0==n.l.G||n.I||TI(n.l,n)}function yl(n){ap(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ep(n.W),np(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Vm(t.i,n)))if(t.I=n.N,!n.J&&Vm(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Wm(t),Hm(t)}zm(t),di(18)}}else t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=ip(Vr(t.ab,t),6e3));if(1>=Vv(t.i)&&t.ka){try{t.ka()}catch{}t.ka=void 0}}else zc(t,11)}else if((n.J||t.g==n)&&Wm(t),!mm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let I=i[e];if(t.U=I[0],I=I[1],2==t.G)if("c"==I[0]){t.J=I[1],t.la=I[2];const T=I[3];null!=T&&(t.ma=T,t.h.info("VER="+t.ma));const M=I[4];null!=M&&(t.za=M,t.h.info("SVER="+t.za));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const K=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(K){var u=r.i;!u.g&&(Xr(K,"spdy")||Xr(K,"quic")||Xr(K,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(Um(u,u.h),u.h=null))}if(r.D){const ue=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;ue&&(r.sa=ue,Fn(r.F,r.D,ue))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var c=n;if((r=t).oa=SI(r,r.H?r.la:null,r.W),c.J){_I(r.i,c);var p=c,_=r.K;_&&p.setTimeout(_),p.B&&(ap(p),fh(p)),r.g=c}else bI(r);0<t.l.length&&mp(t)}else"stop"!=I[0]&&"close"!=I[0]||zc(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?zc(t,7):wl(t):"noop"!=I[0]&&t.j&&t.j.wa(I),t.A=0)}hh(4)}catch{}}function du(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(pl(n)||"string"==typeof n)UE(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(pl(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function Ov(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(pl(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}}function gh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof gh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Pv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];js(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)js(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function js(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=op.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==fu(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const T=fu(this.g);var e=this.g.Da();const M=this.g.ba();if(!(3>T)&&(3!=T||Em||this.g&&(this.h.h||this.g.ga()||II(this.g)))){this.I||4!=T||7==e||hh(8==e||0>=M?3:2),ap(this);var t=this.g.ba();this.N=t;t:if(xv(this)){var r=II(this.g);n="";var i=r.length,u=4==fu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){yl(this),ph(this);var c="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==t,function rI(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.X,T,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mm(p)){var I=p;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,di(12),yl(this),ph(this);break e}Hc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fm(this,t)}this.U?(Nv(this,T,c),Em&&this.i&&3==T&&(vv(this.V,this.W,"tick",this.fb),this.W.start())):(Hc(this.j,this.m,c,null),Fm(this,c)),4==T&&yl(this),this.i&&!this.I&&(4==T?TI(this.l,this):(this.i=!1,fh(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,di(12)):(this.o=0,di(13)),yl(this),ph(this)}}}catch{}},Ke.fb=function(){if(this.g){var n=fu(this.g),e=this.g.ga();this.C<e.length&&(ap(this),Nv(this,n,e),this.i&&4!=n&&fh(this))}},Ke.cancel=function(){this.I=!0,yl(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Rm(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(hh(3),di(17)),yl(this),this.o=2,ph(this)):Rv(this,this.Y-n)},(Ke=gh.prototype).R=function(){Pv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return Pv(this),this.g.concat()},Ke.get=function(n,e){return js(this.h,n)?this.h[n]:e},Ke.set=function(n,e){js(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],u=this.get(i);n.call(e,u,i,this)}};var eT=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mh(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof mh){this.g=void 0!==e?e:n.g,up(this,n.j),this.s=n.s,Fv(this,n.i),yt(this,n.m),this.l=n.l,e=n.h;var t=new _h;t.i=e.i,e.g&&(t.g=new gh(e.g),t.h=e.h),dI(this,t),this.o=n.o}else n&&(t=String(n).match(eT))?(this.g=!!e,up(this,t[1]||"",!0),this.s=_l(t[2]||""),Fv(this,t[3]||"",!0),yt(this,t[4]),this.l=_l(t[5]||"",!0),dI(this,t[6]||"",!0),this.o=_l(t[7]||"")):(this.g=!!e,this.h=new _h(null,this.g))}function la(n){return new mh(n)}function up(n,e,t){n.j=t?_l(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Fv(n,e,t){n.i=t?_l(e,!0):e}function yt(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function dI(n,e,t){e instanceof _h?(n.h=e,function lp(n,e){e&&!n.j&&(hu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Lv(this,r),mI(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=vl(e,rT)),n.h=new _h(e,n.g))}function Fn(n,e,t){n.h.set(e,t)}function Lm(n){return Fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function _l(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function vl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,er),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function er(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}mh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(vl(e,nT,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(vl(e,nT,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(vl(t,"/"==t.charAt(0)?fI:hI,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",vl(t,pI)),n.join("")};var nT=/[#\/\?@]/g,hI=/[#\?:]/g,fI=/[#\?]/g,rT=/[#\?@]/g,pI=/#/g;function _h(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function hu(n){n.g||(n.g=new gh,n.h=0,n.i&&function kv(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Lv(n,e){hu(n),e=vh(n,e),js(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,js((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Pv(n)))}function gI(n,e){return hu(n),e=vh(n,e),js(n.g.h,e)}function mI(n,e,t){Lv(n,e),0<t.length&&(n.i=null,n.g.set(vh(n,e),rv(t)),n.h+=t.length)}function vh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function yI(n){this.l=n||sT,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ea&&Ct.g.Ea()&&Ct.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=_h.prototype).add=function(n,e){hu(this),this.i=null,n=vh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){hu(this),this.g.forEach(function(t,r){UE(t,function(i){n.call(e,i,r,this)},this)},this)},Ke.T=function(){hu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],u=0;u<i.length;u++)t.push(e[r]);return t},Ke.R=function(n){hu(this);var e=[];if("string"==typeof n)gI(this,n)&&(e=nv(e,this.g.get(vh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=nv(e,n[t])}return e},Ke.set=function(n,e){return hu(this),this.i=null,gI(this,n=vh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var c=i;""!==r[u]&&(c+="="+encodeURIComponent(String(r[u]))),n.push(c)}}return this.i=n.join("&")};var sT=10;function cp(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Vv(n){return n.h?1:n.g?n.g.size:0}function Vm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Um(n,e){n.g?n.g.add(e):n.h=e}function _I(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function wh(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return rv(n.i)}function Gc(){}function oT(){this.g=new Gc}function aT(n,e,t){const r=t||"";try{du(n,function(i,u){let c=i;oa(i)&&(c=Xf(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function dp(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Eh(n){this.l=n.$b||null,this.j=n.ib||!1}function hp(n,e){Tr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Uv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yI.prototype.cancel=function(){if(this.i=wh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Gc.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},Gc.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},Ur(Eh,Dv),Eh.prototype.g=function(){return new hp(this.l,this.j)},Eh.prototype.i=function(n){return function(){return n}}({}),Ur(hp,Tr);var Uv=0;function Bv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function fp(n){n.readyState=4,n.l=null,n.j=null,n.A=null,pp(n)}function pp(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=hp.prototype).open=function(n,e){if(this.readyState!=Uv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,pp(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fp(this)),this.readyState=Uv},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,pp(this)),this.g&&(this.readyState=3,pp(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof Ct.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Bv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?fp(this):pp(this),3==this.readyState&&Bv(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,fp(this))},Ke.Ta=function(n){this.g&&(this.response=n,fp(this))},Ke.ha=function(){this.g&&fp(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(hp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tx=Ct.JSON.parse;function Sr(n){Tr.call(this),this.headers=new gh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lT,this.K=this.L=!1}Ur(Sr,Tr);var lT="",nx=/^https?$/i,vI=["POST","PUT"];function cT(n){return"content-type"==n.toLowerCase()}function wI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,jv(n),jm(n)}function jv(n){n.D||(n.D=!0,ci(n,"complete"),ci(n,"error"))}function Ih(n){if(n.h&&typeof fl<"u"&&(!n.C[1]||4!=fu(n)||2!=n.ba()))if(n.v&&4==fu(n))$c(n.Fa,0,n);else if(ci(n,"readystatechange"),4==fu(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(eT)[1]||null;if(!i&&Ct.self&&Ct.self.location){var u=Ct.self.location.protocol;i=u.substr(0,u.length-1)}r=!nx.test(i?i.toLowerCase():"")}t=r}if(t)ci(n,"complete"),ci(n,"success");else{n.m=6;try{var c=2<fu(n)?n.g.statusText:""}catch{c=""}n.j=c+" ["+n.ba()+"]",jv(n)}}finally{jm(n)}}}function jm(n,e){if(n.g){EI(n);const t=n.g,r=n.C[0]?lu:null;n.g=null,n.C=null,e||ci(n,"ready");try{t.onreadystatechange=r}catch{}}}function EI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function fu(n){return n.g?n.g.readyState:0}function II(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case lT:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function $m(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function dT(n){let e="";return sv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Fn(n,e,t))}function gp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function DI(n){this.za=0,this.l=[],this.h=new Nm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=gp("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=gp("baseRetryDelayMs",5e3,n),this.$a=gp("retryDelaySeedMs",1e4,n),this.Ya=gp("forwardChannelMaxRetries",2,n),this.ra=gp("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new yI(n&&n.concurrentRequestLimit),this.Ca=new oT,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function wl(n){if($v(n),3==n.G){var e=n.V++,t=la(n.F);Fn(t,"SID",n.J),Fn(t,"RID",e),Fn(t,"TYPE","terminate"),yp(n,t),(e=new op(n,n.h,e,void 0)).K=2,e.v=Lm(la(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=AI(e.l,null),e.g.ea(e.v)),e.F=Date.now(),fh(e)}zv(n)}function Hm(n){n.g&&(qm(n),n.g.cancel(),n.g=null)}function $v(n){Hm(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),Wm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function Hv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&mp(n)}function mp(n){cp(n.i)||n.m||(n.m=!0,cs(n.Ha,n),n.C=0)}function Gv(n,e){var t;t=e?e.m:n.V++;const r=la(n.F);Fn(r,"SID",n.J),Fn(r,"RID",t),Fn(r,"AID",n.U),yp(n,r),n.o&&n.s&&$m(r,n.o,n.s),t=new op(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Gm(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Um(n.i,t),Av(t,r,e)}function yp(n,e){n.j&&du({},function(t,r){Fn(e,r,t)})}function Gm(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Vr(n.j.Oa,n.j,n):null;e:{var i=n.l;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let I=i[_].h;const T=i[_].g;if(I-=u,0>I)u=Math.max(0,i[_].h-100),p=!1;else try{aT(T,c,"req"+I+"_")}catch{r&&r(T)}}if(p){r=c.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function bI(n){n.g||n.u||(n.Y=1,cs(n.Ga,n),n.A=0)}function zm(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ip(Vr(n.Ga,n),Zm(n,n.A)),n.A++,0))}function qm(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function CI(n){n.g=new op(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=la(n.oa);Fn(e,"RID","rpc"),Fn(e,"SID",n.J),Fn(e,"CI",n.N?"0":"1"),Fn(e,"AID",n.U),yp(n,e),Fn(e,"TYPE","xmlhttp"),n.o&&n.s&&$m(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Lm(la(e)),t.s=null,t.U=!0,Mv(t,n)}function Wm(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function TI(n,e){var t=null;if(n.g==e){Wm(n),qm(n),n.g=null;var r=2}else{if(!Vm(n.i,e))return;t=e.D,_I(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;ci(r=rp(),new sI(r,t,e,i)),mp(n)}else bI(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function hT(n,e){return!(Vv(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ip(Vr(n.Ha,n,e),Zm(n,n.C)),n.C++,0)))}(n,e)||2==r&&zm(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:zc(n,5);break;case 4:zc(n,10);break;case 3:zc(n,6);break;default:zc(n,2)}}function Zm(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function zc(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Vr(n.jb,n);t||(t=new mh("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||up(t,"https"),Lm(t)),function uT(n,e){const t=new Nm;if(Ct.Image){const r=new Image;r.onload=Wf(dp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Wf(dp,t,r,"TestLoadImage: error",!1,e),r.onabort=Wf(dp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Wf(dp,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else di(2);n.G=0,n.j&&n.j.va(e),zv(n),$v(n)}function zv(n){n.G=0,n.I=-1,n.j&&((0!=wh(n.i).length||0!=n.l.length)&&(n.i.i.length=0,rv(n.l),n.l.length=0),n.j.ua())}function SI(n,e,t){let r=function yh(n){return n instanceof mh?la(n):new mh(n,void 0)}(t);if(""!=r.i)e&&Fv(r,e+"."+r.i),yt(r,r.m);else{const i=Ct.location;r=function tT(n,e,t,r){var i=new mh(null,void 0);return n&&up(i,n),e&&Fv(i,e),t&&yt(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&sv(n.aa,function(i,u){Fn(r,u,i)}),t=n.sa,(e=n.D)&&t&&Fn(r,e,t),Fn(r,"VER",n.ma),yp(n,r),r}function AI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Sr(t&&n.Ba&&!n.qa?new Eh({ib:!0}):n.qa)).L=n.H,e}function MI(){}function Km(){if(Bc&&!(10<=Number(GE)))throw Error("Environmental error: no available transport.")}function ds(n,e){Tr.call(this),this.g=new DI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!mm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Dh(this)}function xI(n){bv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function NI(){Cv.call(this),this.status=1}function Dh(n){this.g=n}(Ke=Sr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Tv.g(),this.C=function aI(n){return n.h||(n.h=n.i())}(this.u?this.u:Tv),this.g.onreadystatechange=Vr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void wI(this,u)}n=t||"";const i=new gh(this.headers);r&&du(r,function(u,c){i.set(c,u)}),r=function ZC(n){e:{var e=cT;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Ct.FormData&&n instanceof Ct.FormData,!(0<=tv(vI,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(u,c){this.g.setRequestHeader(c,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{EI(this),0<this.B&&((this.K=function Bm(n){return Bc&&function HE(){return function av(n){var e=KC;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=ym(String(Qf)).split("."),t=ym("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=iv(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||iv(0==i[2].length,0==u[2].length)||iv(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vr(this.pa,this)):this.A=$c(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){wI(this,u)}},Ke.pa=function(){typeof fl<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ci(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ci(this,"complete"),ci(this,"abort"),jm(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),jm(this,!0)),Sr.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?Ih(this):this.cb())},Ke.cb=function(){Ih(this)},Ke.ba=function(){try{return 2<fu(this)?this.g.status:-1}catch{return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),tx(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=DI.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new op(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=Kf(u),ov(u,this.P)):u=this.P),null===this.o&&(i.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Gm(this,i,e),Fn(t=la(this.F),"RID",n),Fn(t,"CVER",22),this.D&&Fn(t,"X-HTTP-Session-Id",this.D),yp(this,t),this.o&&u&&$m(t,this.o,u),Um(this.i,i),this.Ra&&Fn(t,"TYPE","init"),this.ja?(Fn(t,"$req",e),Fn(t,"SID","null"),i.$=!0,Av(i,t,null)):Av(i,t,e),this.G=2}}else 3==this.G&&(n?Gv(this,n):0==this.l.length||cp(this.i)||Gv(this))},Ke.Ga=function(){if(this.u=null,CI(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ip(Vr(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,di(10),Hm(this),CI(this))},Ke.ab=function(){null!=this.v&&(this.v=null,Hm(this),zm(this),di(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),di(2)):(this.h.info("Failed to ping google.com"),di(1))},(Ke=MI.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},Km.prototype.g=function(n,e){return new ds(n,e)},Ur(ds,Tr),ds.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),cs(Vr(n.hb,n,e))),di(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=SI(n,null,n.W),mp(n)},ds.prototype.close=function(){wl(this.g)},ds.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Hv(this.g,e)}else this.v?((e={}).__data__=Xf(n),Hv(this.g,e)):Hv(this.g,n)},ds.prototype.M=function(){this.g.j=null,delete this.j,wl(this.g),delete this.g,ds.Z.M.call(this)},Ur(xI,bv),Ur(NI,Cv),Ur(Dh,MI),Dh.prototype.xa=function(){ci(this.g,"a")},Dh.prototype.wa=function(n){ci(this.g,new xI(n))},Dh.prototype.va=function(n){ci(this.g,new NI(n))},Dh.prototype.ua=function(){ci(this.g,"b")},Km.prototype.createWebChannel=Km.prototype.g,ds.prototype.send=ds.prototype.u,ds.prototype.open=ds.prototype.m,ds.prototype.close=ds.prototype.close,Om.NO_ERROR=0,Om.TIMEOUT=8,Om.HTTP_ERROR=6,oI.COMPLETE="complete",uI.EventType=sp,sp.OPEN="a",sp.CLOSE="b",sp.ERROR="c",sp.MESSAGE="d",Tr.prototype.listen=Tr.prototype.N,Sr.prototype.listenOnce=Sr.prototype.O,Sr.prototype.getLastError=Sr.prototype.La,Sr.prototype.getLastErrorCode=Sr.prototype.Da,Sr.prototype.getStatus=Sr.prototype.ba,Sr.prototype.getResponseJson=Sr.prototype.Qa,Sr.prototype.getResponseText=Sr.prototype.ga,Sr.prototype.send=Sr.prototype.ea;var RI=Eo.createWebChannelTransport=function(){return new Km},OI=Eo.getStatEventTarget=function(){return rp()},qv=Eo.ErrorCode=Om,fT=Eo.EventType=oI,PI=Eo.Event=ml,kI=Eo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},pT=Eo.FetchXmlHttpFactory=Eh,Ym=Eo.WebChannel=uI,Wv=Eo.XhrIo=Sr;const Qm="@firebase/firestore";class Ar{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");let El="9.9.4";const Il=new Hi.Yd("@firebase/firestore");function Zv(){return Il.logLevel}function ke(n,...e){if(Il.logLevel<=Hi.in.DEBUG){const t=e.map(Jm);Il.debug(`Firestore (${El}): ${n}`,...t)}}function tr(n,...e){if(Il.logLevel<=Hi.in.ERROR){const t=e.map(Jm);Il.error(`Firestore (${El}): ${n}`,...t)}}function $s(n,...e){if(Il.logLevel<=Hi.in.WARN){const t=e.map(Jm);Il.warn(`Firestore (${El}): ${n}`,...t)}}function Jm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function tt(n="Unexpected state"){const e=`FIRESTORE (${El}) INTERNAL ASSERTION FAILED: `+n;throw tr(e),new Error(e)}function Nt(n,e){n||tt()}function qe(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Bt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class jr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Yv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Qv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ar.UNAUTHENTICATED))}shutdown(){}}class LI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class VI{constructor(e){this.t=e,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve();let c=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new jr,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const I=c;e.enqueueRetryable((0,me.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new jr)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt("string"==typeof r.accessToken),new Yv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Nt(null===e||"string"==typeof e),new Ar(e)}}class UI{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Nt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class BI{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new UI(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gT{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,ke("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Nt("string"==typeof t.token),this.A=t.token,new jI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function mT(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Jv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mT(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Lt(n,e){return n<e?-1:n>e?1:0}function qc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $I(n){return n+"\0"}class Ln{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ln(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Lt(this.nanoseconds,e.nanoseconds):Lt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new Ln(0,0))}static max(){return new Mt(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Xm{constructor(e,t,r){void 0===t?t=0:t>e.length&&tt(),void 0===r?r=e.length-t:r>e.length-t&&tt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Xm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Xm{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const yT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nr extends Xm{construct(e,t,r){return new nr(e,t,r)}static isValidIdentifier(e){return yT.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new nr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new xe(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new xe(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new xe(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new xe(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nr(t)}static emptyPath(){return new nr([])}}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Jt.fromString(e))}static fromName(e){return new Ge(Jt.fromString(e).popFirst(5))}static empty(){return new Ge(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Jt(e.slice()))}}class ey{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Xv(n){return n.fields.find(e=>2===e.kind)}function Wc(n){return n.fields.filter(e=>2!==e.kind)}ey.UNKNOWN_ID=-1;class ty{constructor(e,t){this.fieldPath=e,this.kind=t}}class _p{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new _p(0,Gi.min())}}function HI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new Ln(t+1,0):new Ln(t,r));return new Gi(i,Ge.empty(),e)}function bh(n){return new Gi(n.readTime,n.key,-1)}class Gi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Gi(Mt.min(),Ge.empty(),-1)}static max(){return new Gi(Mt.max(),Ge.empty(),-1)}}function ny(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Lt(n.largestBatchId,e.largestBatchId))}const ew="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function pu(n){return nw.apply(this,arguments)}function nw(){return nw=(0,me.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==ew)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),nw.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&tt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const u=e.length,c=new Array(u);let p=0;for(let _=0;_<u;_++){const I=_;t(e[I]).next(T=>{c[I]=T,++p,p===u&&r(c)},T=>i(T))}})}static doWhile(e,t){return new oe((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class rw{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new jr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new vp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=wp(r.target.error);this.P.reject(new vp(e,i))}}static open(e,t,r,i){try{return new rw(t,e.transaction(i,r))}catch(u){throw new vp(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ET(t)}}class Do{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Do.D((0,Bt.z$)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),bo(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Bt.hl)())return!1;if(Do.N())return!0;const e=(0,Bt.z$)(),t=Do.D(e),r=0<t&&t<10,i=Do.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new vp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new xe(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new xe(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new vp(e,p))},u.onupgradeneeded=c=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,me.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const _=rw.open(u.db,e,c?"readonly":"readwrite",r),I=i(_).next(T=>(_.V(),T)).catch(T=>(_.abort(T),oe.reject(T))).toPromise();return I.catch(()=>{}),yield _.v,I}catch(_){const I=_,T="FirebaseError"!==I.name&&p<3;if(ke("SimpleDb","Transaction failed with error:",I.message,"Retrying:",T),u.close(),!T)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class wT{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return bo(this.U.delete())}}class vp extends xe{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dl(n){return"IndexedDbTransactionError"===n.name}class ET{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bo(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),bo(this.store.add(e))}get(e){return bo(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),bo(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),bo(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new oe((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,c,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=u=>{const c=wp(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}H(e,t){const r=[];return new oe((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new wT(p),I=t(p.primaryKey,p.value,_);if(I instanceof oe){const T=I.catch(M=>(_.done(),oe.reject(M)));r.push(T)}_.isDone?i():null===_.G?p.continue():p.continue(_.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bo(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=wp(r.target.error);t(i)}})}let GI=!1;function wp(n){const e=Do.D((0,Bt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return GI||(GI=!0,setTimeout(()=>{throw r},0)),r}}return n}class ca{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Dl(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield pu(r)}yield t.nt(1)}))}}class IT{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return oe.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return ke("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(p=>{i-=p,r.add(c)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,u)).next(p=>(ke("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=bh(u);ny(c,r)>0&&(r=c)}),new Gi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class hi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Ch(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function zI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}hi.at=-1;class rr{constructor(e,t){this.comparator=e,this.root=t||vr.EMPTY}insert(e,t){return new rr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vr.BLACK,null,null))}remove(e){return new rr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Kc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Kc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Kc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Kc(this.root,e,this.comparator,!0)}}class Kc{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vr{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??vr.RED,this.left=i??vr.EMPTY,this.right=u??vr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new vr(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return vr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return vr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw tt();const e=this.left.check();if(e!==this.right.check())throw tt();return e+(this.isRed()?0:1)}}vr.EMPTY=null,vr.RED=!0,vr.BLACK=!1,vr.EMPTY=new class{constructor(){this.size=0}get key(){throw tt()}get value(){throw tt()}get color(){throw tt()}get left(){throw tt()}get right(){throw tt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new vr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class gn{constructor(e){this.comparator=e,this.data=new rr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qI(this.data.getIterator())}getIteratorFrom(e){return new qI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof gn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gn(this.comparator);return t.data=e,t}}class qI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Yc(n){return n.hasNext()?n.getNext():void 0}class zi{constructor(e){this.fields=e,e.sort(nr.comparator)}static empty(){return new zi([])}unionWith(e){let t=new gn(nr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class wr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new wr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new wr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Lt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wr.EMPTY_BYTE_STRING=new wr("");const DT=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bl(n){if(Nt(!!n),"string"==typeof n){let e=0;const t=DT.exec(n);if(Nt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:fr(n.seconds),nanos:fr(n.nanos)}}function fr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function gu(n){return"string"==typeof n?wr.fromBase64String(n):wr.fromUint8Array(n)}function Ep(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function sw(n){const e=n.mapValue.fields.__previous_value__;return Ep(e)?sw(e):e}function Qc(n){const e=bl(n.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}class ow{constructor(e,t,r,i,u,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class Cl{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Cl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Cl&&e.projectId===this.projectId&&e.database===this.database}}function Ip(n){return null==n}function Dp(n){return 0===n&&1/n==-1/0}function WI(n){return"number"==typeof n&&Number.isInteger(n)&&!Dp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const mu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Th={nullValue:"NULL_VALUE"};function Tl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ep(n)?4:bT(n)?9007199254740991:10:tt()}function da(n,e){if(n===e)return!0;const t=Tl(n);if(t!==Tl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Qc(n).isEqual(Qc(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=bl(r.timestampValue),c=bl(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,gu(n.bytesValue).isEqual(gu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return fr(r.geoPointValue.latitude)===fr(i.geoPointValue.latitude)&&fr(r.geoPointValue.longitude)===fr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return fr(r.integerValue)===fr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=fr(r.doubleValue),c=fr(i.doubleValue);return u===c?Dp(u)===Dp(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return qc(n.arrayValue.values||[],e.arrayValue.values||[],da);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(Ch(u)!==Ch(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!da(u[p],c[p])))return!1;return!0}(n,e);default:return tt()}var i}function Sh(n,e){return void 0!==(n.values||[]).find(t=>da(t,e))}function yu(n,e){if(n===e)return 0;const t=Tl(n),r=Tl(e);if(t!==r)return Lt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Lt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=fr(i.integerValue||i.doubleValue),p=fr(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return ZI(n.timestampValue,e.timestampValue);case 4:return ZI(Qc(n),Qc(e));case 5:return Lt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=gu(i),p=gu(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let _=0;_<c.length&&_<p.length;_++){const I=Lt(c[_],p[_]);if(0!==I)return I}return Lt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Lt(fr(i.latitude),fr(u.latitude));return 0!==c?c:Lt(fr(i.longitude),fr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let _=0;_<c.length&&_<p.length;++_){const I=yu(c[_],p[_]);if(I)return I}return Lt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===mu.mapValue&&u===mu.mapValue)return 0;if(i===mu.mapValue)return 1;if(u===mu.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),_=u.fields||{},I=Object.keys(_);p.sort(),I.sort();for(let T=0;T<p.length&&T<I.length;++T){const M=Lt(p[T],I[T]);if(0!==M)return M;const L=yu(c[p[T]],_[I[T]]);if(0!==L)return L}return Lt(p.length,I.length)}(n.mapValue,e.mapValue);default:throw tt()}}function ZI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Lt(n,e);const t=bl(n),r=bl(e),i=Lt(t.seconds,r.seconds);return 0!==i?i:Lt(t.nanos,r.nanos)}function Jc(n){return ry(n)}function ry(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=bl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?gu(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=ry(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${ry(r.fields[p])}`;return u+"}"}(n.mapValue):tt();var e}function Xc(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function iy(n){return!!n&&"integerValue"in n}function bp(n){return!!n&&"arrayValue"in n}function fi(n){return!!n&&"nullValue"in n}function ed(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sy(n){return!!n&&"mapValue"in n}function Cp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Cp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Cp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function bT(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ix(n){return"nullValue"in n?Th:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Xc(Cl.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:tt()}function KI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Xc(Cl.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?mu:tt()}function aw(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ah(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cp(t)}setAll(e){let t=nr.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=Cp(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());sy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return da(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];sy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zc(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new ti(Cp(this.value))}}function oy(n){const e=[];return Zc(n.fields,(t,r)=>{const i=new nr([t]);if(sy(r)){const u=oy(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new zi(e)}class In{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new In(e,0,Mt.min(),Mt.min(),ti.empty(),0)}static newFoundDocument(e,t,r){return new In(e,1,t,Mt.min(),r,0)}static newNoDocument(e,t){return new In(e,2,t,Mt.min(),ti.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,Mt.min(),ti.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class YI{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.ht=null}}function QI(n,e=null,t=[],r=[],i=null,u=null,c=null){return new YI(n,e,t,r,i,u,c)}function td(n){const e=qe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Jc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ip(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Jc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Jc(r)).join(",")),e.ht=t}return e.ht}function nd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!AT(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!da(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nD(n.startAt,e.startAt)&&nD(n.endAt,e.endAt)}function Tp(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Sp(n,e){return n.filters.filter(t=>t instanceof pi&&t.field.isEqual(e))}function Ap(n,e,t){let r=Th,i=!0;for(const u of Sp(n,e)){let c=Th,p=!0;switch(u.op){case"<":case"<=":c=ix(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=Th}aw({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];aw({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function ay(n,e,t){let r=mu,i=!0;for(const u of Sp(n,e)){let c=mu,p=!0;switch(u.op){case">=":case">":c=KI(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=mu}Ah({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Ah({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class pi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new JI(e,t,r):"array-contains"===t?new ST(e,r):"in"===t?new eD(e,r):"not-in"===t?new uw(e,r):"array-contains-any"===t?new sx(e,r):new pi(e,t,r)}static lt(e,t,r){return"in"===t?new TT(e,r):new XI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(yu(t,this.value)):null!==t&&Tl(this.value)===Tl(t)&&this.ft(yu(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return tt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class JI extends pi{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.ft(t)}}class TT extends pi{constructor(e,t){super(e,"in",t),this.keys=rd(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class XI extends pi{constructor(e,t){super(e,"not-in",t),this.keys=rd(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function rd(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class ST extends pi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bp(t)&&Sh(t.arrayValue,this.value)}}class eD extends pi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Sh(this.value.arrayValue,t)}}class uw extends pi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Sh(this.value.arrayValue,t)}}class sx extends pi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Sh(this.value.arrayValue,r))}}class Sl{constructor(e,t){this.position=e,this.inclusive=t}}class Mp{constructor(e,t="asc"){this.field=e,this.dir=t}}function AT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function tD(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?Ge.comparator(Ge.fromName(c.referenceValue),t.key):yu(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function nD(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!da(n.position[t],e.position[t]))return!1;return!0}class ha{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=_,this._t=null,this.wt=null}}function lw(n,e,t,r,i,u,c,p){return new ha(n,e,t,r,i,u,c,p)}function Mh(n){return new ha(n)}function cw(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function uy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function dw(n){for(const e of n.filters)if(e.dt())return e.field;return null}function hw(n){return null!==n.collectionGroup}function id(n){const e=qe(n);if(null===e._t){e._t=[];const t=dw(e),r=uy(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Mp(t)),e._t.push(new Mp(nr.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Mp(nr.keyField(),u))}}}return e._t}function qi(n){const e=qe(n);if(!e.wt)if("F"===e.limitType)e.wt=QI(e.path,e.collectionGroup,id(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of id(e))t.push(new Mp(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Sl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Sl(e.startAt.position,e.startAt.inclusive):null;e.wt=QI(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function xp(n,e,t){return new ha(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function xh(n,e){return nd(qi(n),qi(e))&&n.limitType===e.limitType}function fw(n){return`${td(qi(n))}|lt:${n.limitType}`}function ly(n){return`Query(target=${function CT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Jc(r.value)}`;var r}).join(", ")}]`),Ip(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Jc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Jc(t)).join(",")),`Target(${e})`}(qi(n))}; limitType=${n.limitType})`}function pw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=tD(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,id(t),r)||t.endAt&&!function(i,u,c){const p=tD(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,id(t),r)));var t,r}function rD(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function MT(n){return(e,t)=>{let r=!1;for(const i of id(n)){const u=iD(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function iD(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),_=c.data.field(i);return null!==p&&null!==_?yu(p,_):tt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return tt()}}function xT(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dp(e)?"-0":e}}function NT(n){return{integerValue:""+n}}function RT(n,e){return WI(e)?NT(e):xT(n,e)}class gw{constructor(){this._=void 0}}function ox(n,e,t){return n instanceof Np?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof fa?PT(n,e):n instanceof Al?Rp(n,e):function(r,i){const u=OT(r,i),c=mw(u)+mw(r.yt);return iy(u)&&iy(r.yt)?NT(c):xT(r.It,c)}(n,e)}function ax(n,e,t){return n instanceof fa?PT(n,e):n instanceof Al?Rp(n,e):t}function OT(n,e){return n instanceof sd?iy(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Np extends gw{}class fa extends gw{constructor(e){super(),this.elements=e}}function PT(n,e){const t=kT(e);for(const r of n.elements)t.some(i=>da(i,r))||t.push(r);return{arrayValue:{values:t}}}class Al extends gw{constructor(e){super(),this.elements=e}}function Rp(n,e){let t=kT(e);for(const r of n.elements)t=t.filter(i=>!da(i,r));return{arrayValue:{values:t}}}class sd extends gw{constructor(e,t){super(),this.It=e,this.yt=t}}function mw(n){return fr(n.integerValue||n.doubleValue)}function kT(n){return bp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class od{constructor(e,t){this.field=e,this.transform=t}}class FT{constructor(e,t){this.version=e,this.transformResults=t}}class An{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new An}static exists(e){return new An(void 0,e)}static updateTime(e){return new An(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yw(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class cy{}function oD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Pp(n.key,An.none()):new Op(n.key,n.data,An.none());{const t=n.data,r=ti.empty();let i=new gn(nr.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new xl(n.key,r,new zi(i.toArray()),An.none())}}function LT(n,e,t){n instanceof Op?function(r,i,u){const c=r.value.clone(),p=uD(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof xl?function(r,i,u){if(!yw(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=uD(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(aD(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ml(n,e,t,r){return n instanceof Op?function(i,u,c,p){if(!yw(i.precondition,u))return c;const _=i.value.clone(),I=lD(i.fieldTransforms,p,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof xl?function(i,u,c,p){if(!yw(i.precondition,u))return c;const _=lD(i.fieldTransforms,p,u),I=u.data;return I.setAll(aD(i)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(c=t,yw(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function VT(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=OT(r.transform,i||null);null!=u&&(null===t&&(t=ti.empty()),t.set(r.field,u))}return t||null}function UT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&qc(t,r,(i,u)=>function sD(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof fa&&r instanceof fa||t instanceof Al&&r instanceof Al?qc(t.elements,r.elements,da):t instanceof sd&&r instanceof sd?da(t.yt,r.yt):t instanceof Np&&r instanceof Np);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Op extends cy{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class xl extends cy{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function aD(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function uD(n,e,t){const r=new Map;Nt(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,ax(c,p,t[i]))}return r}function lD(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,ox(u,c,e))}return r}class Pp extends cy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _w extends cy{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cD{constructor(e){this.count=e}}var pr,en;function Hs(n){switch(n){default:return tt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function dD(n){if(void 0===n)return tr("GRPC error has no .code"),de.UNKNOWN;switch(n){case pr.OK:return de.OK;case pr.CANCELLED:return de.CANCELLED;case pr.UNKNOWN:return de.UNKNOWN;case pr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case pr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case pr.INTERNAL:return de.INTERNAL;case pr.UNAVAILABLE:return de.UNAVAILABLE;case pr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case pr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case pr.NOT_FOUND:return de.NOT_FOUND;case pr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case pr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case pr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case pr.ABORTED:return de.ABORTED;case pr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case pr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case pr.DATA_LOSS:return de.DATA_LOSS;default:return tt()}}(en=pr||(pr={}))[en.OK=0]="OK",en[en.CANCELLED=1]="CANCELLED",en[en.UNKNOWN=2]="UNKNOWN",en[en.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",en[en.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",en[en.NOT_FOUND=5]="NOT_FOUND",en[en.ALREADY_EXISTS=6]="ALREADY_EXISTS",en[en.PERMISSION_DENIED=7]="PERMISSION_DENIED",en[en.UNAUTHENTICATED=16]="UNAUTHENTICATED",en[en.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",en[en.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",en[en.ABORTED=10]="ABORTED",en[en.OUT_OF_RANGE=11]="OUT_OF_RANGE",en[en.UNIMPLEMENTED=12]="UNIMPLEMENTED",en[en.INTERNAL=13]="INTERNAL",en[en.UNAVAILABLE=14]="UNAVAILABLE",en[en.DATA_LOSS=15]="DATA_LOSS";class pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Zc(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return zI(this.inner)}size(){return this.innerSize}}const BT=new rr(Ge.comparator);function Mn(){return BT}const hD=new rr(Ge.comparator);function ad(...n){let e=hD;for(const t of n)e=e.insert(t.key,t);return e}function fD(n){let e=hD;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ga(){return Nh()}function dy(){return Nh()}function Nh(){return new pa(n=>n.toString(),(n,e)=>n.isEqual(e))}const pD=new rr(Ge.comparator),jT=new gn(Ge.comparator);function Ut(...n){let e=jT;for(const t of n)e=e.add(t);return e}const gD=new gn(Lt);function hy(){return gD}class Rh{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,kp.createSynthesizedTargetChangeForCurrentChange(e,t)),new Rh(Mt.min(),r,hy(),Mn(),Ut())}}class kp{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new kp(wr.EMPTY_BYTE_STRING,t,Ut(),Ut(),Ut())}}class Oh{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class _u{constructor(e,t){this.targetId=e,this.At=t}}class vw{constructor(e,t,r=wr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class fy{constructor(){this.Rt=0,this.bt=$T(),this.Pt=wr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ut(),t=Ut(),r=Ut();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:tt()}}),new kp(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=$T()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class vu{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Mn(),this.qt=mD(),this.Kt=new gn(Lt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:tt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(Tp(u))if(0===r){const c=new Ge(u.path);this.jt(t,c,In.newNoDocument(c,Mt.min()))}else Nt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const p=this.Xt(c);if(p){if(u.current&&Tp(p.target)){const _=new Ge(p.target.path);null!==this.Ut.get(_)||this.ee(c,_)||this.jt(c,_,In.newNoDocument(_,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Ut();this.qt.forEach((u,c)=>{let p=!0;c.forEachWhile(_=>{const I=this.Xt(_);return!I||2===I.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const i=new Rh(e,t,this.Kt,this.Ut,r);return this.Ut=Mn(),this.qt=mD(),this.Kt=new gn(Lt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new fy,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new gn(Lt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new fy),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function mD(){return new rr(Ge.comparator)}function $T(){return new rr(Ge.comparator)}const HT={asc:"ASCENDING",desc:"DESCENDING"},GT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class zT{constructor(e,t){this.databaseId=e,this.gt=t}}function Fp(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ww(n,e){return n.gt?e.toBase64():e.toUint8Array()}function ux(n,e){return Fp(n,e.toTimestamp())}function Mr(n){return Nt(!!n),Mt.fromTimestamp(function(e){const t=bl(e);return new Ln(t.seconds,t.nanos)}(n))}function Ew(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Iw(n){const e=Jt.fromString(n);return Nt(KT(e)),e}function py(n,e){return Ew(n.databaseId,e.path)}function Gs(n,e){const t=Iw(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(bw(t))}function gy(n,e){return Ew(n.databaseId,e)}function Dw(n){const e=Iw(n);return 4===e.length?Jt.emptyPath():bw(e)}function Ph(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bw(n){return Nt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function Cw(n,e,t){return{name:py(n,e),fields:t.value.mapValue.fields}}function Lp(n,e,t){const r=Gs(n,e.name),i=Mr(e.updateTime),u=new ti({mapValue:{fields:e.fields}}),c=In.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function Vp(n,e){let t;if(e instanceof Op)t={update:Cw(n,e.key,e.value)};else if(e instanceof Pp)t={delete:py(n,e.key)};else if(e instanceof xl)t={update:Cw(n,e.key,e.data),updateMask:hx(e.fieldMask)};else{if(!(e instanceof _w))return tt();t={verify:py(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof Np)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof fa)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Al)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof sd)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw tt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ux(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:tt()),t;var i}function yy(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?An.updateTime(Mr(i.updateTime)):void 0!==i.exists?An.exists(i.exists):An.none():An.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(Nt("REQUEST_TIME"===c.setToServerValue),p=new Np):"appendMissingElements"in c?p=new fa(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Al(c.removeAllFromArray.values||[]):"increment"in c?p=new sd(u,c.increment):tt();const _=nr.fromServerFormat(c.fieldPath);return new od(_,p)}(n,i)):[];var i;if(e.update){const i=Gs(n,e.update.name),u=new ti({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new zi((e.updateMask.fieldPaths||[]).map(I=>nr.fromServerFormat(I)));return new xl(i,u,c,t,r)}return new Op(i,u,t,r)}if(e.delete){const i=Gs(n,e.delete);return new Pp(i,t)}if(e.verify){const i=Gs(n,e.verify);return new _w(i,t)}return tt()}function vD(n,e){return{documents:[gy(n,e.path)]}}function wD(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=gy(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=gy(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const I=_.map(T=>function(M){if("=="===M.op){if(ed(M.value))return{unaryFilter:{field:kh(M.field),op:"IS_NAN"}};if(fi(M.value))return{unaryFilter:{field:kh(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(ed(M.value))return{unaryFilter:{field:kh(M.field),op:"IS_NOT_NAN"}};if(fi(M.value))return{unaryFilter:{field:kh(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kh(M.field),op:ZT(M.op),value:M.value}}}(T));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:kh((T=I).field),direction:WT(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(I=e.limit,n.gt||Ip(I)?I:{value:I});var I,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function qT(n){let e=Dw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Nt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=Tw(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new Mp(Up((M=T).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(T){let M;return M="object"==typeof T?T.value:T,Ip(M)?null:M}(t.limit));let _=null;var T;t.startAt&&(_=new Sl((T=t.startAt).values||[],!!T.before));let I=null;return t.endAt&&(I=function(T){return new Sl(T.values||[],!T.before)}(t.endAt)),lw(e,i,c,u,p,"F",_,I)}function Tw(n){return n?void 0!==n.unaryFilter?[dx(n)]:void 0!==n.fieldFilter?[cx(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Tw(e)).reduce((e,t)=>e.concat(t)):tt():[]}function WT(n){return HT[n]}function ZT(n){return GT[n]}function kh(n){return{fieldPath:n.canonicalString()}}function Up(n){return nr.fromServerFormat(n.fieldPath)}function cx(n){return pi.create(Up(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return tt()}}(n.fieldFilter.op),n.fieldFilter.value)}function dx(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Up(n.unaryFilter.field);return pi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Up(n.unaryFilter.field);return pi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Up(n.unaryFilter.field);return pi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Up(n.unaryFilter.field);return pi.create(i,"!=",{nullValue:"NULL_VALUE"});default:return tt()}}function hx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function KT(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ED(e)),e=_y(n.get(t),e);return ED(e)}function _y(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function ED(n){return n+"\x01\x01"}function ma(n){const e=n.length;if(Nt(e>=2),2===e)return Nt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&tt(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:tt()}u=c+2}return new Jt(r)}const Sw=["userId","batchId"];function ya(n,e){return[n,Ri(e)]}function Aw(n,e,t){return[n,Ri(e),t]}const Mw={},xw=["prefixPath","collectionGroup","readTime","documentId"],YT=["prefixPath","collectionGroup","documentId"],Nw=["collectionGroup","readTime","prefixPath","documentId"],Rw=["canonicalId","targetId"],vy=["targetId","path"],fx=["path","targetId"],px=["collectionId","parent"],gx=["indexId","uid"],mx=["uid","sequenceNumber"],ID=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QT=["indexId","uid","orderedDocumentKey"],JT=["userId","collectionPath","documentId"],XT=["userId","collectionPath","largestBatchId"],eS=["userId","collectionGroup","largestBatchId"],Ow=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],DD=[...Ow,"documentOverlays"],Pw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bD=Pw,tS=[...bD,"indexConfiguration","indexState","indexEntries"];class wy extends tw{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Er(n,e){const t=qe(n);return Do.O(t.ie,e)}class CD{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&LT(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ml(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ml(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=dy();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let p=this.applyToLocalView(c,u.mutatedFields);p=t.has(i.key)?null:p;const _=oD(c,p);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ut())}isEqual(e){return this.batchId===e.batchId&&qc(this.mutations,e.mutations,(t,r)=>UT(t,r))&&qc(this.baseMutations,e.baseMutations,(t,r)=>UT(t,r))}}class Ey{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Nt(e.mutations.length===r.length);let i=pD;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new Ey(e,t,r,i)}}class Bp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nl{constructor(e,t,r,i,u=Mt.min(),c=Mt.min(),p=wr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Nl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class TD{constructor(e){this.re=e}}function nS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Iy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:py(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Fp(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:ud(e.version)};else{if(!e.isUnknownDocument())return tt();r.unknownDocument={path:t.path.toArray(),version:ud(e.version)}}var i,u;return r}function Iy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ud(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ld(n){const e=new Ln(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function Fh(n,e){const t=(e.baseMutations||[]).map(u=>yy(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>yy(n.re,u)),i=Ln.fromMillis(e.localWriteTimeMs);return new CD(e.batchId,i,t,r)}function Dy(n){const e=ld(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?ld(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(Nt(1===(i=n.query).documents.length),r=qi(Mh(Dw(i.documents[0])))):r=qi(qT(n.query)),new Nl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,wr.fromBase64String(n.resumeToken))}function rS(n,e){const t=ud(e.snapshotVersion),r=ud(e.lastLimboFreeSnapshotVersion);let i;i=Tp(e.target)?vD(n.re,e.target):wD(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:td(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function SD(n){const e=qT({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?xp(e,e.limit,"L"):e}function AD(n,e){return new Bp(e.largestBatchId,yy(n.re,e.overlayMutation))}function MD(n,e){const t=e.path.lastSegment();return[n,Ri(e.path.popLast()),t]}function iS(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ud(r.readTime),documentKey:Ri(r.documentKey.path),largestBatchId:r.largestBatchId}}class _x{getBundleMetadata(e,t){return sS(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:ld(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return sS(e).put({bundleId:(r=t).id,createTime:ud(Mr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return oS(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:SD(i.bundledQuery),readTime:ld(i.readTime)};var i})}saveNamedQuery(e,t){return oS(e).put({name:(r=t).name,readTime:ud(Mr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function sS(n){return Er(n,"bundles")}function oS(n){return Er(n,"namedQueries")}class kw{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new kw(e,t.uid||"")}getOverlay(e,t){return by(e).get(MD(this.userId,t)).next(r=>r?AD(this.It,r):null)}getOverlays(e,t){const r=ga();return oe.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new Bp(t,c);i.push(this.ue(e,p))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ri(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(by(e).Y("collectionPathOverlayIndex",p))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const i=ga(),u=Ri(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return by(e).W("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const I=AD(this.It,_);i.set(I.getKey(),I)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=ga();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return by(e).Z({index:"collectionGroupOverlayIndex",range:p},(_,I,T)=>{const M=AD(this.It,I);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):T.done()}).next(()=>u)}ue(e,t){return by(e).put(function(r,i,u){const[c,p,_]=MD(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Vp(r.re,u.mutation)}}(this.It,this.userId,t))}}function by(n){return Er(n,"documentOverlays")}class s{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(fr(e.integerValue));else if("doubleValue"in e){const r=fr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),Dp(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(gu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?bT(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):tt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),Ge.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function o(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function a(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=o(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}s.Te=new s;class l{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=a(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=a(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class d{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class g{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class v{constructor(){this.Be=new l,this.Le=new d(this.Be),this.Ue=new g(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class E{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new E(this.indexId,this.documentKey,this.arrayValue,r)}}function D(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=S(n.arrayValue,e.arrayValue),0!==t?t:(t=S(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function S(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class N{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Xv(e);if(void 0!==t&&!this.ze(t))return!1;const r=Wc(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class P{constructor(){this.Ye=new z}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Gi.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Gi.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class z{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new gn(Jt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gn(Jt.comparator)).toArray()}}const ee=new Uint8Array(0);class Ee{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new z,this.Ze=new pa(r=>td(r),(r,i)=>nd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ri(i)};return Oe(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$I(t),""],!1,!0);return Oe(e).W(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(ma(c.parent))}return r})}addFieldIndex(e,t){const r=Qe(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=_t(e);return u.next(p=>{c.put(iS(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Qe(e),i=_t(e),u=$e(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=$e(e);let i=!0;const u=new Map;return oe.forEach(this.tn(t),c=>this.en(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=Ut();const p=[];return oe.forEach(u,(_,I)=>{var T;ke("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(mt=>`${mt.fieldPath}:${mt.kind}`).join(",")}`} to execute ${td(t)}`);const M=function(mt,at){const Tt=Xv(at);if(void 0===Tt)return null;for(const Rt of Sp(mt,Tt.fieldPath))switch(Rt.op){case"array-contains-any":return Rt.value.arrayValue.values||[];case"array-contains":return[Rt.value]}return null}(I,_),L=function(mt,at){const Tt=new Map;for(const Rt of Wc(at))for(const nn of Sp(mt,Rt.fieldPath))switch(nn.op){case"==":case"in":Tt.set(Rt.fieldPath.canonicalString(),nn.value);break;case"not-in":case"!=":return Tt.set(Rt.fieldPath.canonicalString(),nn.value),Array.from(Tt.values())}return null}(I,_),G=function(mt,at){const Tt=[];let Rt=!0;for(const nn of Wc(at)){const gs=0===nn.kind?Ap(mt,nn.fieldPath,mt.startAt):ay(mt,nn.fieldPath,mt.startAt);Tt.push(gs.value),Rt&&(Rt=gs.inclusive)}return new Sl(Tt,Rt)}(I,_),K=function(mt,at){const Tt=[];let Rt=!0;for(const nn of Wc(at)){const gs=0===nn.kind?ay(mt,nn.fieldPath,mt.endAt):Ap(mt,nn.fieldPath,mt.endAt);Tt.push(gs.value),Rt&&(Rt=gs.inclusive)}return new Sl(Tt,Rt)}(I,_),ue=this.nn(_,I,G),Ie=this.nn(_,I,K),We=this.sn(_,I,L),nt=this.rn(_.indexId,M,ue,G.inclusive,Ie,K.inclusive,We);return oe.forEach(nt,mt=>r.J(mt,t.limit).next(at=>{at.forEach(Tt=>{const Rt=Ge.fromSegments(Tt.documentKey);c.has(Rt)||(c=c.add(Rt),p.push(Rt))})}))}).next(()=>p)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,c,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),I=_/(null!=t?t.length:1),T=[];for(let M=0;M<_;++M){const L=t?this.on(t[M/I]):ee,G=this.un(e,L,r[M%I],i),K=this.cn(e,L,u[M%I],c),ue=p.map(Ie=>this.un(e,L,Ie,!0));T.push(...this.createRange(G,K,ue))}return T}un(e,t,r,i){const u=new E(e,Ge.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new E(e,Ge.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new N(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.We(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new gn(nr.comparator),_=!1;for(const I of c.filters){const T=I;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?_=!0:p=p.add(T.field))}for(const I of c.orderBy)I.field.isKeyField()||(p=p.add(I.field));return p.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new v;for(const i of Wc(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.qe(i.kind);s.Te.ce(u,c)}return r.$e()}on(e){const t=new v;return s.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new v;return s.Te.ce(Xc(this.databaseId,t),r.qe(function(i){const u=Wc(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new v);let u=0;for(const c of Wc(e)){const p=r[u++];for(const _ of i)if(this.ln(t,c.fieldPath)&&bp(p))i=this.fn(i,c,p);else{const I=_.qe(c.kind);s.Te.ce(p,I)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new v;_.seed(p.$e()),s.Te.ce(c,_.qe(t.kind)),u.push(_)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof pi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Qe(e),i=_t(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return oe.forEach(u,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(I,T){const M=T?new _p(T.sequenceNumber,new Gi(ld(T.readTime),new Ge(ma(T.documentKey)),T.largestBatchId)):_p.empty(),L=I.fields.map(([G,K])=>new ty(nr.fromServerFormat(G),K));return new ey(I.indexId,I.collectionGroup,L,M)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Lt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Qe(e),u=_t(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>oe.forEach(p,_=>u.put(iS(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?oe.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),oe.forEach(p,_=>this.wn(e,i,_).next(I=>{const T=this.mn(u,_);return I.isEqual(T)?oe.resolve():this.gn(e,u,_,I,T)}))))})}yn(e,t,r,i){return $e(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return $e(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=$e(e);let u=new gn(D);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,p)=>{u=u.add(new E(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}mn(e,t){let r=new gn(D);const i=this.an(t,e);if(null==i)return r;const u=Xv(t);if(null!=u){const c=e.data.field(u.fieldPath);if(bp(c))for(const p of c.arrayValue.values||[])r=r.add(new E(t.indexId,e.key,this.on(p),i))}else r=r.add(new E(t.indexId,e.key,ee,i));return r}gn(e,t,r,i,u){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,I,T,M){const L=p.getIterator(),G=_.getIterator();let K=Yc(L),ue=Yc(G);for(;K||ue;){let Ie=!1,We=!1;if(K&&ue){const nt=I(K,ue);nt<0?We=!0:nt>0&&(Ie=!0)}else null!=K?We=!0:Ie=!0;Ie?(T(ue),ue=Yc(G)):We?(M(K),K=Yc(L)):(K=Yc(L),ue=Yc(G))}}(i,u,D,p=>{c.push(this.yn(e,t,r,p))},p=>{c.push(this.pn(e,t,r,p))}),oe.waitFor(c)}_n(e){let t=1;return _t(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>D(c,p)).filter((c,p,_)=>!p||0!==D(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=D(c,e),_=D(c,t);if(0===p)i[0]=e.Ke();else if(p>0&&_<0)i.push(c),i.push(c.Ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,ee,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,ee,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ne)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||tt())).next(Ne)}}function Oe(n){return Er(n,"collectionParents")}function $e(n){return Er(n,"indexEntries")}function Qe(n){return Er(n,"indexConfiguration")}function _t(n){return Er(n,"indexState")}function Ne(n){Nt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;ny(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Gi(e.readTime,e.documentKey,t)}const gt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xt{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new xt(e,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Dn(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Z({range:c},(T,M,L)=>(p++,L.delete()));u.push(_.next(()=>{Nt(1===p)}));const I=[];for(const T of t.mutations){const M=Aw(e,T.key.path,t.batchId);u.push(i.delete(M)),I.push(T.key)}return oe.waitFor(u).next(()=>I)}function _a(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw tt();e=n.noDocument}return JSON.stringify(e).length}xt.DEFAULT_COLLECTION_PERCENTILE=10,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xt.DEFAULT=new xt(41943040,xt.DEFAULT_COLLECTION_PERCENTILE,xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xt.DISABLED=new xt(-1,0,0);class Lh{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Nt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Lh(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return va(e).Z({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Rl(e),c=va(e);return c.add({}).next(p=>{Nt("number"==typeof p);const _=new CD(p,t,r,i),I=function(L,G,K){const ue=K.baseMutations.map(We=>Vp(L.re,We)),Ie=K.mutations.map(We=>Vp(L.re,We));return{userId:G,batchId:K.batchId,localWriteTimeMs:K.localWriteTime.toMillis(),baseMutations:ue,mutations:Ie}}(this.It,this.userId,_),T=[];let M=new gn((L,G)=>Lt(L.canonicalString(),G.canonicalString()));for(const L of i){const G=Aw(this.userId,L.key.path,p);M=M.add(L.key.path.popLast()),T.push(c.put(I)),T.push(u.put(G,Mw))}return M.forEach(L=>{T.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[p]=_.keys()}),oe.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return va(e).get(t).next(r=>r?(Nt(r.userId===this.userId),Fh(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return va(e).Z({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(Nt(p.batchId>=r),u=Fh(this.It,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return va(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return va(e).W("userMutationsIndex",t).next(r=>r.map(i=>Fh(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ya(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Rl(e).Z({range:i},(c,p,_)=>{const[I,T,M]=c,L=ma(T);if(I===this.userId&&t.path.isEqual(L))return va(e).get(M).next(G=>{if(!G)throw tt();Nt(G.userId===this.userId),u.push(Fh(this.It,G))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(Lt);const i=[];return t.forEach(u=>{const c=ya(this.userId,u.path),p=IDBKeyRange.lowerBound(c),_=Rl(e).Z({range:p},(I,T,M)=>{const[L,G,K]=I,ue=ma(G);L===this.userId&&u.path.isEqual(ue)?r=r.add(K):M.done()});i.push(_)}),oe.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=ya(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new gn(Lt);return Rl(e).Z({range:c},(_,I,T)=>{const[M,L,G]=_,K=ma(L);M===this.userId&&r.isPrefixOf(K)?K.length===i&&(p=p.add(G)):T.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(va(e).get(u).next(c=>{if(null===c)throw tt();Nt(c.userId===this.userId),r.push(Fh(this.It,c))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Dn(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Rl(e).Z({range:r},(u,c,p)=>{if(u[0]===this.userId){const _=ma(u[1]);i.push(_)}else p.done()}).next(()=>{Nt(0===i.length)})})}containsKey(e,t){return Cy(e,this.userId,t)}Rn(e){return Ty(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Cy(n,e,t){const r=ya(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Rl(n).Z({range:u,X:!0},(p,_,I)=>{const[T,M,L]=p;T===e&&M===i&&(c=!0),I.done()}).next(()=>c)}function va(n){return Er(n,"mutations")}function Rl(n){return Er(n,"documentMutations")}function Ty(n){return Er(n,"mutationQueues")}class wu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new wu(0)}static vn(){return new wu(-1)}}class Fw{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new wu(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Mt.fromTimestamp(new Ln(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ol(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Nt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Ol(e).Z((c,p)=>{const _=Dy(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>oe.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Ol(e).Z((r,i)=>{const u=Dy(i);t(u)})}Vn(e){return Sy(e).get("targetGlobalKey").next(t=>(Nt(null!==t),t))}Sn(e,t){return Sy(e).put("targetGlobalKey",t)}Dn(e,t){return Ol(e).put(rS(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=td(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Ol(e).Z({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const I=Dy(p);nd(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Vh(e);return t.forEach(c=>{const p=Ri(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Vh(e);return oe.forEach(t,u=>{const c=Ri(u.path);return oe.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Vh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Vh(e);let u=Ut();return i.Z({range:r,X:!0},(c,p,_)=>{const I=ma(c[1]),T=new Ge(I);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Ri(t.path),i=IDBKeyRange.bound([r],[$I(r)],!1,!0);let u=0;return Vh(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,p],_,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}se(e,t){return Ol(e).get(t).next(r=>r?Dy(r):null)}}function Ol(n){return Er(n,"targets")}function Sy(n){return Er(n,"targetGlobal")}function Vh(n){return Er(n,"targetDocuments")}function vx([n,e],[t,r]){const i=Lt(n,t);return 0===i?Lt(e,r):i}class zO{constructor(e){this.xn=e,this.buffer=new gn(vx),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();vx(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qO{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Dl(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield pu(r)}yield t.Fn(3e5)}))}}class WO{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(hi.at);const r=new zO(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(gt)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gt):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,c,p,_,I;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(I=Date.now(),Zv()<=Hi.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${M} documents in `+(I-_)+`ms\nTotal Duration: ${I-T}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class ZO{constructor(e,t){this.db=e,this.garbageCollector=new WO(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return xD(e,r)}removeReference(e,t,r){return xD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return xD(e,t)}Gn(e,t){return function(r,i){let u=!1;return Ty(r).tt(c=>Cy(r,c,i).next(p=>(p&&(u=!0),oe.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(c,p)=>{if(p<=t){const _=this.Gn(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Mt.min()),Vh(e).delete([0,Ri(c.path)])))});i.push(_)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return xD(e,t)}Kn(e,t){const r=Vh(e);let i,u=hi.at;return r.Z({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:I})=>{0===c?(u!==hi.at&&t(new Ge(ma(i)),u),u=I,i=_):u=hi.at}).next(()=>{u!==hi.at&&t(new Ge(ma(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function xD(n,e){return Vh(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ri(e.path),sequenceNumber:r}));var r}class wx{constructor(){this.changes=new pa(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class KO{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return jp(e).put(r)}removeEntry(e,t,r){return jp(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],Iy(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=In.newInvalidDocument(t);return jp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Lw(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:In.newInvalidDocument(t)};return jp(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Lw(t))},(i,u)=>{r={document:this.jn(t,u),size:_a(u)}}).next(()=>r)}getEntries(e,t){let r=Mn();return this.zn(e,t,(i,u)=>{const c=this.jn(i,u);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=Mn(),i=new rr(Ge.comparator);return this.zn(e,t,(u,c)=>{const p=this.jn(u,c);r=r.insert(u,p),i=i.insert(u,_a(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let i=new gn(bx);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(Lw(i.first()),Lw(i.last())),c=i.getIterator();let p=c.getNext();return jp(e).Z({index:"documentKeyIndex",range:u},(_,I,T)=>{const M=Ge.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;p&&bx(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,I),p=c.hasNext()?c.getNext():null),p?T.j(Lw(p)):T.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Iy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jp(e).W(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=Mn();for(const _ of c){const I=this.jn(Ge.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(I.key,I)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=Mn();const c=Dx(t,r),p=Dx(t,Gi.max());return jp(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,I,T)=>{const M=this.jn(Ge.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(M.key,M),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new YO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ix(e).get("remoteDocumentGlobalKey").next(t=>(Nt(!!t),t))}Qn(e,t){return Ix(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function yx(n,e){let t;if(e.document)t=Lp(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=ld(e.noDocument.readTime);t=In.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return tt();{const r=Ge.fromSegments(e.unknownDocument.path),i=ld(e.unknownDocument.version);t=In.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ln(r[0],r[1]);return Mt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return In.newInvalidDocument(e)}}function Ex(n){return new KO(n)}class YO extends wx{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new pa(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new gn((u,c)=>Lt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const _=nS(this.Yn.It,c);i=i.add(u.path.popLast()),r+=_a(_)-p.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=nS(this.Yn.It,c.convertToNoDocument(Mt.min()));t.push(this.Yn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Ix(n){return Er(n,"remoteDocumentGlobal")}function jp(n){return Er(n,"remoteDocumentsV14")}function Lw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Dx(n,e){const t=e.documentKey.path.toArray();return[n,Iy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function bx(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Lt(t[u],r[u]),i)return i;return i=Lt(t.length,r.length),i||(i=Lt(t[t.length-2],r[r.length-2]),i||Lt(t[t.length-1],r[r.length-1]))}class QO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Cx{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Ml(r.mutation,i,zi.empty(),Ln.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ut()){const i=ga();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=ad();return u.forEach((p,_)=>{c=c.insert(p,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=ga();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ut()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,r,i){let u=Mn();const c=Nh(),p=Nh();return t.forEach((_,I)=>{const T=r.get(I.key);i.has(I.key)&&(void 0===T||T.mutation instanceof xl)?u=u.insert(I.key,I):void 0!==T&&(c.set(I.key,T.mutation.getFieldMask()),Ml(T.mutation,I,T.mutation.getFieldMask(),Ln.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((I,T)=>c.set(I,T)),t.forEach((I,T)=>{var M;return p.set(I,new QO(T,null!==(M=c.get(I))&&void 0!==M?M:null))}),p))}recalculateAndSaveOverlays(e,t){const r=Nh();let i=new rr((c,p)=>c-p),u=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(_=>{const I=t.get(_);if(null===I)return;let T=r.get(_)||zi.empty();T=p.applyToLocalView(I,T),r.set(_,T);const M=(i.get(p.batchId)||Ut()).add(_);i=i.insert(p.batchId,M)})}).next(()=>{const c=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),I=_.key,T=_.value,M=dy();T.forEach(L=>{if(!u.has(L)){const G=oD(t.get(L),r.get(L));null!==G&&M.set(L,G),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,I,M))}return oe.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):hw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):oe.resolve(ga());let p=-1,_=u;return c.next(I=>oe.forEach(I,(T,M)=>(p<M.largestBatchId&&(p=M.largestBatchId),u.get(T)?oe.resolve():this.getBaseDocument(e,T,M).next(L=>{_=_.insert(T,L)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,_,I,Ut())).next(T=>({batchId:p,changes:fD(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ge(t)).next(r=>{let i=ad();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=ad();return this.indexManager.getCollectionParents(e,i).next(c=>oe.forEach(c,p=>{const _=(I=t,T=p.child(i),new ha(T,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,T;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(I=>{I.forEach((T,M)=>{u=u.insert(T,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((p,_)=>{const I=_.getKey();null===i.get(I)&&(i=i.insert(I,In.newInvalidDocument(I)))});let c=ad();return i.forEach((p,_)=>{const I=u.get(p);void 0!==I&&Ml(I.mutation,_,zi.empty(),Ln.now()),pw(t,_)&&(c=c.insert(p,_))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(In.newInvalidDocument(t))}}class JO{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Mr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:SD(r.bundledQuery),readTime:Mr(r.readTime)}),oe.resolve();var r}}class XO{constructor(){this.overlays=new rr(Ge.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ga();return oe.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=ga(),u=t.length+1,c=new Ge(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new rr((I,T)=>I-T);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let T=u.get(I.largestBatchId);null===T&&(T=ga(),u=u.insert(I.largestBatchId,T)),T.set(I.getKey(),I)}}const p=ga(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,T)=>p.set(I,T)),!(p.size()>=i)););return oe.resolve(p)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Bp(t,r));let u=this.es.get(t);void 0===u&&(u=Ut(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class aS{constructor(){this.ns=new gn(gi.ss),this.rs=new gn(gi.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new gi(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new gi(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ge(new Jt([])),r=new gi(t,e),i=new gi(t,e+1),u=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ge(new Jt([])),r=new gi(t,e),i=new gi(t,e+1);let u=Ut();return this.rs.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new gi(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gi{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ge.comparator(e.key,t.key)||Lt(e._s,t._s)}static os(e,t){return Lt(e._s,t._s)||Ge.comparator(e.key,t.key)}}class eP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new gn(gi.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const c=new CD(u,t,r,i);this.mutationQueue.push(c);for(const p of i)this.gs=this.gs.add(new gi(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gi(t,0),i=new gi(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],c=>{const p=this.ys(c._s);u.push(p)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new gn(Lt);return t.forEach(i=>{const u=new gi(i,0),c=new gi(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],p=>{r=r.add(p._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;Ge.isDocumentKey(u)||(u=u.child(""));const c=new gi(new Ge(u),0);let p=new gn(Lt);return this.gs.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===i&&(p=p.add(_._s)),!0)},c),oe.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Nt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,i=>{const u=new gi(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new gi(t,0),i=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class tP{constructor(e){this.Es=e,this.docs=new rr(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let r=Mn();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():In.newInvalidDocument(i))}),oe.resolve(r)}getAllFromCollection(e,t,r){let i=Mn();const u=new Ge(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||ny(bh(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return oe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){tt()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nP(this)}getSize(e){return oe.resolve(this.size)}}class nP extends wx{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class rP{constructor(e){this.persistence=e,this.Rs=new pa(t=>td(t),nd),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new aS,this.targetCount=0,this.vs=wu.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new wu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),oe.waitFor(u).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class Tx{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new hi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new rP(this),this.indexManager=new P,this.remoteDocumentCache=new tP(r=>this.referenceDelegate.xs(r)),this.It=new TD(t),this.Ns=new JO(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new XO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new eP(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new iP(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Ms(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Os(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class iP extends tw{constructor(e){super(),this.currentSequenceNumber=e}}class ND{constructor(e){this.persistence=e,this.Fs=new aS,this.$s=null}static Bs(e){return new ND(e)}get Ls(){if(this.$s)return this.$s;throw tt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const i=Ge.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,Mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class sP{constructor(e){this.It=e}$(e,t,r,i){const u=new rw("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sw,{unique:!0}),p.createObjectStore("documentMutations"),Sx(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),Sx(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",I)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").W().next(I=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Sw,{unique:!0});const T=_.store("mutations"),M=I.map(L=>T.put(L));return oe.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(u))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:JT});_.createIndex("collectionPathOverlayIndex",XT,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",eS,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:xw});_.createIndex("documentKeyIndex",YT),_.createIndex("collectionGroupIndex",Nw)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&i>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:gx}).createIndex("sequenceNumberIndex",mx,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:ID}).createIndex("documentKeyIndex",QT,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=_a(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>oe.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(p=>oe.forEach(p,_=>{Nt(_.userId===u.userId);const I=Fh(this.It,_);return Dn(e,u.userId,I).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((c,p)=>{const _=new Jt(c),I=[0,Ri(_)];u.push(t.get(I).next(T=>T?oe.resolve():t.put({targetId:0,path:Ri(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:px});const r=t.store("collectionParents"),i=new z,u=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:Ri(_)})}};return t.store("remoteDocuments").Z({X:!0},(c,p)=>{const _=new Jt(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,p,_],I)=>{const T=ma(p);return u(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=Dy(i),c=rS(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,c)=>{const p=t.store("remoteDocumentsV14"),_=(I=c,I.document?new Ge(Jt.fromString(I.document.name).popFirst(5)):I.noDocument?Ge.fromSegments(I.noDocument.path):I.unknownDocument?Ge.fromSegments(I.unknownDocument.path):tt()).path.toArray();var I;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(T))}).next(()=>oe.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Ex(this.It),u=new Tx(ND.Bs,this.It.re);return r.W().next(c=>{const p=new Map;return c.forEach(_=>{var I;let T=null!==(I=p.get(_.userId))&&void 0!==I?I:Ut();Fh(this.It,_).keys().forEach(M=>T=T.add(M)),p.set(_.userId,T)}),oe.forEach(p,(_,I)=>{const T=new Ar(I),M=kw.oe(this.It,T),L=u.getIndexManager(T),G=Lh.oe(T,this.It,L,u.referenceDelegate);return new Cx(i,G,M,L).recalculateAndSaveOverlaysForDocumentKeys(new wy(t,hi.at),_).next()})})}}function Sx(n){n.createObjectStore("targetDocuments",{keyPath:vy}).createIndex("documentTargetsIndex",fx,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Rw,{unique:!0}),n.createObjectStore("targetGlobal")}const uS="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lS{constructor(e,t,r,i,u,c,p,_,I,T,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=p,this.Js=I,this.Ys=T,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!lS.C())throw new xe(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ZO(this,i),this.ii=t+"main",this.It=new TD(_),this.ri=new Do(this.ii,this.Xs,new sP(this.It)),this.Cs=new Fw(this.referenceDelegate,this.It),this.remoteDocumentCache=Ex(this.It),this.Ns=new _x,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,uS);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new hi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>RD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Dl(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Vw(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return RD(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Er(r,"clientMetadata");return i.W().next(u=>{const c=e.Ii(u,18e5),p=u.filter(_=>-1===c.indexOf(_));return oe.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):Vw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new xe(de.FAILED_PRECONDITION,uS);return!1}}return!(!this.networkEnabled||!this.inForeground)||RD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new wy(t,hi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>RD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Lh.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ee(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return kw.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?tS:14===c?bD:13===c?Pw:12===c?DD:11===c?Ow:void tt();var c;let p;return this.ri.runTransaction(e,i,u,_=>(p=new wy(_,this.Ss?this.Ss.next():hi.at),"readwrite-primary"===t?this.fi(p).next(I=>!!I||this.di(p)).next(I=>{if(!I)throw tr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new xe(de.FAILED_PRECONDITION,ew);return r(p)}).next(I=>this.wi(p).next(()=>I)):this.Vi(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Vi(e){return Vw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(de.FAILED_PRECONDITION,uS)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Vw(e).put("owner",t)}static C(){return Do.C()}_i(e){const t=Vw(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(tr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Bt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return tr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){tr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Vw(n){return Er(n,"owner")}function RD(n){return Er(n,"clientMetadata")}function cS(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class dS{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Ut(),i=Ut();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new dS(e,t.fromCache,r,i)}}class Ax{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Mi(e,t,i,r)).next(u=>u||this.Oi(e,t))}ki(e,t){if(cw(t))return oe.resolve(null);let r=qi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=xp(t,null,"F"),r=qi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Ut(...u);return this.Ni.getDocuments(e,c).next(p=>this.indexManager.getMinOffset(e,r).next(_=>{const I=this.Fi(t,p);return this.$i(t,I,c,_.readTime)?this.ki(e,xp(t,null,"F")):this.Bi(e,I,t,_)}))})))}Mi(e,t,r,i){return cw(t)||i.isEqual(Mt.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,i)?this.Oi(e,t):(Zv()<=Hi.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ly(t)),this.Bi(e,c,t,HI(i,-1)))})}Fi(e,t){let r=new gn(MT(e));return t.forEach((i,u)=>{pw(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Oi(e,t){return Zv()<=Hi.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",ly(t)),this.Ni.getDocumentsMatchingQuery(e,t,Gi.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class oP{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new rr(Lt),this.qi=new pa(u=>td(u),nd),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cx(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Mx(n,e,t,r){return new oP(n,e,t,r)}function xx(n,e){return hS.apply(this,arguments)}function hS(){return hS=(0,me.Z)(function*(n,e){const t=qe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let _=Ut();for(const I of i){c.push(I.batchId);for(const T of I.mutations)_=_.add(T.key)}for(const I of u){p.push(I.batchId);for(const T of I.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(r,_).next(I=>({ji:I,removedBatchIds:c,addedBatchIds:p}))})})}),hS.apply(this,arguments)}function aP(n,e){const t=qe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,I){const T=_.batch,M=T.keys();let L=oe.resolve();return M.forEach(G=>{L=L.next(()=>I.getEntry(p,G)).next(K=>{const ue=_.docVersions.get(G);Nt(null!==ue),K.version.compareTo(ue)<0&&(T.applyToRemoteDocument(K,_),K.isValidDocument()&&(K.setReadTime(_.commitVersion),I.addEntry(K)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(p,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let p=Ut();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(p=p.add(c.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Nx(n){const e=qe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function uP(n,e){const t=qe(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const p=[];e.targetChanges.forEach((T,M)=>{const L=i.get(M);if(!L)return;p.push(t.Cs.removeMatchingKeys(u,T.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,T.addedDocuments,M)));let G=L.withSequenceNumber(u.currentSequenceNumber);var K,ue,Ie;e.targetMismatches.has(M)?G=G.withResumeToken(wr.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):T.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(T.resumeToken,r)),i=i.insert(M,G),ue=G,Ie=T,(0===(K=L).resumeToken.approximateByteSize()||ue.snapshotVersion.toMicroseconds()-K.snapshotVersion.toMicroseconds()>=3e8||Ie.addedDocuments.size+Ie.modifiedDocuments.size+Ie.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(u,G))});let _=Mn(),I=Ut();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),p.push(Rx(u,c,e.documentUpdates).next(T=>{_=T.Wi,I=T.zi})),!r.isEqual(Mt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(T)}return oe.waitFor(p).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,I)).next(()=>_)}).then(u=>(t.Ui=i,u))}function Rx(n,e,t){let r=Ut(),i=Ut();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Mn();return t.forEach((p,_)=>{const I=u.get(p);_.isFoundDocument()!==I.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(Mt.min())?(e.removeEntry(p,_.readTime),c=c.insert(p,_)):!I.isValidDocument()||_.version.compareTo(I.version)>0||0===_.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(_),c=c.insert(p,_)):ke("LocalStore","Ignoring outdated watch update for ",p,". Current version:",I.version," Watch version:",_.version)}),{Wi:c,zi:i}})}function lP(n,e){const t=qe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ay(n,e){const t=qe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,oe.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new Nl(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function My(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,me.Z)(function*(n,e,t){const r=qe(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!Dl(c))throw c;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),fS.apply(this,arguments)}function OD(n,e,t){const r=qe(n);let i=Mt.min(),u=Ut();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,I){const T=qe(p),M=T.qi.get(I);return void 0!==M?oe.resolve(T.Ui.get(M)):T.Cs.getTargetData(_,I)}(r,c,qi(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:Mt.min(),t?u:Ut())).next(p=>(kx(r,rD(e),p),{documents:p,Hi:u})))}function Ox(n,e){const t=qe(n),r=qe(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function Px(n,e){const t=qe(n),r=t.Ki.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,HI(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(kx(t,e,i),i))}function kx(n,e,t){let r=Mt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function pS(){return pS=(0,me.Z)(function*(n,e,t,r){const i=qe(n);let u=Ut(),c=Mn();for(const I of t){const T=e.Ji(I.metadata.name);I.document&&(u=u.add(T));const M=e.Yi(I);M.setReadTime(e.Xi(I.metadata.readTime)),c=c.insert(T,M)}const p=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Ay(i,(I=r,qi(Mh(Jt.fromString(`__bundle__/docs/${I}`)))));var I;return i.persistence.runTransaction("Apply bundle documents","readwrite",I=>Rx(I,p,c).next(T=>(p.apply(I),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(I,_.targetId).next(()=>i.Cs.addMatchingKeys(I,u,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(I,T.Wi,T.zi)).next(()=>T.Wi)))}),pS.apply(this,arguments)}function dP(n,e){return gS.apply(this,arguments)}function gS(){return gS=(0,me.Z)(function*(n,e,t=Ut()){const r=yield Ay(n,qi(SD(e.bundledQuery))),i=qe(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Mr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(u,e);const p=r.withResumeToken(wr.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(p.targetId,p),i.Cs.updateTargetData(u,p).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),gS.apply(this,arguments)}function Fx(n,e){return`firestore_clients_${n}_${e}`}function Lx(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function mS(n,e){return`firestore_targets_${n}_${e}`}class PD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new xe(i.error.code,i.error.message))),c?new PD(e,t,i.state,u):(tr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Uw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new xe(r.error.code,r.error.message))),u?new Uw(e,r.state,i):(tr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=hy();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=WI(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new kD(e,u):(tr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yS(t.clientId,t.onlineState):(tr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _S{constructor(){this.activeTargetIds=hy()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vS{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new rr(Lt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=Fx(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new _S),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(Fx(e.persistenceKey,i));if(u){const c=kD.Zi(i,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(mS(this.persistenceKey,e));if(r){const i=Uw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mS(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let c=hi.at;if(null!=u)try{const p=JSON.parse(u);Nt("number"==typeof p),c=p}catch(p){tr("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==hi.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Or(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new PD(this.currentUser,e,t,r),u=Lx(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=Lx(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=mS(this.persistenceKey,e),u=new Uw(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return kD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return PD.Zi(new Ar(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Uw.Zi(i,t)}yr(e){return yS.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),c=[],p=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Br(c,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=hy();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Vx{constructor(){this.Lr=new _S,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new _S,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class hP{qr(e){}shutdown(){}}class Ux{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const fP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class pP{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class gP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,u){const c=this.ao(e,t);ke("RestConnection","Sending: ",c,r);const p={};return this.ho(p,i,u),this.lo(e,c,p,r).then(_=>(ke("RestConnection","Received: ",_),_),_=>{throw $s("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}fo(e,t,r,i,u,c){return this.co(e,t,r,i,u)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+El,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ao(e,t){return`${this.oo}/v1/${t}:${fP[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((u,c)=>{const p=new Wv;p.listenOnce(fT.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case qv.NO_ERROR:const I=p.getResponseJson();ke("Connection","XHR received:",JSON.stringify(I)),u(I);break;case qv.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),c(new xe(de.DEADLINE_EXCEEDED,"Request time out"));break;case qv.HTTP_ERROR:const T=p.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',T,"response text:",p.getResponseText()),T>0){const M=p.getResponseJson().error;if(M&&M.status&&M.message){const L=function(G){const K=G.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(K)>=0?K:de.UNKNOWN}(M.status);c(new xe(L,M.message))}else c(new xe(de.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new xe(de.UNAVAILABLE,"Connection failed."));break;default:tt()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=RI(),c=OI(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new pT({})),this.ho(p.initMessageHeaders,t,r),(0,Bt.uI)()||(0,Bt.b$)()||(0,Bt.d)()||(0,Bt.w1)()||(0,Bt.Mn)()||(0,Bt.ru)()||(p.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");ke("Connection","Creating WebChannel: "+_,p);const I=u.createWebChannel(_,p);let T=!1,M=!1;const L=new pP({Hr:K=>{M?ke("Connection","Not sending because WebChannel is closed:",K):(T||(ke("Connection","Opening WebChannel transport."),I.open(),T=!0),ke("Connection","WebChannel sending:",K),I.send(K))},Jr:()=>I.close()}),G=(K,ue,Ie)=>{K.listen(ue,We=>{try{Ie(We)}catch(nt){setTimeout(()=>{throw nt},0)}})};return G(I,Ym.EventType.OPEN,()=>{M||ke("Connection","WebChannel transport opened.")}),G(I,Ym.EventType.CLOSE,()=>{M||(M=!0,ke("Connection","WebChannel transport closed"),L.io())}),G(I,Ym.EventType.ERROR,K=>{M||(M=!0,$s("Connection","WebChannel transport errored:",K),L.io(new xe(de.UNAVAILABLE,"The operation could not be completed")))}),G(I,Ym.EventType.MESSAGE,K=>{var ue;if(!M){const Ie=K.data[0];Nt(!!Ie);const We=Ie,nt=We.error||(null===(ue=We[0])||void 0===ue?void 0:ue.error);if(nt){ke("Connection","WebChannel received error:",nt);const mt=nt.status;let at=function(Rt){const nn=pr[Rt];if(void 0!==nn)return dD(nn)}(mt),Tt=nt.message;void 0===at&&(at=de.INTERNAL,Tt="Unknown error status: "+mt+" with message "+nt.message),M=!0,L.io(new xe(at,Tt)),I.close()}else ke("Connection","WebChannel received:",Ie),L.ro(Ie)}}),G(c,PI.STAT_EVENT,K=>{K.stat===kI.PROXY?ke("Connection","Detected buffering proxy"):K.stat===kI.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function Bx(){return typeof window<"u"?window:null}function FD(){return typeof document<"u"?document:null}function Bw(n){return new zT(n,!0)}class wS{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=u,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class jx{constructor(e,t,r,i,u,c,p,_){this.Hs=e,this.Po=r,this.vo=i,this.Vo=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new wS(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(tr(t.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new xe(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mP extends jx{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=u}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function yD(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:tt(),i=e.targetChange.targetIds||[],u=function(_,I){return _.gt?(Nt(void 0===I||"string"==typeof I),wr.fromBase64String(I||"")):(Nt(void 0===I||I instanceof Uint8Array),wr.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const I=void 0===_.code?de.UNKNOWN:dD(_.code);return new xe(I,_.message||"")}(c);t=new vw(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Gs(n,r.document.name),u=Mr(r.document.updateTime),c=new ti({mapValue:{fields:r.document.fields}}),p=In.newFoundDocument(i,u,c);t=new Oh(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Gs(n,r.document),u=r.readTime?Mr(r.readTime):Mt.min(),c=In.newNoDocument(i,u);t=new Oh([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Gs(n,r.document);t=new Oh([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return tt();{const r=e.filter,u=new cD(r.count||0);t=new _u(r.targetId,u)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Mt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Mt.min():u.readTime?Mr(u.readTime):Mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Ph(this.It),t.addTarget=function(i,u){let c;const p=u.target;return c=Tp(p)?{documents:vD(i,p)}:{query:wD(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=ww(i,u.resumeToken):u.snapshotVersion.compareTo(Mt.min())>0&&(c.readTime=Fp(i,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function lx(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return tt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Ph(this.It),t.removeTarget=e,this.Bo(t)}}class yP extends jx{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Nt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function _D(n,e){return n&&n.length>0?(Nt(void 0!==e),n.map(t=>function(r,i){let u=Mr(r.updateTime?r.updateTime:i);return u.isEqual(Mt.min())&&(u=Mr(i)),new FT(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Mr(e.commitTime);return this.listener.Zo(r,t)}return Nt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Ph(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Vp(this.It,r))};this.Bo(t)}}class _P extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.Vo.co(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(de.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.Vo.fo(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new xe(de.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class vP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(tr(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class wP{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(p=>{r.enqueueAndForget((0,me.Z)(function*(){var _;Uh(c)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,me.Z)(function*(I){const T=qe(I);T._u.add(4),yield xy(T),T.gu.set("Unknown"),T._u.delete(4),yield jw(T)}),function(I){return _.apply(this,arguments)})(c))}))}),this.gu=new vP(r,i)}}function jw(n){return ES.apply(this,arguments)}function ES(){return ES=(0,me.Z)(function*(n){if(Uh(n))for(const e of n.wu)yield e(!0)}),ES.apply(this,arguments)}function xy(n){return IS.apply(this,arguments)}function IS(){return IS=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),IS.apply(this,arguments)}function LD(n,e){const t=qe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),CS(t)?bS(t):Ry(t).ko()&&DS(t,e))}function $w(n,e){const t=qe(n),r=Ry(t);t.du.delete(e),r.ko()&&$x(t,e),0===t.du.size&&(r.ko()?r.Fo():Uh(t)&&t.gu.set("Unknown"))}function DS(n,e){n.yu.Ot(e.targetId),Ry(n).zo(e)}function $x(n,e){n.yu.Ot(e),Ry(n).Ho(e)}function bS(n){n.yu=new vu({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Ry(n).start(),n.gu.uu()}function CS(n){return Uh(n)&&!Ry(n).No()&&n.du.size>0}function Uh(n){return 0===qe(n)._u.size}function Hx(n){n.yu=void 0}function EP(n){return TS.apply(this,arguments)}function TS(){return TS=(0,me.Z)(function*(n){n.du.forEach((e,t)=>{DS(n,e)})}),TS.apply(this,arguments)}function IP(n,e){return SS.apply(this,arguments)}function SS(){return SS=(0,me.Z)(function*(n,e){Hx(n),CS(n)?(n.gu.hu(e),bS(n)):n.gu.set("Unknown")}),SS.apply(this,arguments)}function DP(n,e,t){return AS.apply(this,arguments)}function AS(){return AS=(0,me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof vw&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i.du.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.du.delete(p),i.yu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield VD(n,r)}else if(e instanceof Oh?n.yu.Gt(e):e instanceof _u?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Mt.min()))try{const r=yield Nx(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.yu.te(u);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const I=i.du.get(_);I&&i.du.set(_,I.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const _=i.du.get(p);if(!_)return;i.du.set(p,_.withResumeToken(wr.EMPTY_BYTE_STRING,_.snapshotVersion)),$x(i,p);const I=new Nl(_.target,p,1,_.sequenceNumber);DS(i,I)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield VD(n,r)}var r}),AS.apply(this,arguments)}function VD(n,e,t){return MS.apply(this,arguments)}function MS(){return MS=(0,me.Z)(function*(n,e,t){if(!Dl(e))throw e;n._u.add(1),yield xy(n),n.gu.set("Offline"),t||(t=()=>Nx(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield jw(n)}))}),MS.apply(this,arguments)}function Gx(n,e){return e().catch(t=>VD(n,t,e))}function Ny(n){return xS.apply(this,arguments)}function xS(){return xS=(0,me.Z)(function*(n){const e=qe(n),t=Bh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;bP(e);)try{const i=yield lP(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,CP(e,i)}catch(i){yield VD(e,i)}zx(e)&&qx(e)}),xS.apply(this,arguments)}function bP(n){return Uh(n)&&n.fu.length<10}function CP(n,e){n.fu.push(e);const t=Bh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function zx(n){return Uh(n)&&!Bh(n).No()&&n.fu.length>0}function qx(n){Bh(n).start()}function TP(n){return NS.apply(this,arguments)}function NS(){return NS=(0,me.Z)(function*(n){Bh(n).eu()}),NS.apply(this,arguments)}function SP(n){return RS.apply(this,arguments)}function RS(){return RS=(0,me.Z)(function*(n){const e=Bh(n);for(const t of n.fu)e.Xo(t.mutations)}),RS.apply(this,arguments)}function AP(n,e,t){return OS.apply(this,arguments)}function OS(){return OS=(0,me.Z)(function*(n,e,t){const r=n.fu.shift(),i=Ey.from(r,e,t);yield Gx(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ny(n)}),OS.apply(this,arguments)}function MP(n,e){return PS.apply(this,arguments)}function PS(){return PS=(0,me.Z)(function*(n,e){var t;e&&Bh(n).Yo&&(yield(t=(0,me.Z)(function*(r,i){if(Hs(u=i.code)&&u!==de.ABORTED){const c=r.fu.shift();Bh(r).Oo(),yield Gx(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield Ny(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),zx(n)&&qx(n)}),PS.apply(this,arguments)}function Wx(n,e){return kS.apply(this,arguments)}function kS(){return kS=(0,me.Z)(function*(n,e){const t=qe(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=Uh(t);t._u.add(3),yield xy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield jw(t)}),kS.apply(this,arguments)}function FS(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,me.Z)(function*(n,e){const t=qe(n);e?(t._u.delete(2),yield jw(t)):e||(t._u.add(2),yield xy(t),t.gu.set("Unknown"))}),LS.apply(this,arguments)}function Ry(n){return n.pu||(n.pu=function(e,t,r){const i=qe(e);return i.su(),new mP(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:EP.bind(null,n),Zr:IP.bind(null,n),Wo:DP.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Oo(),CS(n)?bS(n):n.gu.set("Unknown")):(yield n.pu.stop(),Hx(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Bh(n){return n.Iu||(n.Iu=function(e,t,r){const i=qe(e);return i.su(),new yP(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:TP.bind(null,n),Zr:MP.bind(null,n),tu:SP.bind(null,n),Zo:AP.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Oo(),yield Ny(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class VS{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new VS(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Oy(n,e){if(tr("AsyncQueue",`${e}: ${n}`),Dl(n))return new xe(de.UNAVAILABLE,`${e}: ${n}`);throw n}class Py{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=ad(),this.sortedSet=new rr(this.comparator)}static emptySet(e){return new Py(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Py)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Py;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Zx{constructor(){this.Tu=new rr(Ge.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):tt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class ky{constructor(e,t,r,i,u,c,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const u=[];return t.forEach(c=>{u.push({type:0,doc:c})}),new ky(e,t,Py.emptySet(t),u,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&xh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class xP{constructor(){this.Au=void 0,this.listeners=[]}}class NP{constructor(){this.queries=new pa(e=>fw(e),xh),this.onlineState="Unknown",this.Ru=new Set}}function US(n,e){return BS.apply(this,arguments)}function BS(){return BS=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new xP),i)try{u.Au=yield t.onListen(r)}catch(c){const p=Oy(c,`Initialization of query '${ly(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&HS(t)}),BS.apply(this,arguments)}function jS(n,e){return $S.apply(this,arguments)}function $S(){return $S=(0,me.Z)(function*(n,e){const t=qe(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),$S.apply(this,arguments)}function RP(n,e){const t=qe(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Pu(i)&&(r=!0);c.Au=i}}r&&HS(t)}function OP(n,e,t){const r=qe(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function HS(n){n.Ru.forEach(e=>{e.next()})}class GS{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new ky(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=ky.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class PP{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class Kx{constructor(e){this.It=e}Ji(e){return Gs(this.It,e)}Yi(e){return e.metadata.exists?Lp(this.It,e.document,!1):In.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Mr(e)}}class kP{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Yx(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new Kx(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||Ut()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function cP(n,e,t,r){return pS.apply(this,arguments)}(e.localStore,new Kx(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield dP(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function Yx(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Qx{constructor(e){this.key=e}}class Jx{constructor(e){this.key=e}}class Xx{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Ut(),this.mutatedKeys=Ut(),this.Ku=MT(e),this.Gu=new Py(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new Zx,i=t?t.Gu:this.Gu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,I="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,M)=>{const L=i.get(T),G=pw(this.query,M)?M:null,K=!!L&&this.mutatedKeys.has(L.key),ue=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Ie=!1;L&&G?L.data.isEqual(G.data)?K!==ue&&(r.track({type:3,doc:G}),Ie=!0):this.zu(L,G)||(r.track({type:2,doc:G}),Ie=!0,(_&&this.Ku(G,_)>0||I&&this.Ku(G,I)<0)&&(p=!0)):!L&&G?(r.track({type:0,doc:G}),Ie=!0):L&&!G&&(r.track({type:1,doc:L}),Ie=!0,(_||I)&&(p=!0)),Ie&&(G?(c=c.add(G),u=ue?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Gu:c,Wu:r,$i:p,mutatedKeys:u}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const u=e.Wu.Eu();u.sort((I,T)=>function(M,L){const G=K=>{switch(K){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt()}};return G(M)-G(L)}(I.type,T.type)||this.Ku(I.doc,T.doc)),this.Hu(r);const c=t?this.Ju():[],p=0===this.qu.size&&this.current?1:0,_=p!==this.Uu;return this.Uu=p,0!==u.length||_?{snapshot:new ky(this.query,e.Gu,i,u,e.mutatedKeys,0===p,_,!1),Yu:c}:{Yu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new Zx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Ut(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new Jx(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new Qx(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Ut();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return ky.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class FP{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class LP{constructor(e){this.key=e,this.ec=!1}}class VP{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.nc={},this.sc=new pa(p=>fw(p),xh),this.ic=new Map,this.rc=new Set,this.oc=new rr(Ge.comparator),this.uc=new Map,this.cc=new aS,this.ac={},this.hc=new Map,this.lc=wu.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function UP(n,e){return zS.apply(this,arguments)}function zS(){return zS=(0,me.Z)(function*(n,e){const t=pA(n);let r,i;const u=t.sc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.tc();else{const c=yield Ay(t.localStore,qi(e));t.isPrimaryClient&&LD(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield qS(t,e,r,"current"===p)}return i}),zS.apply(this,arguments)}function qS(n,e,t,r){return WS.apply(this,arguments)}function WS(){return WS=(0,me.Z)(function*(n,e,t,r){n.dc=(T,M,L)=>{return(G=(0,me.Z)(function*(K,ue,Ie,We){let nt=ue.view.ju(Ie);nt.$i&&(nt=yield OD(K.localStore,ue.query,!1).then(({documents:Tt})=>ue.view.ju(Tt,nt)));const mt=We&&We.targetChanges.get(ue.targetId),at=ue.view.applyChanges(nt,K.isPrimaryClient,mt);return rA(K,ue.targetId,at.Yu),at.snapshot}),function(K,ue,Ie,We){return G.apply(this,arguments)})(n,T,M,L);var G};const i=yield OD(n.localStore,e,!0),u=new Xx(e,i.Hi),c=u.ju(i.documents),p=kp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=u.applyChanges(c,n.isPrimaryClient,p);rA(n,t,_.Yu);const I=new FP(e,t,u);return n.sc.set(e,I),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),_.snapshot}),WS.apply(this,arguments)}function BP(n,e){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,me.Z)(function*(n,e){const t=qe(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(u=>!xh(u,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield My(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),$w(t.remoteStore,r.targetId),Fy(t,r.targetId)}).catch(pu))):(Fy(t,r.targetId),yield My(t.localStore,r.targetId,!0))}),ZS.apply(this,arguments)}function KS(){return KS=(0,me.Z)(function*(n,e,t){const r=gA(n);try{const i=yield function(u,c){const p=qe(u),_=Ln.now(),I=c.reduce((L,G)=>L.add(G.key),Ut());let T,M;return p.persistence.runTransaction("Locally write mutations","readwrite",L=>{let G=Mn(),K=Ut();return p.Gi.getEntries(L,I).next(ue=>{G=ue,G.forEach((Ie,We)=>{We.isValidDocument()||(K=K.add(Ie))})}).next(()=>p.localDocuments.getOverlayedDocuments(L,G)).next(ue=>{T=ue;const Ie=[];for(const We of c){const nt=VT(We,T.get(We.key).overlayedDocument);null!=nt&&Ie.push(new xl(We.key,nt,oy(nt.value.mapValue),An.exists(!0)))}return p.mutationQueue.addMutationBatch(L,_,Ie,c)}).next(ue=>{M=ue;const Ie=ue.applyToLocalDocumentSet(T,K);return p.documentOverlayCache.saveOverlays(L,ue.batchId,Ie)})}).then(()=>({batchId:M.batchId,changes:fD(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let _=u.ac[u.currentUser.toKey()];_||(_=new rr(Lt)),_=_.insert(c,p),u.ac[u.currentUser.toKey()]=_}(r,i.batchId,t),yield cd(r,i.changes),yield Ny(r.remoteStore)}catch(i){const u=Oy(i,"Failed to persist write");t.reject(u)}}),KS.apply(this,arguments)}function eN(n,e){return YS.apply(this,arguments)}function YS(){return YS=(0,me.Z)(function*(n,e){const t=qe(n);try{const r=yield uP(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.uc.get(u);c&&(Nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.ec=!0:i.modifiedDocuments.size>0?Nt(c.ec):i.removedDocuments.size>0&&(Nt(c.ec),c.ec=!1))}),yield cd(t,r,e)}catch(r){yield pu(r)}}),YS.apply(this,arguments)}function tN(n,e,t){const r=qe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((u,c)=>{const p=c.view.bu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=qe(u);p.onlineState=c;let _=!1;p.queries.forEach((I,T)=>{for(const M of T.listeners)M.bu(c)&&(_=!0)}),_&&HS(p)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $P(n,e,t){return QS.apply(this,arguments)}function QS(){return QS=(0,me.Z)(function*(n,e,t){const r=qe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),u=i&&i.key;if(u){let c=new rr(Ge.comparator);c=c.insert(u,In.newNoDocument(u,Mt.min()));const p=Ut().add(u),_=new Rh(Mt.min(),new Map,new gn(Lt),c,p);yield eN(r,_),r.oc=r.oc.remove(u),r.uc.delete(e),iA(r)}else yield My(r.localStore,e,!1).then(()=>Fy(r,e,t)).catch(pu)}),QS.apply(this,arguments)}function HP(n,e){return JS.apply(this,arguments)}function JS(){return JS=(0,me.Z)(function*(n,e){const t=qe(n),r=e.batch.batchId;try{const i=yield aP(t.localStore,e);nA(t,r,null),tA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield cd(t,i)}catch(i){yield pu(i)}}),JS.apply(this,arguments)}function GP(n,e,t){return XS.apply(this,arguments)}function XS(){return XS=(0,me.Z)(function*(n,e,t){const r=qe(n);try{const i=yield function(u,c){const p=qe(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return p.mutationQueue.lookupMutationBatch(_,c).next(T=>(Nt(null!==T),I=T.keys(),p.mutationQueue.removeMutationBatch(_,T))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,I,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>p.localDocuments.getDocuments(_,I))})}(r.localStore,e);nA(r,e,t),tA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield cd(r,i)}catch(i){yield pu(i)}}),XS.apply(this,arguments)}function eA(){return eA=(0,me.Z)(function*(n,e){const t=qe(n);Uh(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=qe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=Oy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),eA.apply(this,arguments)}function tA(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function nA(n,e,t){const r=qe(n);let i=r.ac[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function Fy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||nN(n,r)})}function nN(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&($w(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),iA(n))}function rA(n,e,t){for(const r of t)r instanceof Qx?(n.cc.addReference(r.key,e),qP(n,r)):r instanceof Jx?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||nN(n,r.key)):tt()}function qP(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.rc.add(r),iA(n))}function iA(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new Ge(Jt.fromString(e)),r=n.lc.next();n.uc.set(r,new LP(t)),n.oc=n.oc.insert(t,r),LD(n.remoteStore,new Nl(qi(Mh(t.path)),r,2,hi.at))}}function cd(n,e,t){return sA.apply(this,arguments)}function sA(){return sA=(0,me.Z)(function*(n,e,t){const r=qe(n),i=[],u=[],c=[];var p;r.sc.isEmpty()||(r.sc.forEach((p,_)=>{c.push(r.dc(_,e,t).then(I=>{if(I){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,I.fromCache?"not-current":"current"),i.push(I);const T=dS.Ci(_.targetId,I);u.push(T)}}))}),yield Promise.all(c),r.nc.Wo(i),yield(p=(0,me.Z)(function*(_,I){const T=qe(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>oe.forEach(I,L=>oe.forEach(L.Si,G=>T.persistence.referenceDelegate.addReference(M,L.targetId,G)).next(()=>oe.forEach(L.Di,G=>T.persistence.referenceDelegate.removeReference(M,L.targetId,G)))))}catch(M){if(!Dl(M))throw M;ke("LocalStore","Failed to update sequence numbers: "+M)}for(const M of I){const L=M.targetId;if(!M.fromCache){const G=T.Ui.get(L),ue=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);T.Ui=T.Ui.insert(L,ue)}}}),function(_,I){return p.apply(this,arguments)})(r.localStore,u))}),sA.apply(this,arguments)}function WP(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,me.Z)(function*(n,e){const t=qe(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield xx(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(c=>{c.forEach(p=>{p.reject(new xe(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield cd(t,r.ji)}var i}),oA.apply(this,arguments)}function ZP(n,e){const t=qe(n),r=t.uc.get(e);if(r&&r.ec)return Ut().add(r.key);{let i=Ut();const u=t.ic.get(e);if(!u)return i;for(const c of u){const p=t.sc.get(c);i=i.unionWith(p.view.Qu)}return i}}function KP(n,e){return aA.apply(this,arguments)}function aA(){return aA=(0,me.Z)(function*(n,e){const t=qe(n),r=yield OD(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&rA(t,e.targetId,i.Yu),i}),aA.apply(this,arguments)}function YP(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,me.Z)(function*(n,e){const t=qe(n);return Px(t.localStore,e).then(r=>cd(t,r))}),uA.apply(this,arguments)}function QP(n,e,t,r){return lA.apply(this,arguments)}function lA(){return lA=(0,me.Z)(function*(n,e,t,r){const i=qe(n),u=yield function(c,p){const _=qe(c),I=qe(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>I.Tn(T,p).next(M=>M?_.localDocuments.getDocuments(T,M):oe.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield Ny(i.remoteStore):"acknowledged"===t||"rejected"===t?(nA(i,e,r||null),tA(i,e),p=e,qe(qe(i.localStore).mutationQueue).An(p)):tt(),yield cd(i,u)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),lA.apply(this,arguments)}function cA(){return cA=(0,me.Z)(function*(n,e){const t=qe(n);if(pA(t),gA(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield rN(t,r.toArray());t.fc=!0,yield FS(t.remoteStore,!0);for(const u of i)LD(t.remoteStore,u)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Fy(t,c),My(t.localStore,c,!0))),$w(t.remoteStore,c)}),yield i,yield rN(t,r),function(u){const c=qe(u);c.uc.forEach((p,_)=>{$w(c.remoteStore,_)}),c.cc.fs(),c.uc=new Map,c.oc=new rr(Ge.comparator)}(t),t.fc=!1,yield FS(t.remoteStore,!1)}}),cA.apply(this,arguments)}function rN(n,e,t){return dA.apply(this,arguments)}function dA(){return dA=(0,me.Z)(function*(n,e,t){const r=qe(n),i=[],u=[];for(const c of e){let p;const _=r.ic.get(c);if(_&&0!==_.length){p=yield Ay(r.localStore,qi(_[0]));for(const I of _){const T=r.sc.get(I),M=yield KP(r,T);M.snapshot&&u.push(M.snapshot)}}else{const I=yield Ox(r.localStore,c);p=yield Ay(r.localStore,I),yield qS(r,iN(I),c,!1)}i.push(p)}return r.nc.Wo(u),i}),dA.apply(this,arguments)}function iN(n){return lw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function XP(n){const e=qe(n);return qe(qe(e.localStore).persistence).vi()}function e1(n,e,t,r){return hA.apply(this,arguments)}function hA(){return hA=(0,me.Z)(function*(n,e,t,r){const i=qe(n);if(i.fc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const u=i.ic.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield Px(i.localStore,rD(u[0])),p=Rh.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield cd(i,c,p);break}case"rejected":yield My(i.localStore,e,!0),Fy(i,e,r);break;default:tt()}}),hA.apply(this,arguments)}function t1(n,e,t){return fA.apply(this,arguments)}function fA(){return fA=(0,me.Z)(function*(n,e,t){const r=pA(n);if(r.fc){for(const i of e){if(r.ic.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const u=yield Ox(r.localStore,i),c=yield Ay(r.localStore,u);yield qS(r,iN(u),c.targetId,!1),LD(r.remoteStore,c)}for(const i of t)r.ic.has(i)&&(yield My(r.localStore,i,!1).then(()=>{$w(r.remoteStore,i),Fy(r,i)}).catch(pu))}}),fA.apply(this,arguments)}function pA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=eN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$P.bind(null,e),e.nc.Wo=RP.bind(null,e.eventManager),e.nc._c=OP.bind(null,e.eventManager),e}function gA(n){const e=qe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=HP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GP.bind(null,e),e}class sN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.It=Bw(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Mx(this.persistence,new Ax,e.initialUser,this.It)}gc(e){return new Tx(ND.Bs,this.It)}mc(e){return new Vx}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class oN extends sN{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield gA(r.Ec.syncEngine),yield Ny(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Mx(this.persistence,new Ax,e.initialUser,this.It)}Ic(e,t){return new qO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new IT(t,this.persistence);return new ca(e.asyncQueue,r)}gc(e){const t=cS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?xt.withCacheSize(this.cacheSizeBytes):xt.DEFAULT;return new lS(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Bx(),FD(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new Vx}}class r1 extends oN{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof vS&&(r.sharedClientState.syncEngine={Fr:QP.bind(null,i),$r:e1.bind(null,i),Br:t1.bind(null,i),vi:XP.bind(null,i),Or:YP.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,me.Z)(function*(c){yield function JP(n,e){return cA.apply(this,arguments)}(r.Ec.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}mc(e){const t=Bx();if(!vS.C(t))throw new xe(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class mA{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>tN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=WP.bind(null,r.syncEngine),yield FS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new NP}createDatastore(e){const t=Bw(e.databaseInfo.databaseId),r=new gP(e.databaseInfo);return new _P(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>tN(this.syncEngine,p,0),c=Ux.C()?new Ux:new hP,new wP(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,_,I){const T=new VP(r,i,u,c,p,_);return I&&(T.fc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=qe(t);ke("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield xy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function aN(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class UD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):tr("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class i1{constructor(e,t){this.bc=e,this.It=t,this.metadata=new jr,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const u=yield e.Dc(i);return new PP(JSON.parse(u),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,me.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,me.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class s1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(u,c){const p=qe(u),_=Ph(p.It)+"/documents",I={documents:c.map(G=>py(p.It,G))},T=yield p.fo("BatchGetDocuments",_,I,c.length),M=new Map;T.forEach(G=>{const K=function my(n,e){return"found"in e?function(t,r){Nt(!!r.found);const i=Gs(t,r.found.name),u=Mr(r.found.updateTime),c=new ti({mapValue:{fields:r.found.fields}});return In.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){Nt(!!r.missing),Nt(!!r.readTime);const i=Gs(t,r.missing),u=Mr(r.readTime);return In.newNoDocument(i,u)}(n,e):tt()}(p.It,G);M.set(K.key.toString(),K)});const L=[];return c.forEach(G=>{const K=M.get(G.toString());Nt(!!K),L.push(K)}),L}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Pp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=Ge.fromPath(i);e.mutations.push(new _w(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(i,u){const c=qe(i),p=Ph(c.It)+"/documents",_={writes:u.map(I=>Vp(c.It,I))};yield c.co("Commit",p,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw tt();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?An.exists(!1):An.updateTime(t):An.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new xe(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return An.updateTime(t)}return An.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class o1{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Nc=r.maxAttempts,this.xo=new wS(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,me.Z)(function*(){const t=new s1(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Oc(u)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Ip(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Hs(t)}return!1}}class a1{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ar.UNAUTHENTICATED,this.clientId=Jv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,me.Z)(function*(p){ke("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ke("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Oy(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function uN(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(u){r.isEqual(u)||(yield xx(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),yA.apply(this,arguments)}function lN(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield vA(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>Wx(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>Wx(e.remoteStore,u)),n.onlineComponents=e}),_A.apply(this,arguments)}function vA(n){return wA.apply(this,arguments)}function wA(){return wA=(0,me.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield uN(n,new sN)),n.offlineComponents}),wA.apply(this,arguments)}function BD(n){return EA.apply(this,arguments)}function EA(){return EA=(0,me.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield lN(n,new mA)),n.onlineComponents}),EA.apply(this,arguments)}function cN(n){return vA(n).then(e=>e.persistence)}function jD(n){return vA(n).then(e=>e.localStore)}function dN(n){return BD(n).then(e=>e.remoteStore)}function IA(n){return BD(n).then(e=>e.syncEngine)}function Ly(n){return DA.apply(this,arguments)}function DA(){return DA=(0,me.Z)(function*(n){const e=yield BD(n),t=e.eventManager;return t.onListen=UP.bind(null,e.syncEngine),t.onUnlisten=BP.bind(null,e.syncEngine),t}),DA.apply(this,arguments)}function hN(n,e,t={}){const r=new jr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,p,_){const I=new UD({next:M=>{u.enqueueAndForget(()=>jS(i,T));const L=M.docs.has(c);!L&&M.fromCache?_.reject(new xe(de.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&p&&"server"===p.source?_.reject(new xe(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),T=new GS(Mh(c.path),I,{includeMetadataChanges:!0,Nu:!0});return US(i,T)}(yield Ly(n),n.asyncQueue,e,t,r)})),r.promise}function fN(n,e,t={}){const r=new jr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,u,c,p,_){const I=new UD({next:M=>{u.enqueueAndForget(()=>jS(i,T)),M.fromCache&&"server"===p.source?_.reject(new xe(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),T=new GS(c,I,{includeMetadataChanges:!0,Nu:!0});return US(i,T)}(yield Ly(n),n.asyncQueue,e,t,r)})),r.promise}const pN=new Map;function bA(n,e,t){if(!t)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gN(n,e,t,r){if(!0===e&&!0===r)throw new xe(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mN(n){if(!Ge.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yN(n){if(Ge.isDocumentKey(n))throw new xe(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $D(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":tt()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=$D(n);throw new xe(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function _N(n,e){if(e<=0)throw new xe(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class vN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,gN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hw{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Qv;switch(t.type){case"gapi":return new BI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=pN.get(e);t&&(ke("ComponentProvider","Removing Datastore"),pN.delete(e),t.terminate())}(this),Promise.resolve()}}class qn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qn(this.firestore,e,this._key)}}class Wi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Wi(this.firestore,e,this._query)}}class Pl extends Wi{constructor(e,t,r){super(e,t,Mh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qn(this.firestore,null,new Ge(e))}withConverter(e){return new Pl(this.firestore,e,this._path)}}function wN(n,e,...t){if(n=(0,Bt.m9)(n),bA("collection","path",e),n instanceof Hw){const r=Jt.fromString(e,...t);return yN(r),new Pl(n,null,r)}{if(!(n instanceof qn||n instanceof Pl))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return yN(r),new Pl(n.firestore,null,r)}}function HD(n,e,...t){if(n=(0,Bt.m9)(n),1===arguments.length&&(e=Jv.R()),bA("doc","path",e),n instanceof Hw){const r=Jt.fromString(e,...t);return mN(r),new qn(n,null,new Ge(r))}{if(!(n instanceof qn||n instanceof Pl))throw new xe(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return mN(r),new qn(n.firestore,n instanceof Pl?n.converter:null,new Ge(r))}}function EN(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),(n instanceof qn||n instanceof Pl)&&(e instanceof qn||e instanceof Pl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IN(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),n instanceof Wi&&e instanceof Wi&&n.firestore===e.firestore&&xh(n._query,e._query)&&n.converter===e.converter}class _1{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new wS(this,"async_queue_retry"),this.jc=()=>{const t=FD();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=FD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=FD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new jr;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Dl(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,tr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=VS.createAndSchedule(this,e,t,r,u=>this.Jc(u));return this.Uc.push(i),i}Wc(){this.qc&&tt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function CA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class v1{constructor(){this._progressObserver={},this._taskCompletionResolver=new jr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ir extends Hw{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new _1,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||DN(this),this._firestoreClient.terminate()}}function $r(n){return n._firestoreClient||DN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function DN(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ow(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new a1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function bN(n,e,t){const r=new jr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield uN(n,t),yield lN(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(c=u).name?c.code===de.FAILED_PRECONDITION||c.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;$s("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function CN(n){if(n._initialized||n._terminated)throw new xe(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class dd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class kl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kl(wr.fromBase64String(e))}catch(t){throw new xe(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new kl(wr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $p{constructor(e){this._methodName=e}}class GD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Lt(this._lat,e._lat)||Lt(this._long,e._long)}}const M1=/^__.*__$/;class x1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new xl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Op(e,this.data,t,this.fieldTransforms)}}class TN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function SN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt()}}class zD{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ea(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new zD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return ZD(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(SN(this.na)&&M1.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class N1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Bw(e)}fa(e,t,r,i=!1){return new zD({na:e,methodName:t,la:r,path:nr.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Hp(n){const e=n._freezeSettings(),t=Bw(n._databaseId);return new N1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qD(n,e,t,r,i,u={}){const c=n.fa(u.merge||u.mergeFields?2:0,e,t,i);MA("Data must be an object, but it was:",c,r);const p=xN(r,c);let _,I;if(u.merge)_=new zi(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const M of u.mergeFields){const L=xA(e,M,t);if(!c.contains(L))throw new xe(de.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);RN(T,L)||T.push(L)}_=new zi(T),I=c.fieldTransforms.filter(M=>_.covers(M.field))}else _=null,I=c.fieldTransforms;return new x1(new ti(p),_,I)}class Gw extends $p{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Gw}}function AN(n,e,t){return new zD({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class TA extends $p{_toFieldTransform(e){return new od(e.path,new Np)}isEqual(e){return e instanceof TA}}class R1 extends $p{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=AN(this,e,!0),r=this.da.map(u=>Gp(u,t)),i=new fa(r);return new od(e.path,i)}isEqual(e){return this===e}}class O1 extends $p{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=AN(this,e,!0),r=this.da.map(u=>Gp(u,t)),i=new Al(r);return new od(e.path,i)}isEqual(e){return this===e}}class P1 extends $p{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new sd(e.It,RT(e.It,this._a));return new od(e.path,t)}isEqual(e){return this===e}}function SA(n,e,t,r){const i=n.fa(1,e,t);MA("Data must be an object, but it was:",i,r);const u=[],c=ti.empty();Zc(r,(_,I)=>{const T=WD(e,_,t);I=(0,Bt.m9)(I);const M=i.ua(T);if(I instanceof Gw)u.push(T);else{const L=Gp(I,M);null!=L&&(u.push(T),c.set(T,L))}});const p=new zi(u);return new TN(c,p,i.fieldTransforms)}function AA(n,e,t,r,i,u){const c=n.fa(1,e,t),p=[xA(e,r,t)],_=[i];if(u.length%2!=0)throw new xe(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)p.push(xA(e,u[L])),_.push(u[L+1]);const I=[],T=ti.empty();for(let L=p.length-1;L>=0;--L)if(!RN(I,p[L])){const G=p[L];let K=_[L];K=(0,Bt.m9)(K);const ue=c.ua(G);if(K instanceof Gw)I.push(G);else{const Ie=Gp(K,ue);null!=Ie&&(I.push(G),T.set(G,Ie))}}const M=new zi(I);return new TN(T,M,c.fieldTransforms)}function MN(n,e,t,r=!1){return Gp(t,n.fa(r?4:3,e))}function Gp(n,e){if(NN(n=(0,Bt.m9)(n)))return MA("Unsupported field value:",e,n),xN(n,e);if(n instanceof $p)return function(t,r){if(!SN(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=Gp(c,r.ca(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,Bt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return RT(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ln.fromDate(t);return{timestampValue:Fp(r.It,i)}}if(t instanceof Ln){const i=new Ln(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Fp(r.It,i)}}if(t instanceof GD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof kl)return{bytesValue:ww(r.It,t._byteString)};if(t instanceof qn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.aa(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ew(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${$D(t)}`)}(n,e)}function xN(n,e){const t={};return zI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zc(n,(r,i)=>{const u=Gp(i,e.ia(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function NN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof GD||n instanceof kl||n instanceof qn||n instanceof $p)}function MA(n,e,t){if(!NN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=$D(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function xA(n,e,t){if((e=(0,Bt.m9)(e))instanceof dd)return e._internalPath;if("string"==typeof e)return WD(n,e);throw ZD("Field path arguments must be of type string or ",n,!1,void 0,t)}const k1=new RegExp("[~\\*/\\[\\]]");function WD(n,e,t){if(e.search(k1)>=0)throw ZD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dd(...e.split("."))._internalPath}catch{throw ZD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ZD(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new xe(de.INVALID_ARGUMENT,p+n+_)}function RN(n,e){return n.some(t=>t.isEqual(e))}class zw{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new qn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new F1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(KD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class F1 extends zw{data(){return super.data()}}function KD(n,e){return"string"==typeof e?WD(n,e):e instanceof dd?e._internalPath:e._delegate._internalPath}class zp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hd extends zw{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(KD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class qw extends hd{data(e={}){return super.data(e)}}class jh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new qw(this._firestore,this._userDataWriter,r.key,r,new zp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new qw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new zp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new qw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new zp(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:L1(c.type),doc:p,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function L1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt()}}function ON(n,e){return n instanceof hd&&e instanceof hd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof jh&&e instanceof jh&&n._firestore===e._firestore&&IN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function PN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ww{}function $h(n,...e){for(const t of e)n=t._apply(n);return n}class V1 extends Ww{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=Hp(e.firestore),r=function(i,u,c,p,_,I,T){let M;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){BN(T,I);const G=[];for(const K of T)G.push(UN(p,i,K));M={arrayValue:{values:G}}}else M=UN(p,i,T)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||BN(T,I),M=MN(c,"where",T,"in"===I||"not-in"===I);const L=pi.create(_,I,M);return function(G,K){if(K.dt()){const Ie=dw(G);if(null!==Ie&&!Ie.isEqual(K.field))throw new xe(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ie.toString()}' and '${K.field.toString()}'`);const We=uy(G);null!==We&&jN(0,K.field,We)}const ue=function(Ie,We){for(const nt of Ie.filters)if(We.indexOf(nt.op)>=0)return nt.op;return null}(G,function(Ie){switch(Ie){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(K.op));if(null!==ue)throw new xe(de.INVALID_ARGUMENT,ue===K.op?`Invalid query. You cannot use more than one '${K.op.toString()}' filter.`:`Invalid query. You cannot use '${K.op.toString()}' filters with '${ue.toString()}' filters.`)}(i,L),L}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new Wi(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new ha(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class B1 extends Ww{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Mp(i,u);return function(p,_){if(null===uy(p)){const I=dw(p);null!==I&&jN(0,I,_.field)}}(r,c),c}(e._query,this.wa,this.ya);return new Wi(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new ha(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class kN extends Ww{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new Wi(e.firestore,e.converter,xp(e._query,this.pa,this.Ia))}}class FN extends Ww{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=VN(e,this.type,this.Ta,this.Ea);return new Wi(e.firestore,e.converter,(i=t,new ha((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class LN extends Ww{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=VN(e,this.type,this.Ta,this.Ea);return new Wi(e.firestore,e.converter,(i=t,new ha((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function VN(n,e,t,r){if(t[0]=(0,Bt.m9)(t[0]),t[0]instanceof zw)return function(i,u,c,p,_){if(!p)throw new xe(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const T of id(i))if(T.field.isKeyField())I.push(Xc(u,p.key));else{const M=p.data.field(T.field);if(Ep(M))throw new xe(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=T.field.canonicalString();throw new xe(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(M)}return new Sl(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Hp(n.firestore);return function(u,c,p,_,I,T){const M=u.explicitOrderBy;if(I.length>M.length)throw new xe(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<I.length;G++){const K=I[G];if(M[G].field.isKeyField()){if("string"!=typeof K)throw new xe(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof K}`);if(!hw(u)&&-1!==K.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${K}' contains a slash.`);const ue=u.path.child(Jt.fromString(K));if(!Ge.isDocumentKey(ue))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ue}' is not because it contains an odd number of segments.`);const Ie=new Ge(ue);L.push(Xc(c,Ie))}else{const ue=MN(p,_,K);L.push(ue)}}return new Sl(L,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function UN(n,e,t){if("string"==typeof(t=(0,Bt.m9)(t))){if(""===t)throw new xe(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hw(e)&&-1!==t.indexOf("/"))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ge.isDocumentKey(r))throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Xc(n,new Ge(r))}if(t instanceof qn)return Xc(n,t._key);throw new xe(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$D(t)}.`)}function BN(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new xe(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function jN(n,e,t){if(!t.isEqual(e))throw new xe(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const Z1={maxAttempts:5};class NA{convertValue(e,t="none"){switch(Tl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw tt()}}convertObject(e,t){const r={};return Zc(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new GD(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=sw(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Qc(e));default:return null}}convertTimestamp(e){const t=bl(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);Nt(KT(r));const i=new Cl(r.get(1),r.get(3)),u=new Ge(r.popFirst(5));return i.isEqual(t)||tr(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function YD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class K1 extends NA{constructor(e){super(),this.firestore=e}convertBytes(e){return new kl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}class $N{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hp(e)}set(e,t,r){this._verifyNotCommitted();const i=Hh(e,this._firestore),u=YD(i.converter,t,r),c=qD(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,An.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=Hh(e,this._firestore);let c;return c="string"==typeof(t=(0,Bt.m9)(t))||t instanceof dd?AA(this._dataReader,"WriteBatch.update",u._key,t,r,i):SA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,An.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Hh(e,this._firestore);return this._mutations=this._mutations.concat(new Pp(t._key,An.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Hh(n,e){if((n=(0,Bt.m9)(n)).firestore!==e)throw new xe(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class qp extends NA{constructor(e){super(),this.firestore=e}convertBytes(e){return new kl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qn(this.firestore,null,t)}}function HN(n,e,t){n=tn(n,qn);const r=tn(n.firestore,ir),i=YD(n.converter,e,t);return Vy(r,[qD(Hp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,An.none())])}function GN(n,e,t,...r){n=tn(n,qn);const i=tn(n.firestore,ir),u=Hp(i);let c;return c="string"==typeof(e=(0,Bt.m9)(e))||e instanceof dd?AA(u,"updateDoc",n._key,e,t,r):SA(u,"updateDoc",n._key,e),Vy(i,[c.toMutation(n._key,An.exists(!0))])}function zN(n,...e){var t,r,i;n=(0,Bt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||CA(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(CA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let _,I,T;if(n instanceof qn)I=tn(n.firestore,ir),T=Mh(n._key.path),_={next:M=>{e[c]&&e[c](RA(I,n,M))},error:e[c+1],complete:e[c+2]};else{const M=tn(n,Wi);I=tn(M.firestore,ir),T=M._query;const L=new qp(I);_={next:G=>{e[c]&&e[c](new jh(I,L,M,G))},error:e[c+1],complete:e[c+2]},PN(n._query)}return function(M,L,G,K){const ue=new UD(K),Ie=new GS(L,ue,G);return M.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return US(yield Ly(M),Ie)})),()=>{ue.Rc(),M.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return jS(yield Ly(M),Ie)}))}}($r(I),T,p,_)}function Vy(n,e){return function(t,r){const i=new jr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function jP(n,e,t){return KS.apply(this,arguments)}(yield IA(t),r,i)})),i.promise}($r(n),e)}function RA(n,e,t){const r=t.docs.get(e._key),i=new qp(n);return new hd(n,i,e._key,r,new zp(t.hasPendingWrites,t.fromCache),e.converter)}class sk extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hp(e)}get(e){const t=Hh(e,this._firestore),r=new K1(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return tt();const u=i[0];if(u.isFoundDocument())return new zw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new zw(this._firestore,r,t._key,null,t.converter);throw tt()})}set(e,t,r){const i=Hh(e,this._firestore),u=YD(i.converter,t,r),c=qD(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=Hh(e,this._firestore);let c;return c="string"==typeof(t=(0,Bt.m9)(t))||t instanceof dd?AA(this._dataReader,"Transaction.update",u._key,t,r,i):SA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Hh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Hh(e,this._firestore),r=new qp(this._firestore);return super.get(e).then(i=>new hd(this._firestore,r,t._key,i._document,new zp(!1,!1),t.converter))}}function OA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function WN(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function ZN(){if(!function iw(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){El=wo.SDK_VERSION,(0,wo._registerComponent)(new Cr.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new ir(new VI(t.getProvider("auth-internal")),new gT(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new xe(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(p.options.projectId,_)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,wo.registerVersion)(Qm,"3.4.15",n),(0,wo.registerVersion)(Qm,"3.4.15","esm2017")}();class Zw{constructor(e){this._delegate=e}static fromBase64String(e){return ZN(),new Zw(kl.fromBase64String(e))}static fromUint8Array(e){return WN(),new Zw(kl.fromUint8Array(e))}toBase64(){return ZN(),this._delegate.toBase64()}toUint8Array(){return WN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function PA(n){return function pk(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class gk{enableIndexedDbPersistence(e,t){return function E1(n,e){CN(n=tn(n,ir));const t=$r(n),r=n._freezeSettings(),i=new mA;return bN(t,i,new oN(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function I1(n){CN(n=tn(n,ir));const e=$r(n),t=n._freezeSettings(),r=new mA;return bN(e,r,new r1(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function D1(n){if(n._initialized&&!n._terminated)throw new xe(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new jr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Do.C())return Promise.resolve();const i=r+"main";yield Do.delete(i)}),function(r){return t.apply(this,arguments)})(cS(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class KN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Cl||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$s("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function m1(n,e,t,r={}){var i;const u=(n=tn(n,Hw))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&$s("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Ar.MOCK_USER;else{c=(0,Bt.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new xe(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ar(_)}n._authCredentials=new LI(new Yv(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function C1(n){return function u1(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield cN(n),t=yield dN(n);return e.setNetworkEnabled(!0),function(r){const i=qe(r);return i._u.delete(0),jw(i)}(t)}))}($r(n=tn(n,ir)))}(this._delegate)}disableNetwork(){return function T1(n){return function l1(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield cN(n),t=yield dN(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const u=qe(i);u._u.add(0),yield xy(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}($r(n=tn(n,ir)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function b1(n){return function(e){const t=new jr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function zP(n,e){return eA.apply(this,arguments)}(yield IA(e),t)})),t.promise}($r(n=tn(n,ir)))}(this._delegate)}onSnapshotsInSync(e){return function ik(n,e){return function h1(n,e){const t=new UD(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Ly(n),i=t,qe(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Ly(n),i=t,void qe(r).Ru.delete(i);var r,i}))}}($r(n=tn(n,ir)),CA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Uy(this,wN(this._delegate,e))}catch(t){throw hs(t,"collection()","Firestore.collection()")}}doc(e){try{return new wa(this,HD(this._delegate,e))}catch(t){throw hs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fs(this,function y1(n,e){if(n=tn(n,Hw),bA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Wi(n,null,(t=e,new ha(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw hs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function ok(n,e,t){n=tn(n,ir);const r=Object.assign(Object.assign({},Z1),t);return function(i){if(i.maxAttempts<1)throw new xe(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function f1(n,e,t){const r=new jr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const i=yield(u=n,BD(u).then(c=>c.datastore));var u;new o1(n.asyncQueue,i,t,e,r).run()})),r.promise}($r(n),i=>e(new sk(n,i)),r)}(this._delegate,t=>e(new YN(this,t)))}batch(){return $r(this._delegate),new QN(new $N(this._delegate,e=>Vy(this._delegate,e)))}loadBundle(e){return function S1(n,e){const t=$r(n=tn(n,ir)),r=new v1;return function p1(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return aN(_,I);if(_ instanceof ArrayBuffer)return aN(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new i1(_,c);var _}(t,Bw(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function n1(n,e,t){const r=qe(n);var i;(i=(0,me.Z)(function*(u,c,p){try{const _=yield c.getMetadata();if(yield function(L,G){const K=qe(L),ue=Mr(G.createTime);return K.persistence.runTransaction("hasNewerBundle","readonly",Ie=>K.Ns.getBundleMetadata(Ie,G.id)).then(Ie=>!!Ie&&Ie.createTime.compareTo(ue)>=0)}(u.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(L=_).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);p._updateProgress(Yx(_));const I=new kP(_,u.localStore,c.It);let T=yield c.wc();for(;T;){const L=yield I.Ou(T);L&&p._updateProgress(L),T=yield c.wc()}const M=yield I.complete();return yield cd(u,M.Bu,void 0),yield function(L,G){const K=qe(L);return K.persistence.runTransaction("Save bundle","readwrite",ue=>K.Ns.saveBundleMetadata(ue,G))}(u.localStore,_),p._completeWith(M.progress),Promise.resolve(M.$u)}catch(_){return $s("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var L}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield IA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function A1(n,e){return function g1(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=qe(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield jD(n),e)}))}($r(n=tn(n,ir)),e).then(t=>t?new Wi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fs(this,t):null)}}class QD extends NA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zw(new kl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wa.forKey(t,this.firestore,null)}}class YN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new QD(e)}get(e){const t=Zp(e);return this._delegate.get(t).then(r=>new Kw(this._firestore,new hd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Zp(e);return r?(OA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Zp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Zp(e);return this._delegate.delete(t),this}}class QN{constructor(e){this._delegate=e}set(e,t,r){const i=Zp(e);return r?(OA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=Zp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=Zp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new qw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Yw(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Wp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Wp(e,new QD(e),t),i.set(t,u)),u}}Wp.INSTANCES=new WeakMap;class wa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wa(t,new qn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new wa(t,new qn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Uy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Uy(this.firestore,wN(this._delegate,e))}catch(t){throw hs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Bt.m9)(e))instanceof qn&&EN(this._delegate,e)}set(e,t){t=OA("DocumentReference.set",t);try{return t?HN(this._delegate,e,t):HN(this._delegate,e)}catch(r){throw hs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?GN(this._delegate,e):GN(this._delegate,e,t,...r)}catch(i){throw hs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function nk(n){return Vy(tn(n.firestore,ir),[new Pp(n._key,An.none())])}(this._delegate)}onSnapshot(...e){const t=JN(e),r=XN(e,i=>new Kw(this.firestore,new hd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return zN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function Q1(n){n=tn(n,qn);const e=tn(n.firestore,ir),t=$r(e),r=new qp(e);return function c1(n,e){const t=new jr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const p=yield function(_,I){const T=qe(_);return T.persistence.runTransaction("read document","readonly",M=>T.localDocuments.getDocument(M,I))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new xe(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Oy(p,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield jD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new hd(e,r,n._key,i,new zp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function J1(n){n=tn(n,qn);const e=tn(n.firestore,ir);return hN($r(e),n._key,{source:"server"}).then(t=>RA(e,n,t))}(this._delegate):function Y1(n){n=tn(n,qn);const e=tn(n.firestore,ir);return hN($r(e),n._key).then(t=>RA(e,n,t))}(this._delegate),t.then(r=>new Kw(this.firestore,new hd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wa(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}function hs(n,e,t){return n.message=n.message.replace(e,t),n}function JN(n){for(const e of n)if("object"==typeof e&&!PA(e))return e;return{}}function XN(n,e){var t,r;let i;return i=PA(n[0])?n[0]:PA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Kw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return ON(this._delegate,e._delegate)}}class Yw extends Kw{data(e){const t=this._delegate.data(e);return function FI(n,e){n||tt()}(void 0!==t),t}}class fs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new QD(e)}where(e,t,r){try{return new fs(this.firestore,$h(this._delegate,function U1(n,e,t){const r=e,i=KD("where",n);return new V1(i,r,t)}(e,t,r)))}catch(i){throw hs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fs(this.firestore,$h(this._delegate,function j1(n,e="asc"){const t=e,r=KD("orderBy",n);return new B1(r,t)}(e,t)))}catch(r){throw hs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fs(this.firestore,$h(this._delegate,function $1(n){return _N("limit",n),new kN("limit",n,"F")}(e)))}catch(t){throw hs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fs(this.firestore,$h(this._delegate,function H1(n){return _N("limitToLast",n),new kN("limitToLast",n,"L")}(e)))}catch(t){throw hs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fs(this.firestore,$h(this._delegate,function G1(...n){return new FN("startAt",n,!0)}(...e)))}catch(t){throw hs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fs(this.firestore,$h(this._delegate,function z1(...n){return new FN("startAfter",n,!1)}(...e)))}catch(t){throw hs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fs(this.firestore,$h(this._delegate,function q1(...n){return new LN("endBefore",n,!1)}(...e)))}catch(t){throw hs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fs(this.firestore,$h(this._delegate,function W1(...n){return new LN("endAt",n,!0)}(...e)))}catch(t){throw hs(t,"endAt()","Query.endAt()")}}isEqual(e){return IN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ek(n){n=tn(n,Wi);const e=tn(n.firestore,ir),t=$r(e),r=new qp(e);return function d1(n,e){const t=new jr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,u,c){try{const p=yield OD(i,u,!0),_=new Xx(u,p.Hi),I=_.ju(p.documents),T=_.applyChanges(I,!1);c.resolve(T.snapshot)}catch(p){const _=Oy(p,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield jD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new jh(e,r,n,i))}(this._delegate):"server"===e?.source?function tk(n){n=tn(n,Wi);const e=tn(n.firestore,ir),t=$r(e),r=new qp(e);return fN(t,n._query,{source:"server"}).then(i=>new jh(e,r,n,i))}(this._delegate):function X1(n){n=tn(n,Wi);const e=tn(n.firestore,ir),t=$r(e),r=new qp(e);return PN(n._query),fN(t,n._query).then(i=>new jh(e,r,n,i))}(this._delegate),t.then(r=>new kA(this.firestore,new jh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=JN(e),r=XN(e,i=>new kA(this.firestore,new jh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return zN(this._delegate,t,r)}withConverter(e){return new fs(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}class yk{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Yw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fs(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Yw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new yk(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Yw(this._firestore,r))})}isEqual(e){return ON(this._delegate,e._delegate)}}class Uy extends fs{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wa(this.firestore,e):null}doc(e){try{return new wa(this.firestore,void 0===e?HD(this._delegate):HD(this._delegate,e))}catch(t){throw hs(t,"doc()","CollectionReference.doc()")}}add(e){return function rk(n,e){const t=tn(n.firestore,ir),r=HD(n),i=YD(n.converter,e);return Vy(t,[qD(Hp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,An.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new wa(this.firestore,t))}isEqual(e){return EN(this._delegate,e._delegate)}withConverter(e){return new Uy(this.firestore,this._delegate.withConverter(e?Wp.getInstance(this.firestore,e):null))}}function Zp(n){return tn(n,qn)}class FA{constructor(...e){this._delegate=new dd(...e)}static documentId(){return new FA(nr.keyField().canonicalString())}isEqual(e){return(e=(0,Bt.m9)(e))instanceof dd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Kp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function uk(){return new TA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Kp(e)}static delete(){const e=function ak(){return new Gw("deleteField")}();return e._methodName="FieldValue.delete",new Kp(e)}static arrayUnion(...e){const t=function lk(...n){return new R1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Kp(t)}static arrayRemove(...e){const t=function ck(...n){return new O1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Kp(t)}static increment(e){const t=function dk(n){return new P1("increment",n)}(e);return t._methodName="FieldValue.increment",new Kp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const _k={Firestore:KN,GeoPoint:GD,Timestamp:Ln,Blob:Zw,Transaction:YN,WriteBatch:QN,DocumentReference:wa,DocumentSnapshot:Kw,Query:fs,QueryDocumentSnapshot:Yw,QuerySnapshot:kA,CollectionReference:Uy,FieldPath:FA,FieldValue:Kp,setLogLevel:function mk(n){!function Kv(n){Il.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function wk(n){(function vk(n,e){n.INTERNAL.registerComponent(new Cr.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},_k)))})(n,(e,t)=>new KN(e,t,new gk)),n.registerVersion("@firebase/firestore-compat","0.1.24")}(WC.Z);var Ek=k(6451),JD=k(5363),Ik=k(6063);class Dk extends Hn.x{constructor(e=1/0,t=1/0,r=Ik.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var bk=k(3099);function eR(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,bk.B)({connector:()=>new Dk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function tR(n,e){return(0,Wo.m)(e)?Gn(()=>n,e):Gn(()=>n)}var LA=k(9468);k(5867);const rR=new Map,Mk={activated:!1,tokenObservers:[]},xk={initialized:!1,enabled:!1};function mi(n){return rR.get(n)||Mk}function Eu(n,e){rR.set(n,e)}function eb(){return xk}class kk{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new Bt.BH,yield function Fk(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Bt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ps=new Bt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function sR(n){if(!mi(n).activated)throw ps.create("use-before-activation",{appName:n.name})}function jA(n,e){return $A.apply(this,arguments)}function $A(){return $A=(0,me.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const G=yield c.getHeartbeatsHeader();G&&(u["X-Firebase-Client"]=G)}const p={method:"POST",body:JSON.stringify(e),headers:u};let _,I;try{_=yield fetch(n,p)}catch(G){throw ps.create("fetch-network-error",{originalErrorMessage:null===(r=G)||void 0===r?void 0:r.message})}if(200!==_.status)throw ps.create("fetch-status-error",{httpStatus:_.status});try{I=yield _.json()}catch(G){throw ps.create("fetch-parse-error",{originalErrorMessage:null===(i=G)||void 0===i?void 0:i.message})}const T=I.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw ps.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${I.ttl}`});const M=1e3*Number(T[1]),L=Date.now();return{token:I.token,expireTimeMillis:L+M,issuedAtTimeMillis:L}}),$A.apply(this,arguments)}function Bk(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Qw="firebase-app-check-store";let rb=null;function aR(){return rb||(rb=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(ps.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(Qw,{keyPath:"compositeKey"})}}catch(r){e(ps.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),rb)}function HA(){return HA=(0,me.Z)(function*(n,e){const r=(yield aR()).transaction(Qw,"readwrite"),u=r.objectStore(Qw).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var I;p(ps.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})}),HA.apply(this,arguments)}const Jw=new Hi.Yd("@firebase/app-check");function dR(n,e){return(0,Bt.hl)()?function Gk(n,e){return function uR(n,e){return HA.apply(this,arguments)}(function cR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Jw.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hR(){return eb().enabled}function fR(){return WA.apply(this,arguments)}function WA(){return WA=(0,me.Z)(function*(){const n=eb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),WA.apply(this,arguments)}const Yk={error:"UNKNOWN_ERROR"};function Qk(n){return Bt.US.encodeString(JSON.stringify(n),!1)}function ib(n){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,me.Z)(function*(n,e=!1){const t=n.app;sR(t);const r=mi(t);let u,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&sb(_)&&(i=_)}if(!e&&i&&sb(i))return{token:i.token};let p,c=!1;if(hR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=jA(Bk(t,yield fR()),n.heartbeatServiceProvider).then(I=>(r.exchangeTokenPromise=void 0,I)),c=!0);const _=yield r.exchangeTokenPromise;return yield dR(t,_),Eu(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),c=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?Jw.warn(_.message):Jw.error(_),u=_}return i?(p={token:i.token},Eu(t,Object.assign(Object.assign({},r),{token:i})),yield dR(t,i)):p=Xk(u),c&&gR(t,p),p}),ZA.apply(this,arguments)}function YA(n,e){const t=mi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Eu(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function pR(n){const{app:e}=n,t=mi(e);let r=t.tokenRefresher;r||(r=function Jk(n){const{app:e}=n;return new kk((0,me.Z)(function*(){let r;if(r=mi(e).token?yield ib(n,!0):yield ib(n),r.error)throw r.error}),()=>!0,()=>{const t=mi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Eu(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function gR(n,e){const t=mi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function sb(n){return n.expireTimeMillis-Date.now()>0}function Xk(n){return{token:Qk(Yk),error:n}}class eF{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=mi(this.app);for(const t of e)YA(this.app,t.next);return Promise.resolve()}}const DR="app-check-internal";!function pF(){(0,wo._registerComponent)(new Cr.wA("app-check",n=>function tF(n,e){return new eF(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(DR).initialize()})),(0,wo._registerComponent)(new Cr.wA(DR,n=>function nF(n){return{getToken:e=>ib(n,e),addTokenListener:e=>function KA(n,e,t,r){const{app:i}=n,u=mi(i),c={next:t,error:r,type:e};if(Eu(i,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,c]})),u.token&&sb(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),pR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>pR(n))}(n,"INTERNAL",e),removeTokenListener:e=>YA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,wo.registerVersion)("@firebase/app-check","0.5.12")}();class eM{constructor(){return(0,zn.vb)("app-check")}}typeof window<"u"&&window;var vF=k(127);const CR=new h.OlP("angularfire2.auth.use-emulator"),TR=new h.OlP("angularfire2.auth.settings"),SR=new h.OlP("angularfire2.auth.tenant-id"),AR=new h.OlP("angularfire2.auth.langugage-code"),MR=new h.OlP("angularfire2.auth.use-device-language"),xR=new h.OlP("angularfire.auth.persistence"),NR=(n,e,t,r,i,u,c,p)=>(0,vo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[I,T]of Object.entries(c))_.settings[I]=T;return p&&_.setPersistence(p),_},[t,r,i,u,c,p]);let RR=(()=>{class n{constructor(t,r,i,u,c,p,_,I,T,M,L,G){const K=new Hn.x,ue=st(void 0).pipe((0,JD.Q)(c.outsideAngular),Gn(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,2274)))),(0,ot.U)(()=>(0,vo.on)(t,u,r)),(0,ot.U)(Ie=>NR(Ie,u,p,I,T,M,_,L)),eR({bufferSize:1,refCount:!1}));if(yr(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{ue.pipe(re()).subscribe();const We=ue.pipe(Gn(at=>at.getRedirectResult().then(Tt=>Tt,()=>null)),zn.iC,eR({bufferSize:1,refCount:!1})),nt=ue.pipe(Gn(at=>new kr.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>at.onAuthStateChanged(Rt=>Tt.next(Rt),Rt=>Tt.error(Rt),()=>Tt.complete()))})))),mt=ue.pipe(Gn(at=>new kr.y(Tt=>({unsubscribe:u.runOutsideAngular(()=>at.onIdTokenChanged(Rt=>Tt.next(Rt),Rt=>Tt.error(Rt),()=>Tt.complete()))}))));this.authState=We.pipe(tR(nt),(0,LA.R)(c.outsideAngular),(0,JD.Q)(c.insideAngular)),this.user=We.pipe(tR(mt),(0,LA.R)(c.outsideAngular),(0,JD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Gn(at=>at?(0,un.D)(at.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Gn(at=>at?(0,un.D)(at.getIdTokenResult()):st(null))),this.credential=(0,Ek.T)(We,K,this.authState.pipe(b(at=>!at))).pipe((0,ot.U)(at=>at?.user?at:null),(0,LA.R)(c.outsideAngular),(0,JD.Q)(c.insideAngular))}return(0,vo.pX)(this,ue,u,{spy:{apply:(Ie,We,nt)=>{(Ie.startsWith("signIn")||Ie.startsWith("createUser"))&&nt.then(mt=>K.next(mt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(vo.Dh),h.LFG(vo.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(zn.HU),h.LFG(CR,8),h.LFG(TR,8),h.LFG(SR,8),h.LFG(AR,8),h.LFG(MR,8),h.LFG(xR,8),h.LFG(eM,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function OR(n,e){return function EF(n,e=gm.z){return new kr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function nM(n,e){return OR(n,e).pipe((0,ot.U)(t=>({payload:t,type:"query"})))}function ab(n,e){return nM(n,e).pipe(tl(void 0),OE(),(0,ot.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(T=>T.doc.ref.isEqual(c.ref)),I=t?.payload.docs.find(T=>T.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function PR(n,e,t){return ab(n,t).pipe(St((r,i)=>function DF(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function bF(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return rM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return rM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return rM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function qf(n,e=Ms.y){return n=n??qC,(0,br.e)((t,r)=>{let i,u=!0;t.subscribe((0,Jn.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,ot.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function rM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function kR(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class FR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=ab(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ot.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(tl(void 0),OE(),b(([r,i])=>i.length>0||!r),(0,ot.U)(([r,i])=>i),zn.iC)}auditTrail(e){return this.stateChanges(e).pipe(St((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kR(e);return PR(this.query,t,this.afs.schedulers.outsideAngular).pipe(zn.iC)}valueChanges(e={}){return nM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),zn.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(zn.iC)}add(e){return this.ref.add(e)}doc(e){return new LR(this.ref.doc(e),this.afs)}}class LR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=BR(r,t);return new FR(i,u,this.afs)}snapshotChanges(){return function IF(n,e){return OR(n,e).pipe(tl(void 0),OE(),(0,ot.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(zn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,un.D)(this.ref.get(e)).pipe(zn.iC)}}class CF{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ab(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),b(t=>t.length>0),zn.iC):ab(this.query,this.afs.schedulers.outsideAngular).pipe(zn.iC)}auditTrail(e){return this.stateChanges(e).pipe(St((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kR(e);return PR(this.query,t,this.afs.schedulers.outsideAngular).pipe(zn.iC)}valueChanges(e={}){return nM(this.query,this.afs.schedulers.outsideAngular).pipe((0,ot.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),zn.iC)}get(e){return(0,un.D)(this.query.get(e)).pipe(zn.iC)}}const VR=new h.OlP("angularfire2.enableFirestorePersistence"),UR=new h.OlP("angularfire2.firestore.persistenceSettings"),TF=new h.OlP("angularfire2.firestore.settings"),SF=new h.OlP("angularfire2.firestore.use-emulator");function BR(n,e=(t=>t)){return{query:e(n),ref:n}}let jR=(()=>{class n{constructor(t,r,i,u,c,p,_,I,T,M,L,G,K,ue,Ie,We,nt){this.schedulers=_;const mt=(0,vo.on)(t,p,r),at=T;M&&NR(mt,p,L,K,ue,Ie,G,We),[this.firestore,this.persistenceEnabled$]=(0,vo.cc)(`${mt.name}.firestore`,"AngularFirestore",mt.name,()=>{const Tt=p.runOutsideAngular(()=>mt.firestore());if(u&&Tt.settings(u),at&&Tt.useEmulator(...at),i&&!yr(c)){const Rt=()=>{try{return(0,un.D)(Tt.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(nn){return typeof console<"u"&&console.warn(nn),st(!1)}};return[Tt,p.runOutsideAngular(Rt)]}return[Tt,st(!1)]},[u,at,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=BR(i,r),p=this.schedulers.ngZone.run(()=>u);return new FR(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new CF(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new LR(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(vo.Dh),h.LFG(vo.xv,8),h.LFG(VR,8),h.LFG(TF,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(zn.HU),h.LFG(UR,8),h.LFG(SF,8),h.LFG(RR,8),h.LFG(CR,8),h.LFG(TR,8),h.LFG(SR,8),h.LFG(AR,8),h.LFG(MR,8),h.LFG(xR,8),h.LFG(eM,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),AF=(()=>{class n{constructor(){vF.Z.registerVersion("angularfire",zn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:VR,useValue:!0},{provide:UR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[jR]}),n})(),MF=(()=>{class n{constructor(t){this.firestore=t}addClient(t){return this.firestore.collection("clients").add(t)}getClients(){return this.firestore.collection("clients",t=>t.orderBy("lastname","asc")).snapshotChanges()}deleteClient(t){return this.firestore.collection("clients").doc(t).delete()}getClient(t){return this.firestore.collection("clients").doc(t).snapshotChanges()}actualClient(t,r){return this.firestore.collection("clients").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(jR))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $R{}const fd="*";function NF(n,e){return{type:7,name:n,definitions:e,options:{}}}function HR(n,e=null){return{type:4,styles:e,timings:n}}function GR(n,e=null){return{type:2,steps:n,options:e}}function Xw(n){return{type:6,styles:n,offset:null}}function iM(n,e,t){return{type:0,name:n,styles:e,options:t}}function zR(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function qR(n){Promise.resolve(null).then(n)}class e0{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qR(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class WR{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?qR(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const ZR=["toast-component",""];function RF(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"button",5),h.NdJ("click",function(){h.CHM(t);const i=h.oxw();return h.KtG(i.remove())}),h.TgZ(1,"span",6),h._uU(2,"\xd7"),h.qZA()()}}function OF(n,e){if(1&n&&(h.ynx(0),h._uU(1),h.BQk()),2&n){const t=h.oxw(2);h.xp6(1),h.hij("[",t.duplicatesCount+1,"]")}}function PF(n,e){if(1&n&&(h.TgZ(0,"div"),h._uU(1),h.YNc(2,OF,2,1,"ng-container",4),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.titleClass),h.uIk("aria-label",t.title),h.xp6(1),h.hij(" ",t.title," "),h.xp6(1),h.Q6J("ngIf",t.duplicatesCount)}}function kF(n,e){if(1&n&&h._UZ(0,"div",7),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.Q6J("innerHTML",t.message,h.oJD)}}function FF(n,e){if(1&n&&(h.TgZ(0,"div",8),h._uU(1),h.qZA()),2&n){const t=h.oxw();h.Tol(t.options.messageClass),h.uIk("aria-label",t.message),h.xp6(1),h.hij(" ",t.message," ")}}function LF(n,e){if(1&n&&(h.TgZ(0,"div"),h._UZ(1,"div",9),h.qZA()),2&n){const t=h.oxw();h.xp6(1),h.Udp("width",t.width+"%")}}class GF{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class ub{constructor(e,t,r,i,u,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=u,this.toastRef=c,this._onTap=new Hn.x,this._onAction=new Hn.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const YR=new h.OlP("ToastConfig");class qF{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new Hn.x,this._activate=new Hn.x,this._manualClose=new Hn.x,this._resetTimeout=new Hn.x,this._countDuplicate=new Hn.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class WF{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===ub?this._toastPackage:this._parentInjector.get(e,t,r)}}class ZF extends class zF{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}class KF{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let YF=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),t.setAttribute("aria-live","polite"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),QF=(()=>{class n{constructor(t,r,i,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new ZF(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new KF(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(YF),h.LFG(h._Vd),h.LFG(h.z2F),h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oM=(()=>{class n{constructor(t,r,i,u,c){this.overlay=r,this._injector=i,this.sanitizer=u,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig={...t.default,...t.config},t.config.iconClasses&&(this.toastrConfig.iconClasses={...t.default.iconClasses,...t.config.iconClasses})}show(t,r,i={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,u){const{includeTitleDuplicates:c}=this.toastrConfig;for(const p of this.toasts){const _=c&&p.title===t;if((!c||_)&&p.message===r)return p.toastRef.onDuplicate(i,u),p}return null}applyConfig(t={}){return{...this.toastrConfig,...t}}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,u)):this._buildNotification(t,r,i,u)}_buildNotification(t,r,i,u){if(!u.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let p=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(p=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let I=r;r&&u.enableHtml&&(I=this.sanitizer.sanitize(h.q3G.HTML,r));const T=new qF(_),M=new ub(this.index,u,I,i,t,T),L=new WF(M,this._injector),G=new GF(u.toastComponent,L),K=_.attach(G,this.toastrConfig.newestOnTop);T.componentInstance=K.instance;const ue={toastId:this.index,title:i||"",message:r||"",toastRef:T,onShown:T.afterActivate(),onHidden:T.afterClosed(),onTap:M.onTap(),onAction:M.onAction(),portal:K};return p||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{ue.toastRef.activate()})),this.toasts.push(ue),ue}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(YR),h.LFG(QF),h.LFG(h.zs3),h.LFG(Ga),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const JF={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing",payload:null,toastComponent:(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state={...this.state,value:"active"},!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state={...this.state,value:"active"},this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state={...this.state,value:"removed"},this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(oM),h.Y36(ub),h.Y36(h.R0b))},n.\u0275cmp=h.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&h.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(h.d8E("@flyInOut",r.state),h.Tol(r.toastClasses),h.Udp("display",r.displayStyle))},attrs:ZR,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(t,r){1&t&&(h.YNc(0,RF,3,0,"button",0),h.YNc(1,PF,3,5,"div",1),h.YNc(2,kF,1,3,"div",2),h.YNc(3,FF,2,4,"div",3),h.YNc(4,LF,2,2,"div",4)),2&t&&(h.Q6J("ngIf",r.options.closeButton),h.xp6(1),h.Q6J("ngIf",r.title),h.xp6(1),h.Q6J("ngIf",r.message&&r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.message&&!r.options.enableHtml),h.xp6(1),h.Q6J("ngIf",r.options.progressBar))},dependencies:[$n],encapsulation:2,data:{animation:[NF("flyInOut",[iM("inactive",Xw({opacity:0})),iM("active",Xw({opacity:1})),iM("removed",Xw({opacity:0})),zR("inactive => active",HR("{{ easeTime }}ms {{ easing }}")),zR("active => removed",HR("{{ easeTime }}ms {{ easing }}"))])]}}),n})()};let XF=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:YR,useValue:{default:JF,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[xo]}),n})();function eL(n,e){1&n&&(h.TgZ(0,"div",63)(1,"span",64),h._uU(2,"Loading..."),h.qZA()())}function tL(n,e){1&n&&(h.TgZ(0,"span",65),h._uU(1,"*Toate campurile sunt obligatorii"),h.qZA())}let QR=(()=>{class n{constructor(t,r,i,u,c){this.fb=t,this._clientService=r,this.router=i,this.toastr=u,this.aRoute=c,this.submitted=!1,this.loading=!1,this.creatClient=this.fb.group({lastname:["",Rc.required],name:["",Rc.required],email:["",Rc.required],phone:["",Rc.required],address:["",Rc.required],city:["",Rc.required],county:["",Rc.required],iban1:["",Rc.required]}),this.id=this.aRoute.snapshot.paramMap.get("id")}ngOnInit(){this.editClient()}addEditClient(){this.submitted=!0,!this.creatClient.invalid&&(null===this.id?this.addClient():this.edClient(this.id))}addClient(){const t={lastname:this.creatClient.value.lastname,name:this.creatClient.value.name,email:this.creatClient.value.email,phone:this.creatClient.value.phone,address:this.creatClient.value.address,city:this.creatClient.value.city,county:this.creatClient.value.county,iban1:this.creatClient.value.iban1};this.loading=!0,this._clientService.addClient(t).then(()=>{this.toastr.success("Client added with success!","Client added",{positionClass:"toast-bottom-right"}),this.loading=!1}).catch(r=>{console.log(r),this.loading=!1})}editClient(){null!==this.id&&(this.loading=!0,this._clientService.getClient(this.id).subscribe(t=>{this.loading=!1,this.creatClient.setValue({lastname:t.payload.data().lastname,name:t.payload.data().name,email:t.payload.data().email,phone:t.payload.data().phone,address:t.payload.data().address,city:t.payload.data().city,county:t.payload.data().county,iban1:t.payload.data().iban1})}))}edClient(t){this.loading=!0;const r={lastname:this.creatClient.value.lastname,name:this.creatClient.value.name,email:this.creatClient.value.email,phone:this.creatClient.value.phone,address:this.creatClient.value.address,city:this.creatClient.value.city,county:this.creatClient.value.county,iban1:this.creatClient.value.iban1};this._clientService.actualClient(t,r),this._clientService.actualClient(t,r).then(()=>{this.loading=!1,this.toastr.info("Client updated","Client modified",{positionClass:"toast-bottom-right"})})}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(zC),h.Y36(MF),h.Y36(dr),h.Y36(oM),h.Y36(us))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-create-client"]],decls:121,vars:3,consts:[[1,"container","pt-4"],[1,"row"],[1,"col-lg-6","offset-lg-3"],[1,"card","text-center"],[1,"card-body"],[1,"clearfix"],["class","spinner-border spinner-border-sm float-end","role","status",4,"ngIf"],["style","color:red",4,"ngIf"],[1,"mt-4",3,"formGroup","ngSubmit"],[1,"col"],["type","text","formControlName","lastname","placeholder","Last Name",1,"form-control","mb-2"],["type","text","formControlName","name","placeholder","First Name",1,"form-control","mb-2"],["type","text","formControlName","email","placeholder","Email",1,"form-control","mb-2"],["type","text","formControlName","phone","placeholder","Phone",1,"form-control","mb-2"],["type","text","formControlName","address","placeholder","Address",1,"form-control","mb-2"],["type","text","formControlName","city","placeholder","City",1,"form-control","mb-2"],["required","","formControlName","county","placeholder","County",1,"form-select","form-control","mb-2"],["value","","selected",""],["value","Alba"],["value","Arad"],["value","Arge\u0219"],["value","Bac\u0103u"],["value","Bihor"],["value","Bistri\u021ba-N\u0103s\u0103ud"],["value","Boto\u0219ani"],["value","Bra\u0219ov"],["value","Br\u0103ila"],["value","Bucure\u0219ti"],["value","Buz\u0103u"],["value","Cara\u0219-Severin"],["value","C\u0103l\u0103ra\u0219i"],["value","Cluj"],["value","Constan\u021ba"],["value","Covasna"],["value","D\xe2mbovi\u021ba"],["value","Dolj"],["value","Gala\u021bi"],["value","Giurgiu"],["value","Gorj"],["value","Harghita"],["value","Ialomi\u021ba"],["value","Ia\u0219i"],["value","Ilfov"],["value","Maramure\u0219"],["value","Mehedin\u021bi"],["value","Mure\u0219"],["value","Neam\u021b"],["value","Olt"],["value","Prahova"],["value","Satu Mare"],["value","S\u0103laj"],["value","Sibiu"],["value","Suceava"],["value","Teleorman"],["value","Timi\u0219"],["value","Tulcea"],["value","Vaslui"],["value","V\xe2lcea"],["value","Vrancea"],["type","text","formControlName","iban1","placeholder","IBAN",1,"form-control","mb-2"],[1,"mt-3"],["type","submit",1,"btn","btn-success"],["type","text","routerLink","/list-clients",1,"btn","btn-danger","mx-2"],["role","status",1,"spinner-border","spinner-border-sm","float-end"],[1,"visually-hidden"],[2,"color","red"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),h.YNc(6,eL,3,0,"div",6),h.qZA(),h.TgZ(7,"h3"),h._uU(8,"Client details"),h.qZA(),h.YNc(9,tL,2,0,"span",7),h.TgZ(10,"form",8),h.NdJ("ngSubmit",function(){return r.addEditClient()}),h.TgZ(11,"div",1)(12,"div",9),h._UZ(13,"input",10),h.qZA(),h.TgZ(14,"div",9),h._UZ(15,"input",11),h.qZA()(),h.TgZ(16,"div",1)(17,"div",9),h._UZ(18,"input",12),h.qZA(),h.TgZ(19,"div",9),h._UZ(20,"input",13),h.qZA()(),h.TgZ(21,"div",1)(22,"div",9),h._UZ(23,"input",14),h.qZA()(),h.TgZ(24,"div",1)(25,"div",9),h._UZ(26,"input",15),h.qZA(),h.TgZ(27,"div",9)(28,"select",16)(29,"option",17),h._uU(30,"Select county"),h.qZA(),h.TgZ(31,"option",18),h._uU(32,"Alba"),h.qZA(),h.TgZ(33,"option",19),h._uU(34,"Arad"),h.qZA(),h.TgZ(35,"option",20),h._uU(36,"Arge\u0219"),h.qZA(),h.TgZ(37,"option",21),h._uU(38,"Bac\u0103u"),h.qZA(),h.TgZ(39,"option",22),h._uU(40,"Bihor"),h.qZA(),h.TgZ(41,"option",23),h._uU(42,"Bistri\u021ba-N\u0103s\u0103ud"),h.qZA(),h.TgZ(43,"option",24),h._uU(44,"Boto\u0219ani"),h.qZA(),h.TgZ(45,"option",25),h._uU(46,"Bra\u0219ov"),h.qZA(),h.TgZ(47,"option",26),h._uU(48,"Br\u0103ila"),h.qZA(),h.TgZ(49,"option",27),h._uU(50,"Bucure\u0219ti"),h.qZA(),h.TgZ(51,"option",28),h._uU(52,"Buz\u0103u"),h.qZA(),h.TgZ(53,"option",29),h._uU(54,"Cara\u0219-Severin"),h.qZA(),h.TgZ(55,"option",30),h._uU(56,"C\u0103l\u0103ra\u0219i"),h.qZA(),h.TgZ(57,"option",31),h._uU(58,"Cluj"),h.qZA(),h.TgZ(59,"option",32),h._uU(60,"Constan\u021ba"),h.qZA(),h.TgZ(61,"option",33),h._uU(62,"Covasna"),h.qZA(),h.TgZ(63,"option",34),h._uU(64,"D\xe2mbovi\u021ba"),h.qZA(),h.TgZ(65,"option",35),h._uU(66,"Dolj"),h.qZA(),h.TgZ(67,"option",36),h._uU(68,"Gala\u021bi"),h.qZA(),h.TgZ(69,"option",37),h._uU(70,"Giurgiu"),h.qZA(),h.TgZ(71,"option",38),h._uU(72,"Gorj"),h.qZA(),h.TgZ(73,"option",39),h._uU(74,"Harghita"),h.qZA(),h.TgZ(75,"option",40),h._uU(76,"Ialomi\u021ba"),h.qZA(),h.TgZ(77,"option",41),h._uU(78,"Ia\u0219i"),h.qZA(),h.TgZ(79,"option",42),h._uU(80,"Ilfov"),h.qZA(),h.TgZ(81,"option",43),h._uU(82,"Maramure\u0219"),h.qZA(),h.TgZ(83,"option",44),h._uU(84,"Mehedin\u021bi"),h.qZA(),h.TgZ(85,"option",45),h._uU(86,"Mure\u0219"),h.qZA(),h.TgZ(87,"option",46),h._uU(88,"Neam\u021b"),h.qZA(),h.TgZ(89,"option",47),h._uU(90,"Olt"),h.qZA(),h.TgZ(91,"option",48),h._uU(92,"Prahova"),h.qZA(),h.TgZ(93,"option",49),h._uU(94,"Satu Mare"),h.qZA(),h.TgZ(95,"option",50),h._uU(96,"S\u0103laj"),h.qZA(),h.TgZ(97,"option",51),h._uU(98,"Sibiu"),h.qZA(),h.TgZ(99,"option",52),h._uU(100,"Suceava"),h.qZA(),h.TgZ(101,"option",53),h._uU(102,"Teleorman"),h.qZA(),h.TgZ(103,"option",54),h._uU(104,"Timi\u0219"),h.qZA(),h.TgZ(105,"option",55),h._uU(106,"Tulcea"),h.qZA(),h.TgZ(107,"option",56),h._uU(108,"Vaslui"),h.qZA(),h.TgZ(109,"option",57),h._uU(110,"V\xe2lcea"),h.qZA(),h.TgZ(111,"option",58),h._uU(112,"Vrancea"),h.qZA()()()(),h.TgZ(113,"div",1)(114,"div",9),h._UZ(115,"input",59),h.qZA()(),h.TgZ(116,"div",60)(117,"button",61),h._uU(118,"OK"),h.qZA(),h.TgZ(119,"button",62),h._uU(120,"Cancel"),h.qZA()()()()()()()()),2&t&&(h.xp6(6),h.Q6J("ngIf",r.loading),h.xp6(3),h.Q6J("ngIf",r.submitted&&r.creatClient.invalid),h.xp6(1),h.Q6J("formGroup",r.creatClient))},dependencies:[$n,Nf,W_,bE,VC,Of,sh,Jg,sa,fm,lm,jf]}),n})();const nL=[{path:"create-client",component:QR},{path:"edit-client/:id",component:QR}];let rL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[P0.forRoot(nL),P0]}),n})();function JR(n){return new h.vHH(3e3,!1)}function VL(){return typeof window<"u"&&typeof window.document<"u"}function aM(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Gh(n){switch(n.length){case 0:return new e0;case 1:return n[0];default:return new WR(n)}}function XR(n,e,t,r,i=new Map,u=new Map){const c=[],p=[];let _=-1,I=null;if(r.forEach(T=>{const M=T.get("offset"),L=M==_,G=L&&I||new Map;T.forEach((K,ue)=>{let Ie=ue,We=K;if("offset"!==ue)switch(Ie=e.normalizePropertyName(Ie,c),We){case"!":We=i.get(ue);break;case fd:We=u.get(ue);break;default:We=e.normalizeStyleValue(ue,Ie,We,c)}G.set(Ie,We)}),L||p.push(G),I=G,_=M}),c.length)throw function TL(n){return new h.vHH(3502,!1)}();return p}function uM(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&lM(t,"start",n)));break;case"done":n.onDone(()=>r(t&&lM(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&lM(t,"destroy",n)))}}function lM(n,e,t){const u=cM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function cM(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function Co(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function eO(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let dM=(n,e)=>!1,tO=(n,e,t)=>[],nO=null;function hM(n){const e=n.parentNode||n.host;return e===nO?null:e}(aM()||typeof Element<"u")&&(VL()?(nO=(()=>document.documentElement)(),dM=(n,e)=>{for(;e;){if(e===n)return!0;e=hM(e)}return!1}):dM=(n,e)=>n.contains(e),tO=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Yp=null,rO=!1;const iO=dM,sO=tO;let oO=(()=>{class n{validateStyleProperty(t){return function BL(n){Yp||(Yp=function jL(){return typeof document<"u"?document.body:null}()||{},rO=!!Yp.style&&"WebkitAppearance"in Yp.style);let e=!0;return Yp.style&&!function UL(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Yp.style,!e&&rO&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Yp.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return iO(t,r)}getParentElement(t){return hM(t)}query(t,r,i){return sO(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],_){return new e0(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),fM=(()=>{class n{}return n.NOOP=new oO,n})();const pM="ng-enter",lb="ng-leave",cb="ng-trigger",db=".ng-trigger",uO="ng-animating",gM=".ng-animating";function zh(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:mM(parseFloat(e[1]),e[2])}function mM(n,e){return"s"===e?1e3*n:n}function hb(n,e,t){return n.hasOwnProperty("duration")?n:function GL(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(JR()),{duration:0,delay:0,easing:""};i=mM(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(u=mM(parseFloat(_),p[4]));const I=p[5];I&&(c=I)}else i=n;if(!t){let p=!1,_=e.length;i<0&&(e.push(function iL(){return new h.vHH(3100,!1)}()),p=!0),u<0&&(e.push(function sL(){return new h.vHH(3101,!1)}()),p=!0),p&&e.splice(_,0,JR())}return{duration:i,delay:u,easing:c}}(n,e,t)}function t0(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function lO(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function qh(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function dO(n,e,t){return t?e+":"+t+";":""}function hO(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=dO(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=dO(0,ZL(t),n.style[t]));n.setAttribute("style",e)}function Fl(n,e,t){n.style&&(e.forEach((r,i)=>{const u=_M(i);t&&!t.has(i)&&t.set(i,n.style[u]),n.style[u]=r}),aM()&&hO(n))}function Qp(n,e){n.style&&(e.forEach((t,r)=>{const i=_M(r);n.style[i]=""}),aM()&&hO(n))}function n0(n){return Array.isArray(n)?1==n.length?n[0]:GR(n):n}const yM=new RegExp("{{\\s*(.+?)\\s*}}","g");function fO(n){let e=[];if("string"==typeof n){let t;for(;t=yM.exec(n);)e.push(t[1]);yM.lastIndex=0}return e}function fb(n,e,t){const r=n.toString(),i=r.replace(yM,(u,c)=>{let p=e[c];return null==p&&(t.push(function aL(n){return new h.vHH(3003,!1)}()),p=""),p.toString()});return i==r?n:i}function pb(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const WL=/-+([a-z0-9])/g;function _M(n){return n.replace(WL,(...e)=>e[1].toUpperCase())}function ZL(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function To(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function uL(n){return new h.vHH(3004,!1)}()}}function pO(n,e){return window.getComputedStyle(n)[e]}function eV(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function tV(n,e,t){if(":"==n[0]){const _=function nV(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function IL(n){return new h.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function EL(n){return new h.vHH(3015,!1)}()),e;const i=r[1],u=r[2],c=r[3];e.push(gO(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(gO(c,i))}(r,t,e)):t.push(n),t}const _b=new Set(["true","1"]),vb=new Set(["false","0"]);function gO(n,e){const t=_b.has(n)||vb.has(n),r=_b.has(e)||vb.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?_b.has(n):vb.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?_b.has(e):vb.has(e)),c&&p}}const rV=new RegExp("s*:selfs*,?","g");function vM(n,e,t,r){return new iV(n).build(e,t,r)}class iV{constructor(e){this._driver=e}build(e,t,r){const i=new aV(t);return this._resetContextStyleTimingState(i),To(this,n0(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function cL(){return new h.vHH(3006,!1)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,I=_.name;I.toString().split(/\s*,\s*/).forEach(T=>{_.name=T,u.push(this.visitState(_,t))}),_.name=I}else if(1==p.type){const _=this.visitTransition(p,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function dL(){return new h.vHH(3007,!1)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{p instanceof Map&&p.forEach(_=>{fO(_).forEach(I=>{c.hasOwnProperty(I)||u.add(I)})})}),u.size&&(pb(u.values()),t.errors.push(function hL(n,e){return new h.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=To(this,n0(e.animation),t);return{type:1,matchers:eV(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Jp(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>To(this,r,t)),options:Jp(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=To(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:Jp(e.options)}}visitAnimate(e,t){const r=function lV(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return wM(hb(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=wM(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=hb(t,e);return wM(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:Xw({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const I={};r.easing&&(I.easing=r.easing),c=Xw(I)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=p,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let p of i)"string"==typeof p?p===fd?r.push(p):t.errors.push(new h.vHH(3002,!1)):r.push(lO(p));let u=!1,c=null;return r.forEach(p=>{if(p instanceof Map&&(p.has("easing")&&(c=p.get("easing"),p.delete("easing")),!u))for(let _ of p.values())if(_.toString().indexOf("{{")>=0){u=!0;break}}),{type:6,styles:r,easing:c,offset:e.offset,containsDynamicStyles:u,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&c.forEach((p,_)=>{const I=t.collectedStyles.get(t.currentQuerySelector),T=I.get(_);let M=!0;T&&(u!=i&&u>=T.startTime&&i<=T.endTime&&(t.errors.push(function pL(n,e,t,r,i){return new h.vHH(3010,!1)}()),M=!1),u=T.startTime),M&&I.set(_,{startTime:u,endTime:i}),t.options&&function qL(n,e,t){const r=e.params||{},i=fO(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function oL(n){return new h.vHH(3001,!1)}())})}(p,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function gL(){return new h.vHH(3011,!1)}()),r;let u=0;const c=[];let p=!1,_=!1,I=0;const T=e.steps.map(We=>{const nt=this._makeStyleAst(We,t);let mt=null!=nt.offset?nt.offset:function uV(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(nt.styles),at=0;return null!=mt&&(u++,at=nt.offset=mt),_=_||at<0||at>1,p=p||at<I,I=at,c.push(at),nt});_&&t.errors.push(function mL(){return new h.vHH(3012,!1)}()),p&&t.errors.push(function yL(){return new h.vHH(3200,!1)}());const M=e.steps.length;let L=0;u>0&&u<M?t.errors.push(function _L(){return new h.vHH(3202,!1)}()):0==u&&(L=1/(M-1));const G=M-1,K=t.currentTime,ue=t.currentAnimateTimings,Ie=ue.duration;return T.forEach((We,nt)=>{const mt=L>0?nt==G?1:L*nt:c[nt],at=mt*Ie;t.currentTime=K+ue.delay+at,ue.duration=at,this._validateStyleAst(We,t),We.offset=mt,r.styles.push(We)}),r}visitReference(e,t){return{type:8,animation:To(this,n0(e.animation),t),options:Jp(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Jp(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Jp(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function sV(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(rV,"")),n=n.replace(/@\*/g,db).replace(/@\w+/g,t=>db+"-"+t.slice(1)).replace(/:animating/g,gM),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,Co(t.collectedStyles,t.currentQuerySelector,new Map);const p=To(this,n0(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:Jp(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function vL(){return new h.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:hb(e.timings,t.errors,!0);return{type:12,animation:To(this,n0(e.animation),t),timings:r,options:null}}}class aV{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Jp(n){return n?(n=t0(n)).params&&(n.params=function oV(n){return n?t0(n):null}(n.params)):n={},n}function wM(n,e,t){return{duration:n,delay:e,easing:t}}function EM(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class wb{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const hV=new RegExp(":enter","g"),pV=new RegExp(":leave","g");function IM(n,e,t,r,i,u=new Map,c=new Map,p,_,I=[]){return(new gV).buildKeyframes(n,e,t,r,i,u,c,p,_,I)}class gV{buildKeyframes(e,t,r,i,u,c,p,_,I,T=[]){I=I||new wb;const M=new DM(e,t,I,i,u,T,[]);M.options=_;const L=_.delay?zh(_.delay):0;M.currentTimeline.delayNextStep(L),M.currentTimeline.setStyles([c],null,M.errors,_),To(this,r,M);const G=M.timelines.filter(K=>K.containsAnimation());if(G.length&&p.size){let K;for(let ue=G.length-1;ue>=0;ue--){const Ie=G[ue];if(Ie.element===t){K=Ie;break}}K&&!K.allowOnlyTimelineStyles()&&K.setStyles([p],null,M.errors,_)}return G.length?G.map(K=>K.buildKeyframes()):[EM(t,[],[],[],0,L,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?zh(r.duration):null,p=null!=r.delay?zh(r.delay):null;return 0!==c&&e.forEach(_=>{const I=t.appendInstructionToTimeline(_,c,p);u=Math.max(u,I.duration+I.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),To(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Eb);const c=zh(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>To(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?zh(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),To(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return hb(t.params?fb(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*u),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?zh(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Eb);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((I,T)=>{t.currentQueryIndex=T;const M=t.createSubContext(e.options,I);u&&M.delayNextStep(u),I===t.element&&(_=M.currentTimeline),To(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=p-_;break;case"full":_=r.currentStaggerTime}const T=t.currentTimeline;_&&T.delayNextStep(_);const M=T.currentTime;To(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const Eb={};class DM{constructor(e,t,r,i,u,c,p,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Eb,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new Ib(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=zh(r.duration)),null!=r.delay&&(i.delay=zh(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=fb(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new DM(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=Eb,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},u=new mV(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(hV,"."+this._enterClassName)).replace(pV,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),p.push(...I)}return!u&&0==p.length&&c.push(function wL(n){return new h.vHH(3014,!1)}()),p}}class Ib{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Ib(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||fd),this._currentKeyframe.set(t,fd);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const u=i&&i.params||{},c=function yV(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let u of r)t.set(u,fd)}else qh(i,t)}),t}(e,this._globalTimelineStyles);for(let[p,_]of c){const I=fb(_,u,r);this._pendingStyles.set(p,I),this._localTimelineStyles.has(p)||this._backFill.set(p,this._globalTimelineStyles.get(p)??fd),this._updateStyle(p,I)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,_)=>{const I=qh(p,new Map,this._backFill);I.forEach((T,M)=>{"!"===T?e.add(M):T===fd&&t.add(M)}),r||I.set("offset",_/this.duration),i.push(I)});const u=e.size?pb(e.values()):[],c=t.size?pb(t.values()):[];if(r){const p=i[0],_=new Map(p);p.set("offset",0),_.set("offset",1),i=[p,_]}return EM(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class mV extends Ib{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,_=qh(e[0]);_.set("offset",0),u.push(_);const I=qh(e[0]);I.set("offset",_O(p)),u.push(I);const T=e.length-1;for(let M=1;M<=T;M++){let L=qh(e[M]);const G=L.get("offset");L.set("offset",_O((t+G*r)/c)),u.push(L)}r=c,t=0,i="",e=u}return EM(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function _O(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class bM{}const _V=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class vV extends bM{normalizePropertyName(e,t){return _M(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(_V.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function lL(n,e){return new h.vHH(3005,!1)}())}return c+u}}function vO(n,e,t,r,i,u,c,p,_,I,T,M,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:_,preStyleProps:I,postStyleProps:T,totalTime:M,errors:L}}const CM={};class wO{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function wV(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,u,c,p,_,I,T){const M=[],L=this.ast.options&&this.ast.options.params||CM,K=this.buildStyles(r,p&&p.params||CM,M),ue=_&&_.params||CM,Ie=this.buildStyles(i,ue,M),We=new Set,nt=new Map,mt=new Map,at="void"===i,Tt={params:EV(ue,L),delay:this.ast.options?.delay},Rt=T?[]:IM(e,t,this.ast.animation,u,c,K,Ie,Tt,I,M);let nn=0;if(Rt.forEach(pd=>{nn=Math.max(pd.duration+pd.delay,nn)}),M.length)return vO(t,this._triggerName,r,i,at,K,Ie,[],[],nt,mt,nn,M);Rt.forEach(pd=>{const gd=pd.element,FO=Co(nt,gd,new Set);pd.preStyleProps.forEach(Xp=>FO.add(Xp));const s0=Co(mt,gd,new Set);pd.postStyleProps.forEach(Xp=>s0.add(Xp)),gd!==t&&We.add(gd)});const gs=pb(We.values());return vO(t,this._triggerName,r,i,at,K,Ie,Rt,gs,nt,mt,nn)}}function EV(n,e){const t=t0(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class IV{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=t0(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!==c&&(i[u]=c)}),this.styles.styles.forEach(u=>{"string"!=typeof u&&u.forEach((c,p)=>{c&&(c=fb(c,i,t));const _=this.normalizer.normalizePropertyName(p,t);c=this.normalizer.normalizeStyleValue(p,_,c,t),r.set(_,c)})}),r}}class bV{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new IV(i.style,i.options&&i.options.params||{},r))}),EO(this.states,"true","1"),EO(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new wO(e,i,this.states))}),this.fallbackTransition=function CV(n,e,t){return new wO(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function EO(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const TV=new wb;class SV{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],u=vM(this._driver,t,r,[]);if(r.length)throw function SL(n){return new h.vHH(3503,!1)}();this._animations.set(e,u)}_buildPlayer(e,t,r){const i=e.element,u=XR(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations.get(e);let c;const p=new Map;if(u?(c=IM(this._driver,t,u,pM,lb,new Map,new Map,r,TV,i),c.forEach(T=>{const M=Co(p,T.element,new Map);T.postStyleProps.forEach(L=>M.set(L,null))})):(i.push(function AL(){return new h.vHH(3300,!1)}()),c=[]),i.length)throw function ML(n){return new h.vHH(3504,!1)}();p.forEach((T,M)=>{T.forEach((L,G)=>{T.set(G,this._driver.computeStyle(M,G,fd))})});const I=Gh(c.map(T=>{const M=p.get(T.element);return this._buildPlayer(T,new Map,M)}));return this._playersById.set(e,I),I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function xL(n){return new h.vHH(3301,!1)}();return t}listen(e,t,r,i){const u=cM(t,"","","");return uM(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const IO="ng-animate-queued",TM="ng-animate-disabled",RV=[],DO={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},OV={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ea="__ng_removed";class SM{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function LV(n){return n??null}(r?e.value:e),r){const u=t0(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const r0="void",AM=new SM(r0);class PV{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ia(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function NL(n,e){return new h.vHH(3302,!1)}();if(null==r||0==r.length)throw function RL(n){return new h.vHH(3303,!1)}();if(!function VV(n){return"start"==n||"done"==n}(r))throw function OL(n,e){return new h.vHH(3400,!1)}();const u=Co(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=Co(this._engine.statesByElement,e,new Map);return p.has(t)||(Ia(e,cb),Ia(e,cb+"-"+t),p.set(t,AM)),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(c);_>=0&&u.splice(_,1),this._triggers.has(t)||p.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function PL(n){return new h.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new MM(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Ia(e,cb),Ia(e,cb+"-"+t),this._engine.statesByElement.set(e,p=new Map));let _=p.get(t);const I=new SM(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&I.absorbOptions(_.options),p.set(t,I),_||(_=AM),I.value!==r0&&_.value===I.value){if(!function jV(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,I.params)){const ue=[],Ie=u.matchStyles(_.value,_.params,ue),We=u.matchStyles(I.value,I.params,ue);ue.length?this._engine.reportError(ue):this._engine.afterFlush(()=>{Qp(e,Ie),Fl(e,We)})}return}const L=Co(this._engine.playersByElement,e,[]);L.forEach(ue=>{ue.namespaceId==this.id&&ue.triggerName==t&&ue.queued&&ue.destroy()});let G=u.matchTransition(_.value,I.value,e,I.params),K=!1;if(!G){if(!i)return;G=u.fallbackTransition,K=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:G,fromState:_,toState:I,player:c,isFallbackTransition:K}),K||(Ia(e,IO),c.onStart(()=>{By(e,IO)})),c.onDone(()=>{let ue=this.players.indexOf(c);ue>=0&&this.players.splice(ue,1);const Ie=this._engine.playersByElement.get(e);if(Ie){let We=Ie.indexOf(c);We>=0&&Ie.splice(We,1)}}),this.players.push(c),L.push(c),c}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,db,!0);r.forEach(i=>{if(i[Ea])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(u.forEach((_,I)=>{if(c.set(I,_.value),this._triggers.has(I)){const T=this.trigger(e,I,r0,i);T&&p.push(T)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Gh(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const _=this._triggers.get(c).fallbackTransition,I=r.get(c)||AM,T=new SM(r0),M=new MM(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:I,toState:T,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Ea];(!u||u===DO)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ia(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const _=cM(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,uM(r.player,p.phase,_,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class kV{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new PV(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let c=!1,p=this.driver.getParentElement(t);for(;p;){const _=i.get(p);if(_){const I=r.indexOf(_);r.splice(I+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const u=this._fetchNamespace(i.namespaceId);u&&t.add(u)}return t}trigger(e,t,r,i){if(Db(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Db(t))return;const u=t[Ea];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ia(e,TM)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),By(e,TM))}removeNode(e,t,r,i){if(Db(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Ea]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return Db(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,db,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,gM,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Gh(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ea];if(t&&t.setForRemoval){if(e[Ea]=DO,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(TM)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ia(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Gh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function kL(n){return new h.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new wb,i=[],u=new Map,c=[],p=new Map,_=new Map,I=new Map,T=new Set;this.disabledNodes.forEach(ct=>{T.add(ct);const It=this.driver.query(ct,".ng-animate-queued",!0);for(let Ot=0;Ot<It.length;Ot++)T.add(It[Ot])});const M=this.bodyNode,L=Array.from(this.statesByElement.keys()),G=TO(L,this.collectedEnterElements),K=new Map;let ue=0;G.forEach((ct,It)=>{const Ot=pM+ue++;K.set(It,Ot),ct.forEach(ln=>Ia(ln,Ot))});const Ie=[],We=new Set,nt=new Set;for(let ct=0;ct<this.collectedLeaveElements.length;ct++){const It=this.collectedLeaveElements[ct],Ot=It[Ea];Ot&&Ot.setForRemoval&&(Ie.push(It),We.add(It),Ot.hasAnimation?this.driver.query(It,".ng-star-inserted",!0).forEach(ln=>We.add(ln)):nt.add(It))}const mt=new Map,at=TO(L,Array.from(We));at.forEach((ct,It)=>{const Ot=lb+ue++;mt.set(It,Ot),ct.forEach(ln=>Ia(ln,Ot))}),e.push(()=>{G.forEach((ct,It)=>{const Ot=K.get(It);ct.forEach(ln=>By(ln,Ot))}),at.forEach((ct,It)=>{const Ot=mt.get(It);ct.forEach(ln=>By(ln,Ot))}),Ie.forEach(ct=>{this.processLeaveNode(ct)})});const Tt=[],Rt=[];for(let ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(t).forEach(Ot=>{const ln=Ot.player,yi=Ot.element;if(Tt.push(ln),this.collectedEnterElements.length){const Zi=yi[Ea];if(Zi&&Zi.setForMove){if(Zi.previousTriggersValues&&Zi.previousTriggersValues.has(Ot.triggerName)){const eg=Zi.previousTriggersValues.get(Ot.triggerName),Da=this.statesByElement.get(Ot.element);if(Da&&Da.has(Ot.triggerName)){const Tb=Da.get(Ot.triggerName);Tb.value=eg,Da.set(Ot.triggerName,Tb)}}return void ln.destroy()}}const Ll=!M||!this.driver.containsElement(M,yi),So=mt.get(yi),Wh=K.get(yi),gr=this._buildInstruction(Ot,r,Wh,So,Ll);if(gr.errors&&gr.errors.length)return void Rt.push(gr);if(Ll)return ln.onStart(()=>Qp(yi,gr.fromStyles)),ln.onDestroy(()=>Fl(yi,gr.toStyles)),void i.push(ln);if(Ot.isFallbackTransition)return ln.onStart(()=>Qp(yi,gr.fromStyles)),ln.onDestroy(()=>Fl(yi,gr.toStyles)),void i.push(ln);const UO=[];gr.timelines.forEach(Zi=>{Zi.stretchStartingKeyframe=!0,this.disabledNodes.has(Zi.element)||UO.push(Zi)}),gr.timelines=UO,r.append(yi,gr.timelines),c.push({instruction:gr,player:ln,element:yi}),gr.queriedElements.forEach(Zi=>Co(p,Zi,[]).push(ln)),gr.preStyleProps.forEach((Zi,eg)=>{if(Zi.size){let Da=_.get(eg);Da||_.set(eg,Da=new Set),Zi.forEach((Tb,RM)=>Da.add(RM))}}),gr.postStyleProps.forEach((Zi,eg)=>{let Da=I.get(eg);Da||I.set(eg,Da=new Set),Zi.forEach((Tb,RM)=>Da.add(RM))})});if(Rt.length){const ct=[];Rt.forEach(It=>{ct.push(function FL(n,e){return new h.vHH(3505,!1)}())}),Tt.forEach(It=>It.destroy()),this.reportError(ct)}const nn=new Map,gs=new Map;c.forEach(ct=>{const It=ct.element;r.has(It)&&(gs.set(It,It),this._beforeAnimationBuild(ct.player.namespaceId,ct.instruction,nn))}),i.forEach(ct=>{const It=ct.element;this._getPreviousPlayers(It,!1,ct.namespaceId,ct.triggerName,null).forEach(ln=>{Co(nn,It,[]).push(ln),ln.destroy()})});const pd=Ie.filter(ct=>AO(ct,_,I)),gd=new Map;CO(gd,this.driver,nt,I,fd).forEach(ct=>{AO(ct,_,I)&&pd.push(ct)});const s0=new Map;G.forEach((ct,It)=>{CO(s0,this.driver,new Set(ct),_,"!")}),pd.forEach(ct=>{const It=gd.get(ct),Ot=s0.get(ct);gd.set(ct,new Map([...Array.from(It?.entries()??[]),...Array.from(Ot?.entries()??[])]))});const Xp=[],LO=[],VO={};c.forEach(ct=>{const{element:It,player:Ot,instruction:ln}=ct;if(r.has(It)){if(T.has(It))return Ot.onDestroy(()=>Fl(It,ln.toStyles)),Ot.disabled=!0,Ot.overrideTotalTime(ln.totalTime),void i.push(Ot);let yi=VO;if(gs.size>1){let So=It;const Wh=[];for(;So=So.parentNode;){const gr=gs.get(So);if(gr){yi=gr;break}Wh.push(So)}Wh.forEach(gr=>gs.set(gr,yi))}const Ll=this._buildAnimation(Ot.namespaceId,ln,nn,u,s0,gd);if(Ot.setRealPlayer(Ll),yi===VO)Xp.push(Ot);else{const So=this.playersByElement.get(yi);So&&So.length&&(Ot.parentPlayer=Gh(So)),i.push(Ot)}}else Qp(It,ln.fromStyles),Ot.onDestroy(()=>Fl(It,ln.toStyles)),LO.push(Ot),T.has(It)&&i.push(Ot)}),LO.forEach(ct=>{const It=u.get(ct.element);if(It&&It.length){const Ot=Gh(It);ct.setRealPlayer(Ot)}}),i.forEach(ct=>{ct.parentPlayer?ct.syncPlayerEvents(ct.parentPlayer):ct.destroy()});for(let ct=0;ct<Ie.length;ct++){const It=Ie[ct],Ot=It[Ea];if(By(It,lb),Ot&&Ot.hasAnimation)continue;let ln=[];if(p.size){let Ll=p.get(It);Ll&&Ll.length&&ln.push(...Ll);let So=this.driver.query(It,gM,!0);for(let Wh=0;Wh<So.length;Wh++){let gr=p.get(So[Wh]);gr&&gr.length&&ln.push(...gr)}}const yi=ln.filter(Ll=>!Ll.destroyed);yi.length?UV(this,It,yi):this.processLeaveNode(It)}return Ie.length=0,Xp.forEach(ct=>{this.players.push(ct),ct.onDone(()=>{ct.destroy();const It=this.players.indexOf(ct);this.players.splice(It,1)}),ct.play()}),Xp}elementContainsData(e,t){let r=!1;const i=t[Ea];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const _=!u||u==r0;p.forEach(I=>{I.queued||!_&&I.triggerName!=i||c.push(I)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const I=_.element,T=I!==u,M=Co(r,I,[]);this._getPreviousPlayers(I,T,c,p,t.toState).forEach(G=>{const K=G.getRealPlayer();K.beforeDestroy&&K.beforeDestroy(),G.destroy(),M.push(G)})}Qp(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,_=t.element,I=[],T=new Set,M=new Set,L=t.timelines.map(K=>{const ue=K.element;T.add(ue);const Ie=ue[Ea];if(Ie&&Ie.removedBeforeQueried)return new e0(K.duration,K.delay);const We=ue!==_,nt=function BV(n){const e=[];return SO(n,e),e}((r.get(ue)||RV).map(nn=>nn.getRealPlayer())).filter(nn=>!!nn.element&&nn.element===ue),mt=u.get(ue),at=c.get(ue),Tt=XR(0,this._normalizer,0,K.keyframes,mt,at),Rt=this._buildPlayer(K,Tt,nt);if(K.subTimeline&&i&&M.add(ue),We){const nn=new MM(e,p,ue);nn.setRealPlayer(Rt),I.push(nn)}return Rt});I.forEach(K=>{Co(this.playersByQueriedElement,K.element,[]).push(K),K.onDone(()=>function FV(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,K.element,K))}),T.forEach(K=>Ia(K,uO));const G=Gh(L);return G.onDestroy(()=>{T.forEach(K=>By(K,uO)),Fl(_,t.toStyles)}),M.forEach(K=>{Co(i,K,[]).push(G)}),G}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new e0(e.duration,e.delay)}}class MM{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new e0,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>uM(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Co(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Db(n){return n&&1===n.nodeType}function bO(n,e){const t=n.style.display;return n.style.display=e??"none",t}function CO(n,e,t,r,i){const u=[];t.forEach(_=>u.push(bO(_)));const c=[];r.forEach((_,I)=>{const T=new Map;_.forEach(M=>{const L=e.computeStyle(I,M,i);T.set(M,L),(!L||0==L.length)&&(I[Ea]=OV,c.push(I))}),n.set(I,T)});let p=0;return t.forEach(_=>bO(_,u[p++])),c}function TO(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let _=u.get(p);if(_)return _;const I=p.parentNode;return _=t.has(I)?I:i.has(I)?1:c(I),u.set(p,_),_}return e.forEach(p=>{const _=c(p);1!==_&&t.get(_).push(p)}),t}function Ia(n,e){n.classList?.add(e)}function By(n,e){n.classList?.remove(e)}function UV(n,e,t){Gh(t).onDone(()=>n.processLeaveNode(e))}function SO(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof WR?SO(r.players,e):e.push(r)}}function AO(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class bb{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new kV(e,t,r),this._timelineEngine=new SV(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const _=[],T=vM(this._driver,u,_,[]);if(_.length)throw function CL(n,e){return new h.vHH(3404,!1)}();p=function DV(n,e,t){return new bV(n,e,t)}(i,T,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=eO(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=eO(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let HV=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u=new Map),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&Fl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Fl(this._element,this._initialStyles),this._endStyles&&(Fl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Qp(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qp(this._element,this._endStyles),this._endStyles=null),Fl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function xM(n){let e=null;return n.forEach((t,r)=>{(function GV(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class MO{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:pO(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class zV{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return iO(e,t)}getParentElement(e){return hM(e)}query(e,t,r){return sO(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(_.easing=u);const I=new Map,T=c.filter(G=>G instanceof MO);(function KL(n,e){return 0===n||0===e})(r,i)&&T.forEach(G=>{G.currentSnapshot.forEach((K,ue)=>I.set(ue,K))});let M=function zL(n){return n.length?n[0]instanceof Map?n:n.map(e=>lO(e)):[]}(t).map(G=>qh(G));M=function YL(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((u,c)=>{r.has(c)||i.push(c),r.set(c,u)}),i.length)for(let u=1;u<e.length;u++){let c=e[u];i.forEach(p=>c.set(p,pO(n,p)))}}return e}(e,M,I);const L=function $V(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=xM(e[0]),e.length>1&&(r=xM(e[e.length-1]))):e instanceof Map&&(t=xM(e)),t||r?new HV(n,t,r):null}(e,M);return new MO(e,M,_,L)}}let qV=(()=>{class n extends $R{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:h.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?GR(t):t;return xO(this._renderer,null,r,"register",[i]),new WV(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class WV extends class xF{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new ZV(this._id,e,t||{},this._renderer)}}class ZV{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return xO(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function xO(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const NO="@.disabled";let KV=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=c?.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(u);return T||(T=new RO("",u,this.engine),this._rendererCache.set(u,T)),T}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const _=T=>{Array.isArray(T)?T.forEach(_):this.engine.registerTrigger(c,p,t,T.name,T)};return r.data.animation.forEach(_),new YV(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.FYo),h.LFG(bb),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class RO{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==NO?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class YV extends RO{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==NO?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function QV(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.slice(1),c="";return"@"!=u.charAt(0)&&([u,c]=function JV(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let XV=(()=>{class n extends bb{constructor(t,r,i,u){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le),h.LFG(fM),h.LFG(bM),h.LFG(h.z2F))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const OO=[{provide:$R,useClass:qV},{provide:bM,useFactory:function eU(){return new vV}},{provide:bb,useClass:XV},{provide:h.FYo,useFactory:function tU(n,e,t){return new KV(n,e,t)},deps:[no,bb,h.R0b]}],NM=[{provide:fM,useFactory:()=>new zV},{provide:h.QbO,useValue:"BrowserAnimations"},...OO],PO=[{provide:fM,useClass:oO},{provide:h.QbO,useValue:"NoopAnimations"},...OO];let nU=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?PO:NM}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:NM,imports:[Zu]}),n})(),rU=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-navbar"]],decls:11,vars:0,consts:[[1,"navbar","navbar-dark","bg-dark","py-2"],[1,"container-fluid"],[1,"d-flex"],[2,"color","aliceblue"],[1,"d-flex","pt-2"]],template:function(t,r){1&t&&(h.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"h4",3),h._uU(4,"PrintreC\u0103r\u021bi.ro"),h.qZA()(),h.TgZ(5,"div",2)(6,"h2",3),h._uU(7,"Client Database"),h.qZA()(),h.TgZ(8,"div",4)(9,"h4",3),h._uU(10,"Order Processing Team"),h.qZA()()()())}}),n})(),iU=(()=>{class n{constructor(){this.title="clients"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&h._UZ(0,"app-navbar")(1,"router-outlet")},dependencies:[m,rU]}),n})();const kO_firebase={apiKey:"AIzaSyAqM9JOAZQeKkMLOWfCkVxZoussJl5-MKs",authDomain:"clients-2accc.firebaseapp.com",projectId:"clients-2accc",storageBucket:"clients-2accc.appspot.com",messagingSenderId:"667464265101",appId:"1:667464265101:web:263d5a049fd50ed979e1c4"};let sU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),oU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[iU]}),n.\u0275inj=h.cJS({imports:[Zu,rL,vo.hO.initializeApp(kO_firebase),AF,zf,XF.forRoot(),nU,ME,sU]}),n})();(0,h.G48)(),Wu().bootstrapModule(oU).catch(n=>console.error(n))},5867:(lt,Se,k)=>{k.d(Se,{C6:()=>h.getApps,Mq:()=>h.getApp});var h=k(9681);(0,h.registerVersion)("firebase","9.9.4","app")},127:(lt,Se,k)=>{k.d(Se,{Z:()=>h.Z});var h=k(3942);h.Z.registerVersion("firebase","9.9.4","app-compat")},2274:(lt,Se,k)=>{k.r(Se);var h=k(5861),te=k(3942),O=k(2090),ae=k(9681),ie=k(655),he=k(1877),le=k(4859);const we=function Ve(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Xe=function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new he.Yd("@firebase/auth");function rt(y,...f){Ye.logLevel<=he.in.ERROR&&Ye.error(`Auth (${ae.SDK_VERSION}): ${y}`,...f)}function Ae(y,...f){throw je(y,...f)}function ve(y,...f){return je(y,...f)}function De(y,f,m){const w=Object.assign(Object.assign({},Xe()),{[f]:m});return new O.LL("auth","Firebase",w).create(f,{appName:y.name})}function Be(y,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Ae(y,"argument-error"),De(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...f){if("string"!=typeof y){const m=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(m,...w)}return _e.create(y,...f)}function U(y,f,...m){if(!y)throw je(f,...m)}function ye(y){const f="INTERNAL ASSERTION FAILED: "+y;throw rt(f),new Error(f)}function Y(y,f){y||ye(f)}const X=new Map;function se(y){Y(y instanceof Function,"Expected a class definition");let f=X.get(y);return f?(Y(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,X.set(y,f),f)}function Pe(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ft(){return"http:"===qt()||"https:"===qt()}function qt(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(f,m){this.shortDelay=f,this.longDelay=m,Y(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Gt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ft()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xn(y,f){Y(y.emulator,"Emulator should always be set here");const{url:m}=y.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class Zt{static initialize(f,m,w){this.fetchImpl=f,m&&(this.headersImpl=m),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},xr=new sn(3e4,6e4);function Vt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function rn(y,f,m,w){return ba.apply(this,arguments)}function ba(){return(ba=(0,h.Z)(function*(y,f,m,w,A={}){return Hr(y,A,(0,h.Z)(function*(){let R={},W={};w&&("GET"===f?W=w:R={body:JSON.stringify(w)});const ce=(0,O.xO)(Object.assign({key:y.config.apiKey},W)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),Zt.fetch()(Oi(y,y.config.apiHost,m,ce),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Hr(y,f,m){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,h.Z)(function*(y,f,m){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Kt),f);try{const A=new zr(y),R=yield Promise.race([m(),A.promise]);A.clearNetworkTimeout();const W=yield R.json();if("needConfirmation"in W)throw _i(y,"account-exists-with-different-credential",W);if(R.ok&&!("errorMessage"in W))return W;{const ce=R.ok?W.errorMessage:W.error.message,[Le,Je]=ce.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw _i(y,"credential-already-in-use",W);if("EMAIL_EXISTS"===Le)throw _i(y,"email-already-in-use",W);if("USER_DISABLED"===Le)throw _i(y,"user-disabled",W);const Et=w[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw De(y,Et,Je);Ae(y,Et)}}catch(A){if(A instanceof O.ZR)throw A;Ae(y,"network-request-failed")}})).apply(this,arguments)}function Gr(y,f,m,w){return ms.apply(this,arguments)}function ms(){return(ms=(0,h.Z)(function*(y,f,m,w,A={}){const R=yield rn(y,f,m,w,A);return"mfaPendingCredential"in R&&Ae(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Oi(y,f,m,w){const A=`${f}${m}?${w}`;return y.config.emulator?xn(y.config,A):`${y.config.apiScheme}://${A}`}class zr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,w)=>{this.timer=setTimeout(()=>w(ve(this.auth,"network-request-failed")),xr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _i(y,f,m){const w={appName:y.name};m.email&&(w.email=m.email),m.phoneNumber&&(w.phoneNumber=m.phoneNumber);const A=ve(y,f,w);return A.customData._tokenResponse=m,A}function Ze(){return(Ze=(0,h.Z)(function*(y,f){return rn(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function qr(y,f){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,h.Z)(function*(y,f){return rn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Nn(y,f){return vi.apply(this,arguments)}function vi(){return(vi=(0,h.Z)(function*(y,f){return rn(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ni(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function hn(){return(hn=(0,h.Z)(function*(y,f=!1){const m=(0,O.m9)(y),w=yield m.getIdToken(f),A=ut(w);U(A&&A.exp&&A.auth_time&&A.iat,m.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,W=R?.sign_in_provider;return{claims:A,token:w,authTime:ni(pt(A.auth_time)),issuedAtTime:ni(pt(A.iat)),expirationTime:ni(pt(A.exp)),signInProvider:W||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function pt(y){return 1e3*Number(y)}function ut(y){var f;const[m,w,A]=y.split(".");if(void 0===m||void 0===w||void 0===A)return rt("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,O.tV)(w);return R?JSON.parse(R):(rt("Failed to decode base64 JWT payload"),null)}catch(R){return rt("Caught error parsing JWT payload as JSON",null===(f=R)||void 0===f?void 0:f.toString()),null}}function sr(y,f){return or.apply(this,arguments)}function or(){return(or=(0,h.Z)(function*(y,f,m=!1){if(m)return f;try{return yield f}catch(w){throw w instanceof O.ZR&&Nr(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Nr({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Dt{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),w)}iteration(){var f=this;return(0,h.Z)(function*(){var m;try{yield f.user.getIdToken(!0)}catch(w){return void("auth/network-request-failed"===(null===(m=w)||void 0===m?void 0:m.code)&&f.schedule(!0))}f.schedule()})()}}class Yi{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ni(this.lastLoginAt),this.creationTime=ni(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yt(y){return wi.apply(this,arguments)}function wi(){return(wi=(0,h.Z)(function*(y){var f;const m=y.auth,w=yield y.getIdToken(),A=yield sr(y,Nn(m,{idToken:w}));U(A?.users.length,m,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const W=null!==(f=R.providerUserInfo)&&void 0!==f&&f.length?V(R.providerUserInfo):[],ce=j(y.providerData,W),Et=!!y.isAnonymous&&!(y.email&&R.passwordHash||ce?.length),ht={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ce,metadata:new Yi(R.createdAt,R.lastLoginAt),isAnonymous:Et};Object.assign(y,ht)})).apply(this,arguments)}function Z(){return(Z=(0,h.Z)(function*(y){const f=(0,O.m9)(y);yield Yt(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function j(y,f){return[...y.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function V(y){return y.map(f=>{var{providerId:m}=f,w=(0,ie._T)(f,["providerId"]);return{providerId:m,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function q(){return(q=(0,h.Z)(function*(y,f){const m=yield Hr(y,{},(0,h.Z)(function*(){const w=(0,O.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,W=Oi(y,A,"/v1/token",`key=${R}`),ce=yield y._getAdditionalHeaders();return ce["Content-Type"]="application/x-www-form-urlencoded",Zt.fetch()(W,{method:"POST",headers:ce,body:w})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Ce{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){U(f.idToken,"internal-error"),U(typeof f.idToken<"u","internal-error"),U(typeof f.refreshToken<"u","internal-error");const m="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function on(y){const f=ut(y);return U(f,"internal-error"),U(typeof f.exp<"u","internal-error"),U(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var w=this;return(0,h.Z)(function*(){return U(!w.accessToken||w.refreshToken,f,"user-token-expired"),m||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var w=this;return(0,h.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:W}=yield function H(y,f){return q.apply(this,arguments)}(f,m);w.updateTokensAndExpiration(A,R,Number(W))})()}updateTokensAndExpiration(f,m,w){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,m){const{refreshToken:w,accessToken:A,expirationTime:R}=m,W=new Ce;return w&&(U("string"==typeof w,"internal-error",{appName:f}),W.refreshToken=w),A&&(U("string"==typeof A,"internal-error",{appName:f}),W.accessToken=A),R&&(U("number"==typeof R,"internal-error",{appName:f}),W.expirationTime=R),W}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Ce,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Ue(y,f){U("string"==typeof y||typeof y>"u","internal-error",{appName:f})}class it{constructor(f){var{uid:m,auth:w,stsTokenManager:A}=f,R=(0,ie._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Yi(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,h.Z)(function*(){const w=yield sr(m,m.stsTokenManager.getToken(m.auth,f));return U(w,m.auth,"internal-error"),m.accessToken!==w&&(m.accessToken=w,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),w})()}getIdTokenResult(f){return function Wn(y){return hn.apply(this,arguments)}(this,f)}reload(){return function Wt(y){return Z.apply(this,arguments)}(this)}_assign(f){this!==f&&(U(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new it(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var w=this;return(0,h.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),m&&(yield Yt(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,h.Z)(function*(){const m=yield f.getIdToken();return yield sr(f,function Ao(y,f){return Ze.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var w,A,R,W,ce,Le,Je,Et;const ht=null!==(w=m.displayName)&&void 0!==w?w:void 0,cr=null!==(A=m.email)&&void 0!==A?A:void 0,ls=null!==(R=m.phoneNumber)&&void 0!==R?R:void 0,Cc=null!==(W=m.photoURL)&&void 0!==W?W:void 0,Tc=null!==(ce=m.tenantId)&&void 0!==ce?ce:void 0,Fr=null!==(Le=m._redirectEventId)&&void 0!==Le?Le:void 0,bf=null!==(Je=m.createdAt)&&void 0!==Je?Je:void 0,sl=null!==(Et=m.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:Sc,emailVerified:u_,isAnonymous:xg,providerData:ta,stsTokenManager:l_}=m;U(Sc&&l_,f,"internal-error");const d0=Ce.fromJSON(this.name,l_);U("string"==typeof Sc,f,"internal-error"),Ue(ht,f.name),Ue(cr,f.name),U("boolean"==typeof u_,f,"internal-error"),U("boolean"==typeof xg,f,"internal-error"),Ue(ls,f.name),Ue(Cc,f.name),Ue(Tc,f.name),Ue(Fr,f.name),Ue(bf,f.name),Ue(sl,f.name);const ou=new it({uid:Sc,auth:f,email:cr,emailVerified:u_,displayName:ht,isAnonymous:xg,photoURL:Cc,phoneNumber:ls,tenantId:Tc,stsTokenManager:d0,createdAt:bf,lastLoginAt:sl});return ta&&Array.isArray(ta)&&(ou.providerData=ta.map(Zd=>Object.assign({},Zd))),Fr&&(ou._redirectEventId=Fr),ou}static _fromIdTokenResponse(f,m,w=!1){return(0,h.Z)(function*(){const A=new Ce;A.updateFromServerResponse(m);const R=new it({uid:m.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield Yt(R),R})()}}const Qt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,w){var A=this;return(0,h.Z)(function*(){A.storage[m]=w})()}_get(m){var w=this;return(0,h.Z)(function*(){const A=w.storage[m];return void 0===A?null:A})()}_remove(m){var w=this;return(0,h.Z)(function*(){delete w.storage[m]})()}_addListener(m,w){}_removeListener(m,w){}}return y.type="NONE",y})();function Zn(y,f,m){return`firebase:${y}:${f}:${m}`}class jt{constructor(f,m,w){this.persistence=f,this.auth=m,this.userKey=w;const{config:A,name:R}=this.auth;this.fullUserKey=Zn(this.userKey,A.apiKey,R),this.fullPersistenceKey=Zn("persistence",A.apiKey,R),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,h.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?it._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,h.Z)(function*(){if(m.persistence===f)return;const w=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,w?m.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,w="authUser"){return(0,h.Z)(function*(){if(!m.length)return new jt(se(Qt),f,w);const A=(yield Promise.all(m.map(function(){var Je=(0,h.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let R=A[0]||se(Qt);const W=Zn(w,f.config.apiKey,f.name);let ce=null;for(const Je of m)try{const Et=yield Je._get(W);if(Et){const ht=it._fromJSON(f,Et);Je!==R&&(ce=ht),R=Je;break}}catch{}const Le=A.filter(Je=>Je._shouldAllowMigration);return R._shouldAllowMigration&&Le.length?(R=Le[0],ce&&(yield R._set(W,ce.toJSON())),yield Promise.all(m.map(function(){var Je=(0,h.Z)(function*(Et){if(Et!==R)try{yield Et._remove(W)}catch{}});return function(Et){return Je.apply(this,arguments)}}())),new jt(R,f,w)):new jt(R,f,w)})()}}function Pt(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Rr(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(mn(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(He(f))return"Blackberry";if(vt(f))return"Webos";if(Vn(f))return"Safari";if((f.includes("chrome/")||Pi(f))&&!f.includes("edge/"))return"Chrome";if(Un(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function mn(y=(0,O.z$)()){return/firefox\//i.test(y)}function Vn(y=(0,O.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Pi(y=(0,O.z$)()){return/crios\//i.test(y)}function Rr(y=(0,O.z$)()){return/iemobile/i.test(y)}function Un(y=(0,O.z$)()){return/android/i.test(y)}function He(y=(0,O.z$)()){return/blackberry/i.test(y)}function vt(y=(0,O.z$)()){return/webos/i.test(y)}function Xt(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function zs(y=(0,O.z$)()){return Xt(y)||Un(y)||vt(y)||He(y)||/windows phone/i.test(y)||Rr(y)}function ys(y,f=[]){let m;switch(y){case"Browser":m=Pt((0,O.z$)());break;case"Worker":m=`${Pt((0,O.z$)())}-${y}`;break;default:m=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ae.SDK_VERSION}/${w}`}class qs{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,m){const w=R=>new Promise((W,ce)=>{try{W(f(R))}catch(Le){ce(Le)}});w.onAbort=m,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var m=this;return(0,h.Z)(function*(){var w;if(m.auth.currentUser===f)return;const A=[];try{for(const R of m.queue)yield R(f),R.onAbort&&A.push(R.onAbort)}catch(R){A.reverse();for(const W of A)try{W()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(w=R)||void 0===w?void 0:w.message})}})()}}class kt{constructor(f,m,w){this.app=f,this.heartbeatServiceProvider=m,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ws(this),this.idTokenSubscription=new Ws(this),this.beforeStateQueue=new qs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,m){var w=this;return m&&(this._popupRedirectResolver=se(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var A,R;if(!w._deleted&&(w.persistenceManager=yield jt.create(w,f),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(m),w.lastNotifiedUid=(null===(R=w.currentUser)||void 0===R?void 0:R.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,h.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m,!0)}})()}initializeCurrentUser(f){var m=this;return(0,h.Z)(function*(){var w;const A=yield m.assertedPersistence.getCurrentUser();let R=A,W=!1;if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ce=null===(w=m.redirectUser)||void 0===w?void 0:w._redirectEventId,Le=R?._redirectEventId,Je=yield m.tryRedirectSignIn(f);(!ce||ce===Le)&&Je?.user&&(R=Je.user,W=!0)}if(!R)return m.directlySetCurrentUser(null);if(!R._redirectEventId){if(W)try{yield m.beforeStateQueue.runMiddleware(R)}catch(ce){R=A,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ce))}return R?m.reloadAndSetCurrentUserOrClear(R):m.directlySetCurrentUser(null)}return U(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===R._redirectEventId?m.directlySetCurrentUser(R):m.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(f){var m=this;return(0,h.Z)(function*(){let w=null;try{w=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch{yield m._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,h.Z)(function*(){var w;try{yield Yt(f)}catch(A){if("auth/network-request-failed"!==(null===(w=A)||void 0===w?void 0:w.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ze(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,h.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,h.Z)(function*(){const w=f?(0,O.m9)(f):null;return w&&U(w.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(w&&w._clone(m))})()}_updateCurrentUser(f,m=!1){var w=this;return(0,h.Z)(function*(){if(!w._deleted)return f&&U(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),m||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,h.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,h.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(se(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new O.LL("auth","Firebase",f())}onAuthStateChanged(f,m,w){return this.registerStateListener(this.authStateSubscription,f,m,w)}beforeAuthStateChanged(f,m){return this.beforeStateQueue.pushCallback(f,m)}onIdTokenChanged(f,m,w){return this.registerStateListener(this.idTokenSubscription,f,m,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var w=this;return(0,h.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(m);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const w=f&&se(f)||m._popupRedirectResolver;U(w,m,"argument-error"),m.redirectPersistenceManager=yield jt.create(m,[se(w._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,h.Z)(function*(){var w,A;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(w=m._currentUser)||void 0===w?void 0:w._redirectEventId)===f?m._currentUser:(null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,h.Z)(function*(){if(f===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,w,A){if(this._deleted)return()=>{};const R="function"==typeof m?m:m.next.bind(m),W=this._isInitialized?Promise.resolve():this._initializationPromise;return U(W,this,"internal-error"),W.then(()=>R(this.currentUser)),"function"==typeof m?f.addObserver(m,w,A):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==f&&m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh(),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=ys(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,h.Z)(function*(){var m;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(m=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function _n(y){return(0,O.m9)(y)}class Ws{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,O.ne)(m=>this.observer=m)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ki(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function _s(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class mr{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return ye("not implemented")}_getIdTokenResponse(f){return ye("not implemented")}_linkToIdToken(f,m){return ye("not implemented")}_getReauthenticationResolver(f){return ye("not implemented")}}function jn(y,f){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,h.Z)(function*(y,f){return rn(y,"POST","/v1/accounts:resetPassword",Vt(y,f))})).apply(this,arguments)}function an(y,f){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,h.Z)(function*(y,f){return rn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Bl(y,f){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,h.Z)(function*(y,f){return rn(y,"POST","/v1/accounts:update",Vt(y,f))})).apply(this,arguments)}function Mo(){return(Mo=(0,h.Z)(function*(y,f){return Gr(y,"POST","/v1/accounts:signInWithPassword",Vt(y,f))})).apply(this,arguments)}function ws(y,f){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,h.Z)(function*(y,f){return rn(y,"POST","/v1/accounts:sendOobCode",Vt(y,f))})).apply(this,arguments)}function $n(y,f){return jl.apply(this,arguments)}function jl(){return(jl=(0,h.Z)(function*(y,f){return ws(y,f)})).apply(this,arguments)}function ar(y,f){return Or.apply(this,arguments)}function Or(){return(Or=(0,h.Z)(function*(y,f){return ws(y,f)})).apply(this,arguments)}function Du(y,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,h.Z)(function*(y,f){return ws(y,f)})).apply(this,arguments)}function $l(y,f){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,h.Z)(function*(y,f){return ws(y,f)})).apply(this,arguments)}function md(){return(md=(0,h.Z)(function*(y,f){return Gr(y,"POST","/v1/accounts:signInWithEmailLink",Vt(y,f))})).apply(this,arguments)}function Hl(){return(Hl=(0,h.Z)(function*(y,f){return Gr(y,"POST","/v1/accounts:signInWithEmailLink",Vt(y,f))})).apply(this,arguments)}class Gl extends mr{constructor(f,m,w,A=null){super("password",w),this._email=f,this._password=m,this._tenantId=A}static _fromEmailAndPassword(f,m){return new Gl(f,m,"password")}static _fromEmailAndCode(f,m,w=null){return new Gl(f,m,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function Ca(y,f){return Mo.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function Zh(y,f){return md.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Ae(f,"internal-error")}})()}_linkToIdToken(f,m){var w=this;return(0,h.Z)(function*(){switch(w.signInMethod){case"password":return an(f,{idToken:m,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Kh(y,f){return Hl.apply(this,arguments)}(f,{idToken:m,email:w._email,oobCode:w._password});default:Ae(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Yn(y,f){return yd.apply(this,arguments)}function yd(){return(yd=(0,h.Z)(function*(y,f){return Gr(y,"POST","/v1/accounts:signInWithIdp",Vt(y,f))})).apply(this,arguments)}class Qi extends mr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new Qi(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Ae("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=m,R=(0,ie._T)(m,["providerId","signInMethod"]);if(!w||!A)return null;const W=new Qi(w,A);return W.idToken=R.idToken||void 0,W.accessToken=R.accessToken||void 0,W.secret=R.secret,W.nonce=R.nonce,W.pendingToken=R.pendingToken||null,W}_getIdTokenResponse(f){return Yn(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,Yn(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Yn(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,O.xO)(m)}return f}}function ng(y,f){return _d.apply(this,arguments)}function _d(){return(_d=(0,h.Z)(function*(y,f){return rn(y,"POST","/v1/accounts:sendVerificationCode",Vt(y,f))})).apply(this,arguments)}function Es(){return(Es=(0,h.Z)(function*(y,f){return Gr(y,"POST","/v1/accounts:signInWithPhoneNumber",Vt(y,f))})).apply(this,arguments)}function vd(){return(vd=(0,h.Z)(function*(y,f){const m=yield Gr(y,"POST","/v1/accounts:signInWithPhoneNumber",Vt(y,f));if(m.temporaryProof)throw _i(y,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const ig={USER_NOT_FOUND:"user-not-found"};function wd(){return(wd=(0,h.Z)(function*(y,f){return Gr(y,"POST","/v1/accounts:signInWithPhoneNumber",Vt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),ig)})).apply(this,arguments)}class Is extends mr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Is({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Is({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function zl(y,f){return Es.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function rg(y,f){return vd.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function sg(y,f){return wd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:w,verificationCode:A}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:R}=f;return w||m||A||R?new Is({verificationId:m,verificationCode:w,phoneNumber:A,temporaryProof:R}):null}}class bu{constructor(f){var m,w,A,R,W,ce;const Le=(0,O.zd)((0,O.pd)(f)),Je=null!==(m=Le.apiKey)&&void 0!==m?m:null,Et=null!==(w=Le.oobCode)&&void 0!==w?w:null,ht=function Ed(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);U(Je&&Et&&ht,"argument-error"),this.apiKey=Je,this.operation=ht,this.code=Et,this.continueUrl=null!==(R=Le.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(W=Le.languageCode)&&void 0!==W?W:null,this.tenantId=null!==(ce=Le.tenantId)&&void 0!==ce?ce:null}static parseLink(f){const m=function Id(y){const f=(0,O.zd)((0,O.pd)(y)).link,m=f?(0,O.zd)((0,O.pd)(f)).deep_link_id:null,w=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(w?(0,O.zd)((0,O.pd)(w)).link:null)||w||m||f||y}(f);try{return new bu(m)}catch{return null}}}let Fi=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(m,w){return Gl._fromEmailAndPassword(m,w)}static credentialWithLink(m,w){const A=bu.parseLink(w);return U(A,"argument-error"),Gl._fromEmailAndCode(m,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Ji{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class Xi extends Ji{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Ks extends Xi{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return U("providerId"in m&&"signInMethod"in m,"argument-error"),Qi._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return U(f.idToken||f.accessToken,"argument-error"),Qi._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Ks.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Ks.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:R,nonce:W,providerId:ce}=f;if(!w&&!A&&!m&&!R||!ce)return null;try{return new Ks(ce)._credential({idToken:m,accessToken:w,nonce:W,pendingToken:R})}catch{return null}}}let Sa=(()=>{class y extends Xi{constructor(){super("facebook.com")}static credential(m){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Cu=(()=>{class y extends Xi{constructor(){super("google.com"),this.addScope("profile")}static credential(m,w){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:w,oauthAccessToken:A}=m;if(!w&&!A)return null;try{return y.credential(w,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ql=(()=>{class y extends Xi{constructor(){super("github.com")}static credential(m){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return y.credential(m.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class xo extends mr{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Yn(f,this.buildRequest())}_linkToIdToken(f,m){const w=this.buildRequest();return w.idToken=m,Yn(f,w)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Yn(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:R}=m;return w&&A&&R&&w===A?new xo(w,R):null}static _create(f,m){return new xo(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ii extends Ji{constructor(f){U(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ii.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ii.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=xo.fromJSON(f);return U(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:w}=f;if(!m||!w)return null;try{return xo._create(w,m)}catch{return null}}}let Wr=(()=>{class y extends Xi{constructor(){super("twitter.com")}static credential(m,w){return Qi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:w})}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=m;if(!w||!A)return null;try{return y.credential(w,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function No(y,f){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,h.Z)(function*(y,f){return Gr(y,"POST","/v1/accounts:signUp",Vt(y,f))})).apply(this,arguments)}class yr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,w,A=!1){return(0,h.Z)(function*(){const R=yield it._fromIdTokenResponse(f,w,A),W=Jh(w);return new yr({user:R,providerId:W,_tokenResponse:w,operationType:m})})()}static _forOperation(f,m,w){return(0,h.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=Jh(w);return new yr({user:f,providerId:A,_tokenResponse:w,operationType:m})})()}}function Jh(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function bn(){return(bn=(0,h.Z)(function*(y){var f;const m=_n(y);if(yield m._initializationPromise,null!==(f=m.currentUser)&&void 0!==f&&f.isAnonymous)return new yr({user:m.currentUser,providerId:null,operationType:"signIn"});const w=yield No(m,{returnSecureToken:!0}),A=yield yr._fromIdTokenResponse(m,"signIn",w,!0);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Tu extends O.ZR{constructor(f,m,w,A){var R;super(m.code,m.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Tu.prototype),this.customData={appName:f.name,tenantId:null!==(R=f.tenantId)&&void 0!==R?R:void 0,_serverResponse:m.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,m,w,A){return new Tu(f,m,w,A)}}function ef(y,f,m,w){return("reauthenticate"===f?m._getReauthenticationResolver(y):m._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Tu._fromErrorAndOperation(y,R,f,w):R})}function si(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function Su(){return(Su=(0,h.Z)(function*(y,f){const m=(0,O.m9)(y);yield zt(!0,m,f);const{providerUserInfo:w}=yield qr(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),A=si(w||[]);return m.providerData=m.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ro(y,f){return ts.apply(this,arguments)}function ts(){return(ts=(0,h.Z)(function*(y,f,m=!1){const w=yield sr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),m);return yr._forOperation(y,"link",w)})).apply(this,arguments)}function zt(y,f,m){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,h.Z)(function*(y,f,m){yield Yt(f);const A=!1===y?"provider-already-linked":"no-such-provider";U(si(f.providerData).has(m)===y,f.auth,A)})).apply(this,arguments)}function Ys(y,f){return Au.apply(this,arguments)}function Au(){return(Au=(0,h.Z)(function*(y,f,m=!1){var w;const{auth:A}=y,R="reauthenticate";try{const W=yield sr(y,ef(A,R,f,y),m);U(W.idToken,A,"internal-error");const ce=ut(W.idToken);U(ce,A,"internal-error");const{sub:Le}=ce;return U(y.uid===Le,A,"user-mismatch"),yr._forOperation(y,R,W)}catch(W){throw"auth/user-not-found"===(null===(w=W)||void 0===w?void 0:w.code)&&Ae(A,"user-mismatch"),W}})).apply(this,arguments)}function Di(y,f){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,h.Z)(function*(y,f,m=!1){const w="signIn",A=yield ef(y,w,f),R=yield yr._fromIdTokenResponse(y,w,A);return m||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function En(y,f){return bt.apply(this,arguments)}function bt(){return(bt=(0,h.Z)(function*(y,f){return Di(_n(y),f)})).apply(this,arguments)}function xu(y,f){return tf.apply(this,arguments)}function tf(){return(tf=(0,h.Z)(function*(y,f){const m=(0,O.m9)(y);return yield zt(!1,m,f.providerId),Ro(m,f)})).apply(this,arguments)}function Nu(y,f){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,h.Z)(function*(y,f){return Ys((0,O.m9)(y),f)})).apply(this,arguments)}function Wl(y,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,h.Z)(function*(y,f){return Gr(y,"POST","/v1/accounts:signInWithCustomToken",Vt(y,f))})).apply(this,arguments)}function Ma(){return(Ma=(0,h.Z)(function*(y,f){const m=_n(y),w=yield Wl(m,{token:f,returnSecureToken:!0}),A=yield yr._fromIdTokenResponse(m,"signIn",w);return yield m._updateCurrentUser(A.user),A})).apply(this,arguments)}class Te{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?$t._fromServerResponse(f,m):Ae(f,"internal-error")}}class $t extends Te{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new $t(m)}}function Ou(y,f,m){var w;U((null===(w=m.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),U(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(U(m.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(U(m.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function Cn(){return(Cn=(0,h.Z)(function*(y,f,m){const w=(0,O.m9)(y),A={requestType:"PASSWORD_RESET",email:f};m&&Ou(w,A,m),yield ar(w,A)})).apply(this,arguments)}function Oo(){return(Oo=(0,h.Z)(function*(y,f,m){yield jn((0,O.m9)(y),{oobCode:f,newPassword:m})})).apply(this,arguments)}function xa(){return(xa=(0,h.Z)(function*(y,f){yield Bl((0,O.m9)(y),{oobCode:f})})).apply(this,arguments)}function Na(y,f){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,h.Z)(function*(y,f){const m=(0,O.m9)(y),w=yield jn(m,{oobCode:f}),A=w.requestType;switch(U(A,m,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(w.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(w.mfaInfo,m,"internal-error");default:U(w.email,m,"internal-error")}let R=null;return w.mfaInfo&&(R=Te._fromServerResponse(_n(m),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function bd(){return(bd=(0,h.Z)(function*(y,f){const{data:m}=yield Na((0,O.m9)(y),f);return m.email})).apply(this,arguments)}function Tn(){return(Tn=(0,h.Z)(function*(y,f,m){const w=_n(y),A=yield No(w,{returnSecureToken:!0,email:f,password:m}),R=yield yr._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(R.user),R})).apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(y,f,m){const w=(0,O.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};U(m.handleCodeInApp,w,"argument-error"),m&&Ou(w,A,m),yield Du(w,A)})).apply(this,arguments)}function Ra(){return(Ra=(0,h.Z)(function*(y,f,m){const w=(0,O.m9)(y),A=Fi.credentialWithLink(f,m||Pe());return U(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),En(w,A)})).apply(this,arguments)}function ag(y,f){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,h.Z)(function*(y,f){return rn(y,"POST","/v1/accounts:createAuthUri",Vt(y,f))})).apply(this,arguments)}function Oa(){return(Oa=(0,h.Z)(function*(y,f){const w={identifier:f,continueUri:ft()?Pe():"http://localhost"},{signinMethods:A}=yield ag((0,O.m9)(y),w);return A||[]})).apply(this,arguments)}function Pa(){return(Pa=(0,h.Z)(function*(y,f){const m=(0,O.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ou(m.auth,A,f);const{email:R}=yield $n(m.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function Lu(){return(Lu=(0,h.Z)(function*(y,f,m){const w=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};m&&Ou(w.auth,R,m);const{email:W}=yield $l(w.auth,R);W!==y.email&&(yield y.reload())})).apply(this,arguments)}function Vu(y,f){return tc.apply(this,arguments)}function tc(){return(tc=(0,h.Z)(function*(y,f){return rn(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function rc(){return(rc=(0,h.Z)(function*(y,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const w=(0,O.m9)(y),R={idToken:yield w.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},W=yield sr(w,Vu(w.auth,R));w.displayName=W.displayName||null,w.photoURL=W.photoUrl||null;const ce=w.providerData.find(({providerId:Le})=>"password"===Le);ce&&(ce.displayName=w.displayName,ce.photoURL=w.photoURL),yield w._updateTokensIfNecessary(W)})).apply(this,arguments)}function eo(y,f,m){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,h.Z)(function*(y,f,m){const{auth:w}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(R.email=f),m&&(R.password=m);const W=yield sr(y,an(w,R));yield y._updateTokensIfNecessary(W,!0)})).apply(this,arguments)}class Zr{constructor(f,m,w={}){this.isNewUser=f,this.providerId=m,this.profile=w}}class fn extends Zr{constructor(f,m,w,A){super(f,m,w),this.username=A}}class Td extends Zr{constructor(f,m){super(f,"facebook.com",m)}}class ic extends fn{constructor(f,m){super(f,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class nf extends Zr{constructor(f,m){super(f,"google.com",m)}}class sc extends fn{constructor(f,m,w){super(f,"twitter.com",m,w)}}function Bu(y){const{user:f,_tokenResponse:m}=y;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Qn(y){var f,m;if(!y)return null;const{providerId:w}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&y?.idToken){const W=null===(m=null===(f=ut(y.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(W)return new Zr(R,"anonymous"!==W&&"custom"!==W?W:null)}if(!w)return null;switch(w){case"facebook.com":return new Td(R,A);case"github.com":return new ic(R,A);case"google.com":return new nf(R,A);case"twitter.com":return new sc(R,A,y.screenName||null);case"custom":case"anonymous":return new Zr(R,null);default:return new Zr(R,w,A)}}(m)}class to{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new to("enroll",f)}static _fromMfaPendingCredential(f){return new to("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,w;if(f?.multiFactorSession){if(null!==(m=f.multiFactorSession)&&void 0!==m&&m.pendingCredential)return to._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(w=f.multiFactorSession)&&void 0!==w&&w.idToken)return to._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ju{constructor(f,m,w){this.session=f,this.hints=m,this.signInResolver=w}static _fromError(f,m){const w=_n(f),A=m.customData._serverResponse,R=(A.mfaInfo||[]).map(ce=>Te._fromServerResponse(w,ce));U(A.mfaPendingCredential,w,"internal-error");const W=to._fromMfaPendingCredential(A.mfaPendingCredential);return new ju(W,R,function(){var ce=(0,h.Z)(function*(Le){const Je=yield Le._process(w,W);delete A.mfaInfo,delete A.mfaPendingCredential;const Et=Object.assign(Object.assign({},A),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(m.operationType){case"signIn":const ht=yield yr._fromIdTokenResponse(w,m.operationType,Et);return yield w._updateCurrentUser(ht.user),ht;case"reauthenticate":return U(m.user,w,"internal-error"),yr._forOperation(m.user,m.operationType,Et);default:Ae(w,"internal-error")}});return function(Le){return ce.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,h.Z)(function*(){return m.signInResolver(f)})()}}function $u(y,f){return rn(y,"POST","/v2/accounts/mfaEnrollment:start",Vt(y,f))}class rf{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(w=>Te._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new rf(f)}getSession(){var f=this;return(0,h.Z)(function*(){return to._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var w=this;return(0,h.Z)(function*(){const A=f,R=yield w.getSession(),W=yield sr(w.user,A._process(w.user.auth,R,m));return yield w.user._updateTokensIfNecessary(W),w.user.reload()})()}unenroll(f){var m=this;return(0,h.Z)(function*(){var w;const A="string"==typeof f?f:f.uid,R=yield m.user.getIdToken(),W=yield sr(m.user,function xd(y,f){return rn(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(y,f))}(m.user.auth,{idToken:R,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ce})=>ce!==A),yield m.user._updateTokensIfNecessary(W);try{yield m.user.reload()}catch(ce){if("auth/user-token-expired"!==(null===(w=ce)||void 0===w?void 0:w.code))throw ce}})()}}const no=new WeakMap,ro="__sak";class Gu{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ro,"1"),this.storage.removeItem(ro),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Fa=(()=>{class y extends Gu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,w)=>this.onStorageEvent(m,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ka(){const y=(0,O.z$)();return Vn(y)||Xt(y)}()&&function yn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=zs(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),R=this.localCache[w];A!==R&&m(w,R,A)}}onStorageEvent(m,w=!1){if(!m.key)return void this.forAllChangedKeys((ce,Le,Je)=>{this.notifyListeners(ce,Je)});const A=m.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ce=this.storage.getItem(A);if(m.newValue!==ce)null!==m.newValue?this.storage.setItem(A,m.newValue):this.storage.removeItem(A);else if(this.localCache[A]===m.newValue&&!w)return}const R=()=>{const ce=this.storage.getItem(A);!w&&this.localCache[A]===ce||this.notifyListeners(A,ce)},W=this.storage.getItem(A);!function Kn(){return(0,O.w1)()&&10===document.documentMode}()||W===m.newValue||m.newValue===m.oldValue?R():setTimeout(R,10)}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const R of Array.from(A))R(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,w){var A=()=>super._set,R=this;return(0,h.Z)(function*(){yield A().call(R,m,w),R.localCache[m]=JSON.stringify(w)})()}_get(m){var w=()=>super._get,A=this;return(0,h.Z)(function*(){const R=yield w().call(A,m);return A.localCache[m]=JSON.stringify(R),R})()}_remove(m){var w=()=>super._remove,A=this;return(0,h.Z)(function*(){yield w().call(A,m),delete A.localCache[m]})()}}return y.type="LOCAL",y})(),Vi=(()=>{class y extends Gu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,w){}_removeListener(m,w){}}return y.type="SESSION",y})();let Od=(()=>{class y{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const w=this.receivers.find(R=>R.isListeningto(m));if(w)return w;const A=new y(m);return this.receivers.push(A),A}isListeningto(m){return this.eventTarget===m}handleEvent(m){var w=this;return(0,h.Z)(function*(){const A=m,{eventId:R,eventType:W,data:ce}=A.data,Le=w.handlersMap[W];if(!Le?.size)return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:W});const Je=Array.from(Le).map(function(){var ht=(0,h.Z)(function*(cr){return cr(A.origin,ce)});return function(cr){return ht.apply(this,arguments)}}()),Et=yield function Va(y){return Promise.all(y.map(function(){var f=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(w){return{fulfilled:!1,reason:w}}});return function(m){return f.apply(this,arguments)}}()))}(Je);A.ports[0].postMessage({status:"done",eventId:R,eventType:W,response:Et})})()}_subscribe(m,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(w)}_unsubscribe(m,w){this.handlersMap[m]&&w&&this.handlersMap[m].delete(w),(!w||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ua(y="",f=10){let m="";for(let w=0;w<f;w++)m+=Math.floor(10*Math.random());return y+m}class ac{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,w=50){var A=this;return(0,h.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let W,ce;return new Promise((Le,Je)=>{const Et=Ua("",20);R.port1.start();const ht=setTimeout(()=>{Je(new Error("unsupported_event"))},w);ce={messageChannel:R,onMessage(cr){const ls=cr;if(ls.data.eventId===Et)switch(ls.data.status){case"ack":clearTimeout(ht),W=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(W),Le(ls.data.response);break;default:clearTimeout(ht),clearTimeout(W),Je(new Error("invalid_response"))}}},A.handlers.add(ce),R.port1.addEventListener("message",ce.onMessage),A.target.postMessage({eventType:f,eventId:Et,data:m},[R.port2])}).finally(()=>{ce&&A.removeMessageHandler(ce)})})()}}function On(){return window}function zu(){return typeof On().WorkerGlobalScope<"u"&&"function"==typeof On().importScripts}function Ba(){return(Ba=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Cs="firebaseLocalStorageDb",Ts="firebaseLocalStorage",Zu="fbase_key";class so{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function ja(y,f){return y.transaction([Ts],f?"readwrite":"readonly").objectStore(Ts)}function Vo(){const y=indexedDB.open(Cs,1);return new Promise((f,m)=>{y.addEventListener("error",()=>{m(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Ts,{keyPath:Zu})}catch(A){m(A)}}),y.addEventListener("success",(0,h.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Ts)?f(w):(w.close(),yield function kd(){const y=indexedDB.deleteDatabase(Cs);return new so(y).toPromise()}(),f(yield Vo()))}))})}function is(y,f,m){return uc.apply(this,arguments)}function uc(){return(uc=(0,h.Z)(function*(y,f,m){const w=ja(y,!0).put({[Zu]:f,value:m});return new so(w).toPromise()})).apply(this,arguments)}function $a(){return($a=(0,h.Z)(function*(y,f){const m=ja(y,!1).get(f),w=yield new so(m).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function oo(y,f){const m=ja(y,!0).delete(f);return new so(m).toPromise()}const Uo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Vo()),m.db})()}_withRetries(m){var w=this;return(0,h.Z)(function*(){let A=0;for(;;)try{const R=yield w._openDb();return yield m(R)}catch(R){if(A++>3)throw R;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return zu()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=Od._getInstance(function Wu(){return zu()?self:null}()),m.receiver._subscribe("keyChanged",function(){var w=(0,h.Z)(function*(A,R){return{keyProcessed:(yield m._poll()).includes(R.key)}});return function(A,R){return w.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var w=(0,h.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return w.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var w,A;if(m.activeServiceWorker=yield function io(){return Ba.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new ac(m.activeServiceWorker);const R=yield m.sender._send("ping",{},800);!R||(null===(w=R[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var w=this;return(0,h.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function qu(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:m},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Vo();return yield is(m,ro,"1"),yield oo(m,ro),!0}catch{}return!1})()}_withPendingWrite(m){var w=this;return(0,h.Z)(function*(){w.pendingWrites++;try{yield m()}finally{w.pendingWrites--}})()}_set(m,w){var A=this;return(0,h.Z)(function*(){return A._withPendingWrite((0,h.Z)(function*(){return yield A._withRetries(R=>is(R,m,w)),A.localCache[m]=w,A.notifyServiceWorker(m)}))})()}_get(m){var w=this;return(0,h.Z)(function*(){const A=yield w._withRetries(R=>function Ku(y,f){return $a.apply(this,arguments)}(R,m));return w.localCache[m]=A,A})()}_remove(m){var w=this;return(0,h.Z)(function*(){return w._withPendingWrite((0,h.Z)(function*(){return yield w._withRetries(A=>oo(A,m)),delete w.localCache[m],w.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const w=yield m._withRetries(W=>{const ce=ja(W,!1).getAll();return new so(ce).toPromise()});if(!w)return[];if(0!==m.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:W,value:ce}of w)R.add(W),JSON.stringify(m.localCache[W])!==JSON.stringify(ce)&&(m.notifyListeners(W,ce),A.push(W));for(const W of Object.keys(m.localCache))m.localCache[W]&&!R.has(W)&&(m.notifyListeners(W,null),A.push(W));return A})()}notifyListeners(m,w){this.localCache[m]=w;const A=this.listeners[m];if(A)for(const R of Array.from(A))R(w)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(w)}_removeListener(m,w){this.listeners[m]&&(this.listeners[m].delete(w),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Bo(y,f){return rn(y,"POST","/v2/accounts/mfaSignIn:start",Vt(y,f))}function Ss(){return(Ss=(0,h.Z)(function*(y){return(yield rn(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function $o(y){return new Promise((f,m)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=A=>{const R=ve("internal-error");R.customData=A,m(R)},w.type="text/javascript",w.charset="UTF-8",function jo(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function Ju(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Ha=1e12;class dn{constructor(f){this.auth=f,this.counter=Ha,this._widgets=new Map}render(f,m){const w=this.counter;return this._widgets.set(w,new ug(f,this.auth.name,m||{})),this.counter++,w}reset(f){var m;const w=f||Ha;null===(m=this._widgets.get(w))||void 0===m||m.delete(),this._widgets.delete(w)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Ha))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,h.Z)(function*(){var w;return null===(w=m._widgets.get(f||Ha))||void 0===w||w.execute(),""})()}}class ug{constructor(f,m,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;U(A,"argument-error",{appName:m}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function jy(y){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}(50);const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lg=Ju("rcb"),$y=new sn(3e4,6e4);class sf{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=On().grecaptcha)||void 0===f||!f.render)}load(f,m=""){return U(function o0(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(m),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(On().grecaptcha):new Promise((w,A)=>{const R=On().setTimeout(()=>{A(ve(f,"network-request-failed"))},$y.get());On()[lg]=()=>{On().clearTimeout(R),delete On()[lg];const ce=On().grecaptcha;if(!ce)return void A(ve(f,"internal-error"));const Le=ce.render;ce.render=(Je,Et)=>{const ht=Le(Je,Et);return this.counter++,ht},this.hostLanguage=m,w(ce)},$o(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:lg,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(R),A(ve(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var m;return!(null===(m=On().grecaptcha)||void 0===m||!m.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ga{load(f){return(0,h.Z)(function*(){return new dn(f)})()}clearedOneInstance(){}}const cg="recaptcha",dg={theme:"light",type:"image"};class lr{constructor(f,m=Object.assign({},dg),w){this.parameters=m,this.type=cg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_n(w),this.isInvisible="invisible"===this.parameters.size,U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;U(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ga:new sf,this.validateStartingState()}verify(){var f=this;return(0,h.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(m)||new Promise(R=>{const W=ce=>{!ce||(f.tokenChangeListeners.delete(W),R(ce))};f.tokenChangeListeners.add(W),f.isInvisible&&w.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(w=>w(m)),"function"==typeof f)f(m);else if("string"==typeof f){const w=On()[f];"function"==typeof w&&w(m)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,h.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const w=document.createElement("div");m.appendChild(w),m=w}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,h.Z)(function*(){U(ft()&&!zu(),f.auth,"internal-error"),yield function un(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function Kr(y){return Ss.apply(this,arguments)}(f.auth);U(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Ci{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Is._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function Hn(){return(Hn=(0,h.Z)(function*(y,f,m){const w=_n(y),A=yield As(w,f,(0,O.m9)(m));return new Ci(A,R=>En(w,R))})).apply(this,arguments)}function Ti(){return(Ti=(0,h.Z)(function*(y,f,m){const w=(0,O.m9)(y);yield zt(!1,w,"phone");const A=yield As(w.auth,f,(0,O.m9)(m));return new Ci(A,R=>xu(w,R))})).apply(this,arguments)}function kr(){return(kr=(0,h.Z)(function*(y,f,m){const w=(0,O.m9)(y),A=yield As(w.auth,f,(0,O.m9)(m));return new Ci(A,R=>Nu(w,R))})).apply(this,arguments)}function As(y,f,m){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,h.Z)(function*(y,f,m){var w;const A=yield m.verify();try{let R;if(U("string"==typeof A,y,"argument-error"),U(m.type===cg,y,"argument-error"),R="string"==typeof f?{phoneNumber:f}:f,"session"in R){const W=R.session;if("phoneNumber"in R)return U("enroll"===W.type,y,"internal-error"),(yield $u(y,{idToken:W.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{U("signin"===W.type,y,"internal-error");const ce=(null===(w=R.multiFactorHint)||void 0===w?void 0:w.uid)||R.multiFactorUid;return U(ce,y,"missing-multi-factor-info"),(yield Bo(y,{mfaPendingCredential:W.credential,mfaEnrollmentId:ce,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:W}=yield ng(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return W}}finally{m._reset()}})).apply(this,arguments)}function cc(){return(cc=(0,h.Z)(function*(y,f){yield Ro((0,O.m9)(y),f)})).apply(this,arguments)}let qa=(()=>{class y{constructor(m){this.providerId=y.PROVIDER_ID,this.auth=_n(m)}verifyPhoneNumber(m,w){return As(this.auth,m,(0,O.m9)(w))}static credential(m,w){return Is._fromVerification(m,w)}static credentialFromResult(m){return y.credentialFromTaggedObject(m)}static credentialFromError(m){return y.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:w,temporaryProof:A}=m;return w&&A?Is._fromTokenResponse(w,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Go(y,f){return f?se(f):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ms extends mr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Yn(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Yn(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Yn(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function ot(y){return Di(y.auth,new Ms(y),y.bypassAuthState)}function Wa(y){const{auth:f,user:m}=y;return U(m,f,"internal-error"),Ys(m,new Ms(y),y.bypassAuthState)}function xs(y){return Za.apply(this,arguments)}function Za(){return(Za=(0,h.Z)(function*(y){const{auth:f,user:m}=y;return U(m,f,"internal-error"),Ro(m,new Ms(y),y.bypassAuthState)})).apply(this,arguments)}class zo{constructor(f,m,w,A,R=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,h.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(R){f.reject(R)}});return function(w,A){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,h.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:R,tenantId:W,error:ce,type:Le}=f;if(ce)return void m.reject(ce);const Je={auth:m.auth,requestUri:w,sessionId:A,tenantId:W||void 0,postBody:R||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Le)(Je))}catch(Et){m.reject(Et)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ot;case"linkViaPopup":case"linkViaRedirect":return xs;case"reauthViaPopup":case"reauthViaRedirect":return Wa;default:Ae(this.auth,"internal-error")}}resolve(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jn=new sn(2e3,1e4);function qo(){return(qo=(0,h.Z)(function*(y,f,m){const w=_n(y);Be(y,f,Ji);const A=Go(w,m);return new Ns(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function hc(){return(hc=(0,h.Z)(function*(y,f,m){const w=(0,O.m9)(y);Be(w.auth,f,Ji);const A=Go(w.auth,m);return new Ns(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function Ka(){return(Ka=(0,h.Z)(function*(y,f,m){const w=(0,O.m9)(y);Be(w.auth,f,Ji);const A=Go(w.auth,m);return new Ns(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let Ns=(()=>{class y extends zo{constructor(m,w,A,R,W){super(m,w,R,W),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const w=yield m.execute();return U(w,m.auth,"internal-error"),w})()}onExecution(){var m=this;return(0,h.Z)(function*(){Y(1===m.filter.length,"Popup operations only handle one event");const w=Ua();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],w),m.authWindow.associatedEvent=w,m.resolver._originValidation(m.auth).catch(A=>{m.reject(A)}),m.resolver._isIframeWebStorageSupported(m.auth,A=>{A||m.reject(ve(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const m=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,Jn.get())};m()}}return y.currentPopupAction=null,y})();const Si=new Map;class fc extends zo{constructor(f,m,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,h.Z)(function*(){let w=Si.get(m.auth._key());if(!w){try{const R=(yield function Wo(y,f){return Yr.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;w=()=>Promise.resolve(R)}catch(A){w=()=>Promise.reject(A)}Si.set(m.auth._key(),w)}return m.bypassAuthState||Si.set(m.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,w=this;return(0,h.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,m().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function Yr(){return(Yr=(0,h.Z)(function*(y,f){const m=Gn(f),w=as(y);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(m));return yield w._remove(m),A})).apply(this,arguments)}function os(y,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,h.Z)(function*(y,f){return as(y)._set(Gn(f),"true")})).apply(this,arguments)}function Os(y,f){Si.set(y._key(),f)}function as(y){return se(y._redirectPersistence)}function Gn(y){return Zn("pendingRedirect",y.config.apiKey,y.name)}function b(){return(b=(0,h.Z)(function*(y,f,m){const w=_n(y);Be(y,f,Ji);const A=Go(w,m);return yield os(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,h.Z)(function*(y,f,m){const w=(0,O.m9)(y);Be(w.auth,f,Ji);const A=Go(w.auth,m);yield os(A,w.auth);const R=yield dt(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",R)})).apply(this,arguments)}function be(){return(be=(0,h.Z)(function*(y,f,m){const w=(0,O.m9)(y);Be(w.auth,f,Ji);const A=Go(w.auth,m);yield zt(!1,w,f.providerId),yield os(A,w.auth);const R=yield dt(w);return A._openRedirect(w.auth,f,"linkViaRedirect",R)})).apply(this,arguments)}function et(){return(et=(0,h.Z)(function*(y,f){return yield _n(y)._initializationPromise,wt(y,f,!1)})).apply(this,arguments)}function wt(y,f){return St.apply(this,arguments)}function St(){return(St=(0,h.Z)(function*(y,f,m=!1){const w=_n(y),A=Go(w,f),W=yield new fc(w,A,m).execute();return W&&!m&&(delete W.user._redirectEventId,yield w._persistUserIfCurrent(W.user),yield w._setRedirectUser(null,f)),W})).apply(this,arguments)}function dt(y){return wn.apply(this,arguments)}function wn(){return(wn=(0,h.Z)(function*(y){const f=Ua(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class Zo{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(m=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Bi(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return At(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var w;if(f.error&&!At(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";m.onError(ve(this.auth,A))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const w=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ps(f))}saveEventToCache(f){this.cachedEventUids.add(Ps(f)),this.lastProcessedEventTime=Date.now()}}function Ps(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function At({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===f?.code}function ks(y){return ai.apply(this,arguments)}function ai(){return(ai=(0,h.Z)(function*(y,f={}){return rn(y,"GET","/v1/projects",f)})).apply(this,arguments)}const Ko=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,uo=/^https?/;function af(){return(af=(0,h.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield ks(y);for(const m of f)try{if(pg(m))return}catch{}Ae(y,"unauthorized-domain")})).apply(this,arguments)}function pg(y){const f=Pe(),{protocol:m,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const W=new URL(y);return""===W.hostname&&""===w?"chrome-extension:"===m&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&W.hostname===w}if(!uo.test(m))return!1;if(Ko.test(y))return w===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const gg=new sn(3e4,6e4);function Gy(){const y=On().___jsl;if(y?.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let m=0;m<y.CP.length;m++)y.CP[m]=null}let ji=null;function uf(y){return ji=ji||function Xn(y){return new Promise((f,m)=>{var w,A,R;function W(){Gy(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Gy(),m(ve(y,"network-request-failed"))},timeout:gg.get()})}if(null!==(A=null===(w=On().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)f(gapi.iframes.getContext());else{if(null===(R=On().gapi)||void 0===R||!R.load){const ce=Ju("iframefcb");return On()[ce]=()=>{gapi.load?W():m(ve(y,"network-request-failed"))},$o(`https://apis.google.com/js/api.js?onload=${ce}`).catch(Le=>m(Le))}W()}}).catch(f=>{throw ji=null,f})}(y),ji}const mg=new sn(5e3,15e3),zy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yg(y){const f=y.config;U(f.authDomain,y,"auth-domain-config-required");const m=f.emulator?xn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:ae.SDK_VERSION},A=cf.get(y.config.apiHost);A&&(w.eid=A);const R=y._getFrameworks();return R.length&&(w.fw=R.join(",")),`${m}?${(0,O.xO)(w).slice(1)}`}function Ya(){return Ya=(0,h.Z)(function*(y){const f=yield uf(y),m=On().gapi;return U(m,y,"internal-error"),f.open({where:document.body,url:yg(y),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zy,dontclear:!0},w=>new Promise(function(){var A=(0,h.Z)(function*(R,W){yield w.restyle({setHideOnLeave:!1});const ce=ve(y,"network-request-failed"),Le=On().setTimeout(()=>{W(ce)},mg.get());function Je(){On().clearTimeout(Le),R(w)}w.ping(Je).then(Je,()=>{W(ce)})});return function(R,W){return A.apply(this,arguments)}}()))}),Ya.apply(this,arguments)}const Fd={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class pc{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ho(y,f,m,w,A,R){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const W={apiKey:y.config.apiKey,appName:y.name,authType:m,redirectUrl:w,v:ae.SDK_VERSION,eventId:A};if(f instanceof Ji){f.setDefaultLanguage(y.languageCode),W.providerId=f.providerId||"",(0,O.xb)(f.getCustomParameters())||(W.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Je]of Object.entries(R||{}))W[Le]=Je}if(f instanceof Xi){const Le=f.getScopes().filter(Je=>""!==Je);Le.length>0&&(W.scopes=Le.join(","))}y.tenantId&&(W.tid=y.tenantId);const ce=W;for(const Le of Object.keys(ce))void 0===ce[Le]&&delete ce[Le];return`${function Ud({config:y}){return y.emulator?xn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,O.xO)(ce).slice(1)}`}const Ja="webStorageSupport";class Mi extends class qy{constructor(f){this.factorId=f}_process(f,m,w){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,w);case"signin":return this._finalizeSignIn(f,m.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Mi(f)}_finalizeEnroll(f,m,w){return function Hu(y,f){return rn(y,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(y,f))}(f,{idToken:m,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function Qu(y,f){return rn(y,"POST","/v2/accounts/mfaSignIn:finalize",Vt(y,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let fo=(()=>{class y{constructor(){}static assertion(m){return Mi._fromCredential(m)}}return y.FACTOR_ID="phone",y})();var hf="@firebase/auth";class Wy{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Yo(){return window}function gf(){return(gf=(0,h.Z)(function*(y,f,m){var w;const{BuildInfo:A}=Yo();Y(f.sessionId,"AuthEvent did not contain a session ID");const R=yield Xy(f.sessionId),W={};return Xt()?W.ibi=A.packageName:Un()?W.apn=A.packageName:Ae(y,"operation-not-supported-in-this-environment"),A.displayName&&(W.appDisplayName=A.displayName),W.sessionId=R,ho(y,m,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,W)})).apply(this,arguments)}function po(){return(po=(0,h.Z)(function*(y){const{BuildInfo:f}=Yo(),m={};Xt()?m.iosBundleId=f.packageName:Un()?m.androidPackageName=f.packageName:Ae(y,"operation-not-supported-in-this-environment"),yield ks(y,m)})).apply(this,arguments)}function xi(){return(xi=(0,h.Z)(function*(y,f,m){const{cordova:w}=Yo();let A=()=>{};try{yield new Promise((R,W)=>{let ce=null;function Le(){var ht;R();const cr=null===(ht=w.plugins.browsertab)||void 0===ht?void 0:ht.close;"function"==typeof cr&&cr(),"function"==typeof m?.close&&m.close()}function Je(){ce||(ce=window.setTimeout(()=>{W(ve(y,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===document?.visibilityState&&Je()}f.addPassiveListener(Le),document.addEventListener("resume",Je,!1),Un()&&document.addEventListener("visibilitychange",Et,!1),A=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",Et,!1),ce&&window.clearTimeout(ce)}})}finally{A()}})).apply(this,arguments)}function Xy(y){return jd.apply(this,arguments)}function jd(){return(jd=(0,h.Z)(function*(y){const f=u0(y),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function u0(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),m=new Uint8Array(f);for(let w=0;w<y.length;w++)m[w]=y.charCodeAt(w);return m}!function Ky(y){(0,ae._registerComponent)(new le.wA("auth",(f,{options:m})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:R,authDomain:W}=w.options;return((ce,Le)=>{U(R&&!R.includes(":"),"invalid-api-key",{appName:ce.name}),U(!W?.includes(":"),"argument-error",{appName:ce.name});const Je={apiKey:R,authDomain:W,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ys(y)},Et=new kt(ce,Le,Je);return function Fe(y,f){const m=f?.persistence||[],w=(Array.isArray(m)?m:[m]).map(se);f?.errorMap&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,f?.popupRedirectResolver)}(Et,m),Et})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,w)=>{f.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new le.wA("auth-internal",f=>{const m=_n(f.getProvider("auth").getImmediate());return new Wy(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(hf,"0.20.6",function Zy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ae.registerVersion)(hf,"0.20.6","esm2017")}("Browser");class $d extends Zo{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,h.Z)(function*(){yield f.initPromise})()}}function yc(y){return mf.apply(this,arguments)}function mf(){return(mf=(0,h.Z)(function*(y){const f=yield yf()._get(_f(y));return f&&(yield yf()._remove(_f(y))),f})).apply(this,arguments)}function eu(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function yf(){return se(Fa)}function _f(y){return Zn("authEvent",y.config.apiKey,y.name)}function tu(y){if(!y?.includes("?"))return{};const[f,...m]=y.split("?");return(0,O.zd)(m.join("?"))}function Dg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function $i(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function wf(y=(0,O.z$)()){return!("file:"!==$i()&&"ionic:"!==$i()&&"capacitor:"!==$i()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function s_(){try{const y=self.localStorage,f=Ua();if(y)return y.setItem(f,"1"),y.removeItem(f),!function c0(y=(0,O.z$)()){return function r_(){return(0,O.w1)()&&11===document?.documentMode}()||function i_(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return nu()&&(0,O.hl)()}return!1}function nu(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function wc(){return(function Hd(){return"http:"===$i()||"https:"===$i()}()||(0,O.ru)()||wf())&&!function n_(){return(0,O.b$)()||(0,O.UG)()}()&&s_()&&!nu()}function Ef(){return wf()&&typeof document<"u"}function Gd(){return(Gd=(0,h.Z)(function*(){return!!Ef()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Qr={LOCAL:"local",NONE:"none",SESSION:"session"},nl=U,Ec="persistence";function Ic(y){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,h.Z)(function*(y){yield y._initializationPromise;const f=zd(),m=Zn(Ec,y.config.apiKey,y.name);f&&f.setItem(m,y._getPersistence())})).apply(this,arguments)}function zd(){var y;try{return(null===(y=function o_(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Xo=U;class ea{constructor(){this.browserResolver=se(class wg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Vi,this._completeRedirectFn=wt,this._overrideRedirectResult=Os}_openPopup(f,m,w,A){var R=this;return(0,h.Z)(function*(){var W;Y(null===(W=R.eventManagers[f._key()])||void 0===W?void 0:W.manager,"_initialize() not called before _openPopup()");const ce=ho(f,m,w,Pe(),A);return function co(y,f,m,w=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),W=Math.max((window.screen.availWidth-w)/2,0).toString();let ce="";const Le=Object.assign(Object.assign({},Fd),{width:w.toString(),height:A.toString(),top:R,left:W}),Je=(0,O.z$)().toLowerCase();m&&(ce=Pi(Je)?"_blank":m),mn(Je)&&(f=f||"http://localhost",Le.scrollbars="yes");const Et=Object.entries(Le).reduce((cr,[ls,Cc])=>`${cr}${ls}=${Cc},`,"");if(function Ei(y=(0,O.z$)()){var f;return Xt(y)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(Je)&&"_self"!==ce)return function vg(y,f){const m=document.createElement("a");m.href=y,m.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(w)}(f||"",ce),new pc(null);const ht=window.open(f||"",ce,Et);U(ht,y,"popup-blocked");try{ht.focus()}catch{}return new pc(ht)}(f,ce,Ua())})()}_openRedirect(f,m,w,A){var R=this;return(0,h.Z)(function*(){return yield R._originValidation(f),function bi(y){On().location.href=y}(ho(f,m,w,Pe(),A)),new Promise(()=>{})})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:A,promise:R}=this.eventManagers[m];return A?Promise.resolve(A):(Y(R,"If manager is not set, promise should be"),R)}const w=this.initAndGetManager(f);return this.eventManagers[m]={promise:w},w.catch(()=>{delete this.eventManagers[m]}),w}initAndGetManager(f){var m=this;return(0,h.Z)(function*(){const w=yield function _g(y){return Ya.apply(this,arguments)}(f),A=new Zo(f);return w.register("authEvent",R=>(U(R?.authEvent,f,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:A},m.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(Ja,{type:Ja},A=>{var R;const W=null===(R=A?.[0])||void 0===R?void 0:R[Ja];void 0!==W&&m(!!W),Ae(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Ai(y){return af.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return zs()||Vn()||Xt()}}),this.cordovaResolver=se(class Ig{constructor(){this._redirectPersistence=Vi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=wt,this._overrideRedirectResult=Os}_initialize(f){var m=this;return(0,h.Z)(function*(){const w=f._key();let A=m.eventManagers.get(w);return A||(A=new $d(f),m.eventManagers.set(w,A),m.attachCallbackListeners(f,A)),A})()}_openPopup(f){Ae(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,w,A){var R=this;return(0,h.Z)(function*(){!function Bd(y){var f,m,w,A,R,W,ce,Le,Je,Et;const ht=Yo();U("function"==typeof(null===(f=ht?.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(typeof(null===(m=ht?.BuildInfo)||void 0===m?void 0:m.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(R=null===(A=null===(w=ht?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Le=null===(ce=null===(W=ht?.cordova)||void 0===W?void 0:W.plugins)||void 0===ce?void 0:ce.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(Et=null===(Je=ht?.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===Et?void 0:Et.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const W=yield R._initialize(f);yield W.initialized(),W.resetRedirect(),function br(){Si.clear()}(),yield R._originValidation(f);const ce=function Xa(y,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:eu(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(f,w,A);yield function Qo(y,f){return yf()._set(_f(y),f)}(f,ce);const Le=yield function Qy(y,f,m){return gf.apply(this,arguments)}(f,ce,m),Je=yield function mc(y){const{cordova:f}=Yo();return new Promise(m=>{f.plugins.browsertab.isAvailable(w=>{let A=null;w?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function ri(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),m(A)})})}(Le);return function Fs(y,f,m){return xi.apply(this,arguments)}(f,W,Je)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function Jy(y){return po.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:w,handleOpenURL:A,BuildInfo:R}=Yo(),W=setTimeout((0,h.Z)(function*(){yield yc(f),m.onEvent(Dg())}),500),ce=function(){var Et=(0,h.Z)(function*(ht){clearTimeout(W);const cr=yield yc(f);let ls=null;cr&&ht?.url&&(ls=function e_(y,f){var m,w;const A=function t_(y){const f=tu(y),m=f.link?decodeURIComponent(f.link):void 0,w=tu(m).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return tu(A).link||A||w||m||y}(f);if(A.includes("/__/auth/callback")){const R=tu(A),W=R.firebaseError?function Eg(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ce=null===(w=null===(m=W?.code)||void 0===m?void 0:m.split("auth/"))||void 0===w?void 0:w[1],Le=ce?ve(ce):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(cr,ht.url)),m.onEvent(ls||Dg())});return function(cr){return Et.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ce);const Le=A,Je=`${R.packageName.toLowerCase()}://`;Yo().handleOpenURL=function(){var Et=(0,h.Z)(function*(ht){if(ht.toLowerCase().startsWith(Je)&&ce({url:ht}),"function"==typeof Le)try{Le(ht)}catch(cr){console.error(cr)}});return function(ht){return Et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Vi,this._completeRedirectFn=wt,this._overrideRedirectResult=Os}_initialize(f){var m=this;return(0,h.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,w,A){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(f,m,w,A)})()}_openRedirect(f,m,w,A){var R=this;return(0,h.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(f,m,w,A)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Ef()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Xo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,h.Z)(function*(){if(f.underlyingResolver)return;const m=yield function bg(){return Gd.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function us(y){return y.unwrap()}function a_(y){return il(y)}function il(y){const{_tokenResponse:f}=y instanceof O.ZR?y.customData:y;if(!f)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return qa.credentialFromResult(y);const m=f.providerId;if(!m||"password"===m)return null;let w;switch(m){case"google.com":w=Cu;break;case"facebook.com":w=Sa;break;case"github.com":w=ql;break;case"twitter.com":w=Wr;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:W,pendingToken:ce,nonce:Le}=f;return R||W||A||ce?ce?m.startsWith("saml.")?xo._create(m,ce):Qi._fromParams({providerId:m,signInMethod:m,pendingToken:ce,idToken:A,accessToken:R}):new Ks(m).credential({idToken:A,accessToken:R,rawNonce:Le}):null}return y instanceof O.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function kn(y,f){return f.catch(m=>{throw m instanceof O.ZR&&function rl(y,f){var m,w;const A=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(w=f)||void 0===w?void 0:w.code))f.resolver=new If(y,function Sn(y,f){var m;const w=(0,O.m9)(y),A=f;return U(f.customData.operationType,w,"argument-error"),U(null===(m=A.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,w,"argument-error"),ju._fromError(w,A)}(y,f));else if(A){const R=il(f),W=f;R&&(W.credential=R,W.tenantId=A.tenantId||void 0,W.email=A.email||void 0,W.phoneNumber=A.phoneNumber||void 0)}}(y,m),m}).then(m=>{const A=m.user;return{operationType:m.operationType,credential:a_(m),additionalUserInfo:Bu(m),user:mo.getOrCreate(A)}})}function bc(y,f){return iu.apply(this,arguments)}function iu(){return(iu=(0,h.Z)(function*(y,f){const m=yield f;return{verificationId:m.verificationId,confirm:w=>kn(y,m.confirm(w))}})).apply(this,arguments)}class If{constructor(f,m){this.resolver=m,this.auth=function Dc(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return kn(us(this.auth),this.resolver.resolveSignIn(f))}}class mo{constructor(f){this._delegate=f,this.multiFactor=function Lo(y){const f=(0,O.m9)(y);return no.has(f)||no.set(f,rf._fromUser(f)),no.get(f)}(f)}static getOrCreate(f){return mo.USER_MAP.has(f)||mo.USER_MAP.set(f,new mo(f)),mo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,h.Z)(function*(){return kn(m.auth,xu(m._delegate,f))})()}linkWithPhoneNumber(f,m){var w=this;return(0,h.Z)(function*(){return bc(w.auth,function vn(y,f,m){return Ti.apply(this,arguments)}(w._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,h.Z)(function*(){return kn(m.auth,function el(y,f,m){return Ka.apply(this,arguments)}(m._delegate,f,ea))})()}linkWithRedirect(f){var m=this;return(0,h.Z)(function*(){return yield Ic(_n(m.auth)),function J(y,f,m){return function re(y,f,m){return be.apply(this,arguments)}(y,f,m)}(m._delegate,f,ea)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,h.Z)(function*(){return kn(m.auth,Nu(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return bc(this.auth,function za(y,f,m){return kr.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return kn(this.auth,function fg(y,f,m){return hc.apply(this,arguments)}(this._delegate,f,ea))}reauthenticateWithRedirect(f){var m=this;return(0,h.Z)(function*(){return yield Ic(_n(m.auth)),function C(y,f,m){return function x(y,f,m){return F.apply(this,arguments)}(y,f,m)}(m._delegate,f,ea)})()}sendEmailVerification(f){return function Xl(y,f){return Pa.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,h.Z)(function*(){return yield function Pr(y,f){return Su.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function Cd(y,f){return eo((0,O.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Xs(y,f){return eo((0,O.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function hg(y,f){return cc.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function nc(y,f){return rc.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function ec(y,f,m){return Lu.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}mo.USER_MAP=new WeakMap;const Ls=U;let su=(()=>{class y{constructor(m,w){if(this.app=m,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=m.options;Ls(A,"invalid-api-key",{appName:m.name}),Ls(A,"invalid-api-key",{appName:m.name});const R=typeof window<"u"?ea:void 0;this._delegate=w.initialize({options:{persistence:Df(A,m.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(we),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?mo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,w){!function Vl(y,f,m){const w=_n(y);U(w._canInitEmulator,w,"emulator-config-failed"),U(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!m?.disableWarnings,R=ki(f),{host:W,port:ce}=function Bn(y){const f=ki(y),m=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!m)return{host:"",port:null};const w=m[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const R=A[1];return{host:R,port:_s(w.substr(R.length+1))}}{const[R,W]=w.split(":");return{host:R,port:_s(W)}}}(f);w.config.emulator={url:`${R}//${W}${null===ce?"":`:${ce}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:W,port:ce,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function vs(){function y(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,m,w)}applyActionCode(m){return function oi(y,f){return xa.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Na(this._delegate,m)}confirmPasswordReset(m,w){return function ku(y,f,m){return Oo.apply(this,arguments)}(this._delegate,m,w)}createUserWithEmailAndPassword(m,w){var A=this;return(0,h.Z)(function*(){return kn(A._delegate,function Qs(y,f,m){return Tn.apply(this,arguments)}(A._delegate,m,w))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function Fu(y,f){return Oa.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function rs(y,f){return"EMAIL_SIGNIN"===bu.parseLink(f)?.operation}(0,m)}getRedirectResult(){var m=this;return(0,h.Z)(function*(){Ls(wc(),m._delegate,"operation-not-supported-in-this-environment");const w=yield function Re(y,f){return et.apply(this,arguments)}(m._delegate,ea);return w?kn(m._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Pn(y,f){_n(y)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,w,A){const{next:R,error:W,complete:ce}=Tg(m,w,A);return this._delegate.onAuthStateChanged(R,W,ce)}onIdTokenChanged(m,w,A){const{next:R,error:W,complete:ce}=Tg(m,w,A);return this._delegate.onIdTokenChanged(R,W,ce)}sendSignInLinkToEmail(m,w){return function Ql(y,f,m){return Js.apply(this,arguments)}(this._delegate,m,w)}sendPasswordResetEmail(m,w){return function Pu(y,f,m){return Cn.apply(this,arguments)}(this._delegate,m,w||void 0)}setPersistence(m){var w=this;return(0,h.Z)(function*(){let A;switch(function Cg(y,f){nl(Object.values(Qr).includes(f),y,"invalid-persistence-type"),(0,O.b$)()?nl(f!==Qr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?nl(f===Qr.NONE,y,"unsupported-persistence-type"):nu()?nl(f===Qr.NONE||f===Qr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):nl(f===Qr.NONE||s_(),y,"unsupported-persistence-type")}(w._delegate,m),m){case Qr.SESSION:A=Vi;break;case Qr.LOCAL:A=(yield se(Uo)._isAvailable())?Uo:Fa;break;case Qr.NONE:A=Qt;break;default:return Ae("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return kn(this._delegate,function Xh(y){return bn.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return kn(this._delegate,En(this._delegate,m))}signInWithCustomToken(m){return kn(this._delegate,function Zl(y,f){return Ma.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,w){return kn(this._delegate,function Li(y,f,m){return En((0,O.m9)(y),Fi.credential(f,m))}(this._delegate,m,w))}signInWithEmailLink(m,w){return kn(this._delegate,function og(y,f,m){return Ra.apply(this,arguments)}(this._delegate,m,w))}signInWithPhoneNumber(m,w){return bc(this._delegate,function st(y,f,m){return Hn.apply(this,arguments)}(this._delegate,m,w))}signInWithPopup(m){var w=this;return(0,h.Z)(function*(){return Ls(wc(),w._delegate,"operation-not-supported-in-this-environment"),kn(w._delegate,function dc(y,f,m){return qo.apply(this,arguments)}(w._delegate,m,ea))})()}signInWithRedirect(m){var w=this;return(0,h.Z)(function*(){return Ls(wc(),w._delegate,"operation-not-supported-in-this-environment"),yield Ic(w._delegate),function pn(y,f,m){return function tl(y,f,m){return b.apply(this,arguments)}(y,f,m)}(w._delegate,m,ea)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Yl(y,f){return bd.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Qr,y})();function Tg(y,f,m){let w=y;"function"!=typeof y&&({next:w,error:f,complete:m}=y);const A=w;return{next:W=>A(W&&mo.getOrCreate(W)),error:f,complete:m}}function Df(y,f){const m=function ru(y,f){const m=zd();if(!m)return[];const w=Zn(Ec,y,f);switch(m.getItem(w)){case Qr.NONE:return[Qt];case Qr.LOCAL:return[Uo,Vi];case Qr.SESSION:return[Vi];default:return[]}}(y,f);if(typeof self<"u"&&!m.includes(Uo)&&m.push(Uo),typeof window<"u")for(const w of[Fa,Vi])m.includes(w)||m.push(w);return m.includes(Qt)||m.push(Qt),m}class qd{constructor(){this.providerId="phone",this._delegate=new qa(us(te.Z.auth()))}static credential(f,m){return qa.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}qd.PHONE_SIGN_IN_METHOD=qa.PHONE_SIGN_IN_METHOD,qd.PROVIDER_ID=qa.PROVIDER_ID;const Sg=U;class Wd{constructor(f,m,w=te.Z.app()){var A;Sg(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new lr(f,m,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Mg(y){y.INTERNAL.registerComponent(new le.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new su(m,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Fi,FacebookAuthProvider:Sa,GithubAuthProvider:ql,GoogleAuthProvider:Cu,OAuthProvider:Ks,SAMLAuthProvider:ii,PhoneAuthProvider:qd,PhoneMultiFactorGenerator:fo,RecaptchaVerifier:Wd,TwitterAuthProvider:Wr,Auth:su,AuthCredential:mr,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.19")}(te.Z)},9751:(lt,Se,k)=>{k.d(Se,{y:()=>fe});var h=k(2961),te=k(727),O=k(8822),ae=k(9635),ie=k(2416),he=k(576),le=k(2806);let fe=(()=>{class Q{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const we=new Q;return we.source=this,we.operator=Me,we}subscribe(Me,we,Xe){const _e=function $(Q){return Q&&Q instanceof h.Lv||function B(Q){return Q&&(0,he.m)(Q.next)&&(0,he.m)(Q.error)&&(0,he.m)(Q.complete)}(Q)&&(0,te.Nn)(Q)}(Me)?Me:new h.Hp(Me,we,Xe);return(0,le.x)(()=>{const{operator:pe,source:Ye}=this;_e.add(pe?pe.call(_e,Ye):Ye?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Me){try{return this._subscribe(Me)}catch(we){Me.error(we)}}forEach(Me,we){return new(we=ge(we))((Xe,_e)=>{const pe=new h.Hp({next:Ye=>{try{Me(Ye)}catch(rt){_e(rt),pe.unsubscribe()}},error:_e,complete:Xe});this.subscribe(pe)})}_subscribe(Me){var we;return null===(we=this.source)||void 0===we?void 0:we.subscribe(Me)}[O.L](){return this}pipe(...Me){return(0,ae.U)(Me)(this)}toPromise(Me){return new(Me=ge(Me))((we,Xe)=>{let _e;this.subscribe(pe=>_e=pe,pe=>Xe(pe),()=>we(_e))})}}return Q.create=Ve=>new Q(Ve),Q})();function ge(Q){var Ve;return null!==(Ve=Q??ie.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(lt,Se,k)=>{k.d(Se,{x:()=>le});var h=k(9751),te=k(727);const ae=(0,k(3888).d)(ge=>function(){ge(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=k(8737),he=k(2806);let le=(()=>{class ge extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const Q=new fe(this,this);return Q.operator=$,Q}_throwIfClosed(){if(this.closed)throw new ae}next($){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next($)}})}error($){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:Q}=this;for(;Q.length;)Q.shift().error($)}})}complete(){(0,he.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:Q,isStopped:Ve,observers:Me}=this;return Q||Ve?te.Lc:(this.currentObservers=null,Me.push($),new te.w0(()=>{this.currentObservers=null,(0,ie.P)(Me,$)}))}_checkFinalizedStatuses($){const{hasError:Q,thrownError:Ve,isStopped:Me}=this;Q?$.error(Ve):Me&&$.complete()}asObservable(){const $=new h.y;return $.source=this,$}}return ge.create=(B,$)=>new fe(B,$),ge})();class fe extends le{constructor(B,$){super(),this.destination=B,this.source=$}next(B){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===Q||Q.call($,B)}error(B){var $,Q;null===(Q=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===Q||Q.call($,B)}complete(){var B,$;null===($=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===$||$.call(B)}_subscribe(B){var $,Q;return null!==(Q=null===($=this.source)||void 0===$?void 0:$.subscribe(B))&&void 0!==Q?Q:te.Lc}}},2961:(lt,Se,k)=>{k.d(Se,{Hp:()=>Xe,Lv:()=>Q});var h=k(576),te=k(727),O=k(2416),ae=k(7849);function ie(){}const he=ge("C",void 0,void 0);function ge(Ae,ve,De){return{kind:Ae,value:ve,error:De}}var B=k(3410),$=k(2806);class Q extends te.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,te.Nn)(ve)&&ve.add(this)):this.destination=rt}static create(ve,De,Be){return new Xe(ve,De,Be)}next(ve){this.isStopped?Ye(function fe(Ae){return ge("N",Ae,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ye(function le(Ae){return ge("E",void 0,Ae)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ye(he,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ve=Function.prototype.bind;function Me(Ae,ve){return Ve.call(Ae,ve)}class we{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:De}=this;if(De.next)try{De.next(ve)}catch(Be){_e(Be)}}error(ve){const{partialObserver:De}=this;if(De.error)try{De.error(ve)}catch(Be){_e(Be)}else _e(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(De){_e(De)}}}class Xe extends Q{constructor(ve,De,Be){let je;if(super(),(0,h.m)(ve)||!ve)je={next:ve??void 0,error:De??void 0,complete:Be??void 0};else{let U;this&&O.v.useDeprecatedNextContext?(U=Object.create(ve),U.unsubscribe=()=>this.unsubscribe(),je={next:ve.next&&Me(ve.next,U),error:ve.error&&Me(ve.error,U),complete:ve.complete&&Me(ve.complete,U)}):je=ve}this.destination=new we(je)}}function _e(Ae){O.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(Ae):(0,ae.h)(Ae)}function Ye(Ae,ve){const{onStoppedNotification:De}=O.v;De&&B.z.setTimeout(()=>De(Ae,ve))}const rt={closed:!0,next:ie,error:function pe(Ae){throw Ae},complete:ie}},727:(lt,Se,k)=>{k.d(Se,{Lc:()=>he,w0:()=>ie,Nn:()=>le});var h=k(576);const O=(0,k(3888).d)(ge=>function($){ge(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((Q,Ve)=>`${Ve+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var ae=k(8737);class ie{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Me of $)Me.remove(this);else $.remove(this);const{initialTeardown:Q}=this;if((0,h.m)(Q))try{Q()}catch(Me){B=Me instanceof O?Me.errors:[Me]}const{_finalizers:Ve}=this;if(Ve){this._finalizers=null;for(const Me of Ve)try{fe(Me)}catch(we){B=B??[],we instanceof O?B=[...B,...we.errors]:B.push(we)}}if(B)throw new O(B)}}add(B){var $;if(B&&B!==this)if(this.closed)fe(B);else{if(B instanceof ie){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==($=this._finalizers)&&void 0!==$?$:[]).push(B)}}_hasParent(B){const{_parentage:$}=this;return $===B||Array.isArray($)&&$.includes(B)}_addParent(B){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(B),$):$?[$,B]:B}_removeParent(B){const{_parentage:$}=this;$===B?this._parentage=null:Array.isArray($)&&(0,ae.P)($,B)}remove(B){const{_finalizers:$}=this;$&&(0,ae.P)($,B),B instanceof ie&&B._removeParent(this)}}ie.EMPTY=(()=>{const ge=new ie;return ge.closed=!0,ge})();const he=ie.EMPTY;function le(ge){return ge instanceof ie||ge&&"closed"in ge&&(0,h.m)(ge.remove)&&(0,h.m)(ge.add)&&(0,h.m)(ge.unsubscribe)}function fe(ge){(0,h.m)(ge)?ge():ge.unsubscribe()}},2416:(lt,Se,k)=>{k.d(Se,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Se,k)=>{k.d(Se,{E:()=>te});const te=new(k(9751).y)(ie=>ie.complete())},8996:(lt,Se,k)=>{k.d(Se,{D:()=>ve});var h=k(8421),te=k(5363),O=k(9468),he=k(9751),fe=k(2202),ge=k(576),B=k(9672);function Q(De,Be){if(!De)throw new Error("Iterable cannot be null");return new he.y(je=>{(0,B.f)(je,Be,()=>{const U=De[Symbol.asyncIterator]();(0,B.f)(je,Be,()=>{U.next().then(ye=>{ye.done?je.complete():je.next(ye.value)})},0,!0)})})}var Ve=k(3670),Me=k(8239),we=k(1144),Xe=k(6495),_e=k(2206),pe=k(4532),Ye=k(3260);function ve(De,Be){return Be?function Ae(De,Be){if(null!=De){if((0,Ve.c)(De))return function ae(De,Be){return(0,h.Xf)(De).pipe((0,O.R)(Be),(0,te.Q)(Be))}(De,Be);if((0,we.z)(De))return function le(De,Be){return new he.y(je=>{let U=0;return Be.schedule(function(){U===De.length?je.complete():(je.next(De[U++]),je.closed||this.schedule())})})}(De,Be);if((0,Me.t)(De))return function ie(De,Be){return(0,h.Xf)(De).pipe((0,O.R)(Be),(0,te.Q)(Be))}(De,Be);if((0,_e.D)(De))return Q(De,Be);if((0,Xe.T)(De))return function $(De,Be){return new he.y(je=>{let U;return(0,B.f)(je,Be,()=>{U=De[fe.h](),(0,B.f)(je,Be,()=>{let ye,Y;try{({value:ye,done:Y}=U.next())}catch(X){return void je.error(X)}Y?je.complete():je.next(ye)},0,!0)}),()=>(0,ge.m)(U?.return)&&U.return()})}(De,Be);if((0,Ye.L)(De))return function rt(De,Be){return Q((0,Ye.Q)(De),Be)}(De,Be)}throw(0,pe.z)(De)}(De,Be):(0,h.Xf)(De)}},8421:(lt,Se,k)=>{k.d(Se,{Xf:()=>Ve});var h=k(655),te=k(1144),O=k(8239),ae=k(9751),ie=k(3670),he=k(2206),le=k(4532),fe=k(6495),ge=k(3260),B=k(576),$=k(7849),Q=k(8822);function Ve(Ae){if(Ae instanceof ae.y)return Ae;if(null!=Ae){if((0,ie.c)(Ae))return function Me(Ae){return new ae.y(ve=>{const De=Ae[Q.L]();if((0,B.m)(De.subscribe))return De.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,te.z)(Ae))return function we(Ae){return new ae.y(ve=>{for(let De=0;De<Ae.length&&!ve.closed;De++)ve.next(Ae[De]);ve.complete()})}(Ae);if((0,O.t)(Ae))return function Xe(Ae){return new ae.y(ve=>{Ae.then(De=>{ve.closed||(ve.next(De),ve.complete())},De=>ve.error(De)).then(null,$.h)})}(Ae);if((0,he.D)(Ae))return pe(Ae);if((0,fe.T)(Ae))return function _e(Ae){return new ae.y(ve=>{for(const De of Ae)if(ve.next(De),ve.closed)return;ve.complete()})}(Ae);if((0,ge.L)(Ae))return function Ye(Ae){return pe((0,ge.Q)(Ae))}(Ae)}throw(0,le.z)(Ae)}function pe(Ae){return new ae.y(ve=>{(function rt(Ae,ve){var De,Be,je,U;return(0,h.mG)(this,void 0,void 0,function*(){try{for(De=(0,h.KL)(Ae);!(Be=yield De.next()).done;)if(ve.next(Be.value),ve.closed)return}catch(ye){je={error:ye}}finally{try{Be&&!Be.done&&(U=De.return)&&(yield U.call(De))}finally{if(je)throw je.error}}ve.complete()})})(Ae,ve).catch(De=>ve.error(De))})}},6451:(lt,Se,k)=>{k.d(Se,{T:()=>he});var h=k(8189),te=k(8421),O=k(515),ae=k(7669),ie=k(8996);function he(...le){const fe=(0,ae.yG)(le),ge=(0,ae._6)(le,1/0),B=le;return B.length?1===B.length?(0,te.Xf)(B[0]):(0,h.J)(ge)((0,ie.D)(B,fe)):O.E}},5403:(lt,Se,k)=>{k.d(Se,{x:()=>te});var h=k(2961);function te(ae,ie,he,le,fe){return new O(ae,ie,he,le,fe)}class O extends h.Lv{constructor(ie,he,le,fe,ge,B){super(ie),this.onFinalize=ge,this.shouldUnsubscribe=B,this._next=he?function($){try{he($)}catch(Q){ie.error(Q)}}:super._next,this._error=fe?function($){try{fe($)}catch(Q){ie.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch($){ie.error($)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:he}=this;super.unsubscribe(),!he&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(lt,Se,k)=>{k.d(Se,{U:()=>O});var h=k(4482),te=k(5403);function O(ae,ie){return(0,h.e)((he,le)=>{let fe=0;he.subscribe((0,te.x)(le,ge=>{le.next(ae.call(ie,ge,fe++))}))})}},8189:(lt,Se,k)=>{k.d(Se,{J:()=>O});var h=k(5577),te=k(4671);function O(ae=1/0){return(0,h.z)(te.y,ae)}},5577:(lt,Se,k)=>{k.d(Se,{z:()=>fe});var h=k(4004),te=k(8421),O=k(4482),ae=k(9672),ie=k(5403),le=k(576);function fe(ge,B,$=1/0){return(0,le.m)(B)?fe((Q,Ve)=>(0,h.U)((Me,we)=>B(Q,Me,Ve,we))((0,te.Xf)(ge(Q,Ve))),$):("number"==typeof B&&($=B),(0,O.e)((Q,Ve)=>function he(ge,B,$,Q,Ve,Me,we,Xe){const _e=[];let pe=0,Ye=0,rt=!1;const Ae=()=>{rt&&!_e.length&&!pe&&B.complete()},ve=Be=>pe<Q?De(Be):_e.push(Be),De=Be=>{Me&&B.next(Be),pe++;let je=!1;(0,te.Xf)($(Be,Ye++)).subscribe((0,ie.x)(B,U=>{Ve?.(U),Me?ve(U):B.next(U)},()=>{je=!0},void 0,()=>{if(je)try{for(pe--;_e.length&&pe<Q;){const U=_e.shift();we?(0,ae.f)(B,we,()=>De(U)):De(U)}Ae()}catch(U){B.error(U)}}))};return ge.subscribe((0,ie.x)(B,ve,()=>{rt=!0,Ae()})),()=>{Xe?.()}}(Q,Ve,ge,$)))}},5363:(lt,Se,k)=>{k.d(Se,{Q:()=>ae});var h=k(9672),te=k(4482),O=k(5403);function ae(ie,he=0){return(0,te.e)((le,fe)=>{le.subscribe((0,O.x)(fe,ge=>(0,h.f)(fe,ie,()=>fe.next(ge),he),()=>(0,h.f)(fe,ie,()=>fe.complete(),he),ge=>(0,h.f)(fe,ie,()=>fe.error(ge),he)))})}},3099:(lt,Se,k)=>{k.d(Se,{B:()=>ie});var h=k(8421),te=k(7579),O=k(2961),ae=k(4482);function ie(le={}){const{connector:fe=(()=>new te.x),resetOnError:ge=!0,resetOnComplete:B=!0,resetOnRefCountZero:$=!0}=le;return Q=>{let Ve,Me,we,Xe=0,_e=!1,pe=!1;const Ye=()=>{Me?.unsubscribe(),Me=void 0},rt=()=>{Ye(),Ve=we=void 0,_e=pe=!1},Ae=()=>{const ve=Ve;rt(),ve?.unsubscribe()};return(0,ae.e)((ve,De)=>{Xe++,!pe&&!_e&&Ye();const Be=we=we??fe();De.add(()=>{Xe--,0===Xe&&!pe&&!_e&&(Me=he(Ae,$))}),Be.subscribe(De),!Ve&&Xe>0&&(Ve=new O.Hp({next:je=>Be.next(je),error:je=>{pe=!0,Ye(),Me=he(rt,ge,je),Be.error(je)},complete:()=>{_e=!0,Ye(),Me=he(rt,B),Be.complete()}}),(0,h.Xf)(ve).subscribe(Ve))})(Q)}}function he(le,fe,...ge){if(!0===fe)return void le();if(!1===fe)return;const B=new O.Hp({next:()=>{B.unsubscribe(),le()}});return fe(...ge).subscribe(B)}},9468:(lt,Se,k)=>{k.d(Se,{R:()=>te});var h=k(4482);function te(O,ae=0){return(0,h.e)((ie,he)=>{he.add(O.schedule(()=>ie.subscribe(he),ae))})}},8505:(lt,Se,k)=>{k.d(Se,{b:()=>ie});var h=k(576),te=k(4482),O=k(5403),ae=k(4671);function ie(he,le,fe){const ge=(0,h.m)(he)||le||fe?{next:he,error:le,complete:fe}:he;return ge?(0,te.e)((B,$)=>{var Q;null===(Q=ge.subscribe)||void 0===Q||Q.call(ge);let Ve=!0;B.subscribe((0,O.x)($,Me=>{var we;null===(we=ge.next)||void 0===we||we.call(ge,Me),$.next(Me)},()=>{var Me;Ve=!1,null===(Me=ge.complete)||void 0===Me||Me.call(ge),$.complete()},Me=>{var we;Ve=!1,null===(we=ge.error)||void 0===we||we.call(ge,Me),$.error(Me)},()=>{var Me,we;Ve&&(null===(Me=ge.unsubscribe)||void 0===Me||Me.call(ge)),null===(we=ge.finalize)||void 0===we||we.call(ge)}))}):ae.y}},4408:(lt,Se,k)=>{k.d(Se,{o:()=>ie});var h=k(727);class te extends h.w0{constructor(le,fe){super()}schedule(le,fe=0){return this}}const O={setInterval(he,le,...fe){const{delegate:ge}=O;return ge?.setInterval?ge.setInterval(he,le,...fe):setInterval(he,le,...fe)},clearInterval(he){const{delegate:le}=O;return(le?.clearInterval||clearInterval)(he)},delegate:void 0};var ae=k(8737);class ie extends te{constructor(le,fe){super(le,fe),this.scheduler=le,this.work=fe,this.pending=!1}schedule(le,fe=0){if(this.closed)return this;this.state=le;const ge=this.id,B=this.scheduler;return null!=ge&&(this.id=this.recycleAsyncId(B,ge,fe)),this.pending=!0,this.delay=fe,this.id=this.id||this.requestAsyncId(B,this.id,fe),this}requestAsyncId(le,fe,ge=0){return O.setInterval(le.flush.bind(le,this),ge)}recycleAsyncId(le,fe,ge=0){if(null!=ge&&this.delay===ge&&!1===this.pending)return fe;O.clearInterval(fe)}execute(le,fe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ge=this._execute(le,fe);if(ge)return ge;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,fe){let B,ge=!1;try{this.work(le)}catch($){ge=!0,B=$||new Error("Scheduled action threw falsy error")}if(ge)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:le,scheduler:fe}=this,{actions:ge}=fe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ge,this),null!=le&&(this.id=this.recycleAsyncId(fe,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Se,k)=>{k.d(Se,{v:()=>O});var h=k(6063);class te{constructor(ie,he=te.now){this.schedulerActionCtor=ie,this.now=he}schedule(ie,he=0,le){return new this.schedulerActionCtor(this,ie).schedule(le,he)}}te.now=h.l.now;class O extends te{constructor(ie,he=te.now){super(ie,he),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:he}=this;if(this._active)return void he.push(ie);let le;this._active=!0;do{if(le=ie.execute(ie.state,ie.delay))break}while(ie=he.shift());if(this._active=!1,le){for(;ie=he.shift();)ie.unsubscribe();throw le}}}},4986:(lt,Se,k)=>{k.d(Se,{z:()=>O});var h=k(4408);const O=new(k(7565).v)(h.o)},6063:(lt,Se,k)=>{k.d(Se,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(lt,Se,k)=>{k.d(Se,{z:()=>h});const h={setTimeout(te,O,...ae){const{delegate:ie}=h;return ie?.setTimeout?ie.setTimeout(te,O,...ae):setTimeout(te,O,...ae)},clearTimeout(te){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(lt,Se,k)=>{k.d(Se,{h:()=>te});const te=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Se,k)=>{k.d(Se,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Se,k)=>{k.d(Se,{_6:()=>he,jO:()=>ae,yG:()=>ie});var h=k(576);function O(le){return le[le.length-1]}function ae(le){return(0,h.m)(O(le))?le.pop():void 0}function ie(le){return function te(le){return le&&(0,h.m)(le.schedule)}(O(le))?le.pop():void 0}function he(le,fe){return"number"==typeof O(le)?le.pop():fe}},8737:(lt,Se,k)=>{function h(te,O){if(te){const ae=te.indexOf(O);0<=ae&&te.splice(ae,1)}}k.d(Se,{P:()=>h})},3888:(lt,Se,k)=>{function h(te){const ae=te(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}k.d(Se,{d:()=>h})},2806:(lt,Se,k)=>{k.d(Se,{O:()=>ae,x:()=>O});var h=k(2416);let te=null;function O(ie){if(h.v.useDeprecatedSynchronousErrorHandling){const he=!te;if(he&&(te={errorThrown:!1,error:null}),ie(),he){const{errorThrown:le,error:fe}=te;if(te=null,le)throw fe}}else ie()}function ae(ie){h.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=ie)}},9672:(lt,Se,k)=>{function h(te,O,ae,ie=0,he=!1){const le=O.schedule(function(){ae(),he?te.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(te.add(le),!he)return le}k.d(Se,{f:()=>h})},4671:(lt,Se,k)=>{function h(te){return te}k.d(Se,{y:()=>h})},1144:(lt,Se,k)=>{k.d(Se,{z:()=>h});const h=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(lt,Se,k)=>{k.d(Se,{D:()=>te});var h=k(576);function te(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},576:(lt,Se,k)=>{function h(te){return"function"==typeof te}k.d(Se,{m:()=>h})},3670:(lt,Se,k)=>{k.d(Se,{c:()=>O});var h=k(8822),te=k(576);function O(ae){return(0,te.m)(ae[h.L])}},6495:(lt,Se,k)=>{k.d(Se,{T:()=>O});var h=k(2202),te=k(576);function O(ae){return(0,te.m)(ae?.[h.h])}},8239:(lt,Se,k)=>{k.d(Se,{t:()=>te});var h=k(576);function te(O){return(0,h.m)(O?.then)}},3260:(lt,Se,k)=>{k.d(Se,{L:()=>ae,Q:()=>O});var h=k(655),te=k(576);function O(ie){return(0,h.FC)(this,arguments,function*(){const le=ie.getReader();try{for(;;){const{value:fe,done:ge}=yield(0,h.qq)(le.read());if(ge)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(fe)}}finally{le.releaseLock()}})}function ae(ie){return(0,te.m)(ie?.getReader)}},4482:(lt,Se,k)=>{k.d(Se,{A:()=>te,e:()=>O});var h=k(576);function te(ae){return(0,h.m)(ae?.lift)}function O(ae){return ie=>{if(te(ie))return ie.lift(function(he){try{return ae(he,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(lt,Se,k)=>{k.d(Se,{U:()=>O,z:()=>te});var h=k(4671);function te(...ae){return O(ae)}function O(ae){return 0===ae.length?h.y:1===ae.length?ae[0]:function(he){return ae.reduce((le,fe)=>fe(le),he)}}},7849:(lt,Se,k)=>{k.d(Se,{h:()=>O});var h=k(2416),te=k(3410);function O(ae){te.z.setTimeout(()=>{const{onUnhandledError:ie}=h.v;if(!ie)throw ae;ie(ae)})}},4532:(lt,Se,k)=>{function h(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Se,{z:()=>h})},655:(lt,Se,k)=>{function ae(Y,X){var se={};for(var ne in Y)Object.prototype.hasOwnProperty.call(Y,ne)&&X.indexOf(ne)<0&&(se[ne]=Y[ne]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ne=Object.getOwnPropertySymbols(Y);Fe<ne.length;Fe++)X.indexOf(ne[Fe])<0&&Object.prototype.propertyIsEnumerable.call(Y,ne[Fe])&&(se[ne[Fe]]=Y[ne[Fe]])}return se}function fe(Y,X,se,ne){return new(se||(se=Promise))(function(Pe,ft){function qt(sn){try{ze(ne.next(sn))}catch(xn){ft(xn)}}function Gt(sn){try{ze(ne.throw(sn))}catch(xn){ft(xn)}}function ze(sn){sn.done?Pe(sn.value):function Fe(Pe){return Pe instanceof se?Pe:new se(function(ft){ft(Pe)})}(sn.value).then(qt,Gt)}ze((ne=ne.apply(Y,X||[])).next())})}function _e(Y){return this instanceof _e?(this.v=Y,this):new _e(Y)}function pe(Y,X,se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ne=se.apply(Y,X||[]),Pe=[];return Fe={},ft("next"),ft("throw"),ft("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function ft(Zt){ne[Zt]&&(Fe[Zt]=function(Kt){return new Promise(function(xr,Vt){Pe.push([Zt,Kt,xr,Vt])>1||qt(Zt,Kt)})})}function qt(Zt,Kt){try{!function Gt(Zt){Zt.value instanceof _e?Promise.resolve(Zt.value.v).then(ze,sn):xn(Pe[0][2],Zt)}(ne[Zt](Kt))}catch(xr){xn(Pe[0][3],xr)}}function ze(Zt){qt("next",Zt)}function sn(Zt){qt("throw",Zt)}function xn(Zt,Kt){Zt(Kt),Pe.shift(),Pe.length&&qt(Pe[0][0],Pe[0][1])}}function rt(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var se,X=Y[Symbol.asyncIterator];return X?X.call(Y):(Y=function Q(Y){var X="function"==typeof Symbol&&Symbol.iterator,se=X&&Y[X],ne=0;if(se)return se.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&ne>=Y.length&&(Y=void 0),{value:Y&&Y[ne++],done:!Y}}};throw new TypeError(X?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),se={},ne("next"),ne("throw"),ne("return"),se[Symbol.asyncIterator]=function(){return this},se);function ne(Pe){se[Pe]=Y[Pe]&&function(ft){return new Promise(function(qt,Gt){!function Fe(Pe,ft,qt,Gt){Promise.resolve(Gt).then(function(ze){Pe({value:ze,done:qt})},ft)}(qt,Gt,(ft=Y[Pe](ft)).done,ft.value)})}}}k.d(Se,{FC:()=>pe,KL:()=>rt,_T:()=>ae,mG:()=>fe,qq:()=>_e})},4650:(lt,Se,k)=>{k.d(Se,{$8M:()=>Qu,$Z:()=>F_,AFp:()=>sd,AaK:()=>fe,BQk:()=>Yf,CHM:()=>Ou,CRH:()=>yu,CZH:()=>Rp,CqO:()=>Bc,D6c:()=>ld,EJc:()=>VT,EiD:()=>Ig,EpF:()=>vm,F4k:()=>BE,FYo:()=>Et,FiY:()=>Re,G48:()=>wD,GfV:()=>Cc,Gpc:()=>$,JOm:()=>na,JVY:()=>ff,KtG:()=>Pu,L6k:()=>Wy,LAX:()=>Ky,LFG:()=>pn,LSH:()=>vc,Lbi:()=>FT,Lck:()=>tt,MMx:()=>xe,NdJ:()=>wm,OlP:()=>dn,PXZ:()=>GT,Q6J:()=>ym,QGY:()=>av,QP$:()=>Pi,QbO:()=>cy,Qsj:()=>ht,R0b:()=>Mn,RDi:()=>yg,Rgc:()=>Ch,SBq:()=>ce,Sil:()=>uD,Suo:()=>Sh,TTD:()=>Xi,TgZ:()=>Br,Tol:()=>mv,Udp:()=>dh,X6Q:()=>vD,XFs:()=>Ze,Xpm:()=>H,Xts:()=>wc,Y36:()=>kc,YKP:()=>Jm,YNc:()=>nv,Yjl:()=>jt,Yz7:()=>Kt,Z0I:()=>ba,ZZ4:()=>Er,_Bn:()=>tr,_UZ:()=>_m,_Vd:()=>A,_c5:()=>Iy,_uU:()=>rI,aQg:()=>Bp,c2e:()=>oD,cJS:()=>Vt,cg1:()=>kv,d8E:()=>Ov,dDg:()=>hy,dqk:()=>on,eBb:()=>Zy,eFA:()=>Mr,ekj:()=>Xf,eoX:()=>Rh,f3M:()=>b,g9A:()=>sD,h0i:()=>$s,hGG:()=>ud,hij:()=>Rm,iGM:()=>Tl,ifc:()=>ut,ip1:()=>Al,jDz:()=>Yv,kL8:()=>la,kYT:()=>cn,lG2:()=>Zn,lqb:()=>kn,lri:()=>Ut,mCW:()=>po,n5z:()=>ss,oAB:()=>it,oJD:()=>vf,oxw:()=>Im,pB0:()=>pf,q3G:()=>Pn,q4F:()=>Tc,qLn:()=>Ng,qOj:()=>zf,qZA:()=>Zf,qzn:()=>fo,rWj:()=>gD,sBO:()=>WT,sIi:()=>qf,s_b:()=>vr,soG:()=>Ml,tb:()=>An,tp0:()=>wt,uIk:()=>Eo,vHH:()=>we,vpe:()=>ca,wAp:()=>yt,xp6:()=>N_,ynx:()=>Kf,z2F:()=>Lp,z3N:()=>Mi,zSh:()=>us,zs3:()=>Nc});var h=k(7579),te=k(727),O=k(9751),ae=k(6451),ie=k(3099);function he(s){for(let o in s)if(s[o]===he)return o;throw Error("Could not find renamed property on target object.")}function le(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function fe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(fe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ge(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const B=he({__forward_ref__:he});function $(s){return s.__forward_ref__=$,s.toString=function(){return fe(this())},s}function Q(s){return Ve(s)?s():s}function Ve(s){return"function"==typeof s&&s.hasOwnProperty(B)&&s.__forward_ref__===$}class we extends Error{constructor(o,a){super(function Xe(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,a)),this.code=o}}function _e(s){return"string"==typeof s?s:null==s?"":String(s)}function ve(s,o){throw new we(-201,!1)}function Gt(s,o){null==s&&function ze(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Kt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Vt(s){return{providers:s.providers||[],imports:s.imports||[]}}function rn(s){return Hr(s,Oi)||Hr(s,_i)}function ba(s){return null!==rn(s)}function Hr(s,o){return s.hasOwnProperty(o)?s[o]:null}function ms(s){return s&&(s.hasOwnProperty(zr)||s.hasOwnProperty(Ao))?s[zr]:null}const Oi=he({\u0275prov:he}),zr=he({\u0275inj:he}),_i=he({ngInjectableDef:he}),Ao=he({ngInjectorDef:he});var Ze=(()=>((Ze=Ze||{})[Ze.Default=0]="Default",Ze[Ze.Host=1]="Host",Ze[Ze.Self=2]="Self",Ze[Ze.SkipSelf=4]="SkipSelf",Ze[Ze.Optional=8]="Optional",Ze))();let qr;function Nn(s){const o=qr;return qr=s,o}function vi(s,o,a){const l=rn(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Ze.Optional?null:void 0!==o?o:void ve(fe(s))}function Rn(s){return{toString:s}.toString()}var Wn=(()=>((Wn=Wn||{})[Wn.OnPush=0]="OnPush",Wn[Wn.Default=1]="Default",Wn))(),ut=(()=>{return(s=ut||(ut={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",ut;var s})();const on=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Nr={},Dt=[],Yi=he({\u0275cmp:he}),Yt=he({\u0275dir:he}),wi=he({\u0275pipe:he}),Wt=he({\u0275mod:he}),Z=he({\u0275fac:he}),j=he({__NG_ELEMENT_ID__:he});let V=0;function H(s){return Rn(()=>{const a=!0===s.standalone,l={},d={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Wn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||Dt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||ut.Emulated,id:"c"+V++,styles:s.styles||Dt,_:null,setInput:null,schemas:s.schemas||null,tView:null},g=s.dependencies,v=s.features;return d.inputs=Qt(s.inputs,l),d.outputs=Qt(s.outputs),v&&v.forEach(E=>E(d)),d.directiveDefs=g?()=>("function"==typeof g?g():g).map(Ce).filter(Ue):null,d.pipeDefs=g?()=>("function"==typeof g?g():g).map(Vn).filter(Ue):null,d})}function Ce(s){return Pt(s)||mn(s)}function Ue(s){return null!==s}function it(s){return Rn(()=>({type:s.type,bootstrap:s.bootstrap||Dt,declarations:s.declarations||Dt,imports:s.imports||Dt,exports:s.exports||Dt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function cn(s,o){return Rn(()=>{const a=Rr(s,!0);a.declarations=o.declarations||Dt,a.imports=o.imports||Dt,a.exports=o.exports||Dt})}function Qt(s,o){if(null==s)return Nr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),a[d]=l,o&&(o[d]=g)}return a}const Zn=H;function jt(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function Pt(s){return s[Yi]||null}function mn(s){return s[Yt]||null}function Vn(s){return s[wi]||null}function Pi(s){const o=Pt(s)||mn(s)||Vn(s);return null!==o&&o.standalone}function Rr(s,o){const a=s[Wt]||null;if(!a&&!0===o)throw new Error(`Type ${fe(s)} does not have '\u0275mod' property.`);return a}function ar(s){return Array.isArray(s)&&"object"==typeof s[1]}function Or(s){return Array.isArray(s)&&!0===s[1]}function Du(s){return 0!=(8&s.flags)}function Ta(s){return 2==(2&s.flags)}function $l(s){return 1==(1&s.flags)}function Dr(s){return null!==s.template}function Zh(s){return 0!=(256&s[2])}function Fi(s,o){return s.hasOwnProperty(Z)?s[Z]:null}class Ji{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Xi(){return Ks}function Ks(s){return s.type.prototype.ngOnChanges&&(s.setInput=Cu),Sa}function Sa(){const s=Qh(this),o=s?.current;if(o){const a=s.previous;if(a===Nr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Cu(s,o,a,l){const d=Qh(s)||function xo(s,o){return s[ql]=o}(s,{previous:Nr,current:null}),g=d.current||(d.current={}),v=d.previous,E=this.declaredInputs[a],D=v[E];g[E]=new Ji(D&&D.currentValue,o,v===Nr),s[l]=o}Xi.ngInherit=!0;const ql="__ngSimpleChanges__";function Qh(s){return s[ql]||null}function bn(s){for(;Array.isArray(s);)s=s[0];return s}function si(s,o){return bn(o[s])}function Pr(s,o){return bn(o[s.index])}function Ro(s,o){return s.data[o]}function zt(s,o){const a=o[s];return ar(a)?a:a[0]}function Aa(s){return 4==(4&s[2])}function Ys(s){return 64==(64&s[2])}function Di(s,o){return null==o?null:s[o]}function Mu(s){s[18]=0}function En(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const bt={lFrame:nc(null),bindingsEnabled:!0};function ns(){return bt.bindingsEnabled}function Te(){return bt.lFrame.lView}function $t(){return bt.lFrame.tView}function Ou(s){return bt.lFrame.contextLView=s,s[8]}function Pu(s){return bt.lFrame.contextLView=null,s}function Cn(){let s=ku();for(;null!==s&&64===s.type;)s=s.parent;return s}function ku(){return bt.lFrame.currentTNode}function oi(s,o){const a=bt.lFrame;a.currentTNode=s,a.isParent=o}function xa(){return bt.lFrame.isParent}function Na(){bt.lFrame.isParent=!1}function Js(){return bt.lFrame.bindingIndex++}function rs(s){const o=bt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function ag(s,o){const a=bt.lFrame;a.bindingIndex=a.bindingRootIndex=s,Fu(o)}function Fu(s){bt.lFrame.currentDirectiveIndex=s}function Oa(s){const o=bt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function Xl(){return bt.lFrame.currentQueryIndex}function Pa(s){bt.lFrame.currentQueryIndex=s}function ec(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Lu(s,o,a){if(a&Ze.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||a&Ze.Host||(d=ec(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const l=bt.lFrame=tc();return l.currentTNode=o,l.lView=s,!0}function Vu(s){const o=tc(),a=s[1];bt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function tc(){const s=bt.lFrame,o=null===s?null:s.child;return null===o?nc(s):o}function nc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function rc(){const s=bt.lFrame;return bt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Cd=rc;function Xs(){const s=rc();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function Qn(){return bt.lFrame.selectedIndex}function Zr(s){bt.lFrame.selectedIndex=s}function fn(){const s=bt.lFrame;return Ro(s.tView,s.selectedIndex)}function oc(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const g=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:N}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),E&&((s.contentHooks||(s.contentHooks=[])).push(a,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,E)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(a,N)}}function Po(s,o,a){Fo(s,o,3,a)}function ko(s,o,a,l){(3&s[2])===a&&Fo(s,o,a,l)}function Ad(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function Fo(s,o,a,l){const g=l??-1,v=o.length-1;let E=0;for(let D=void 0!==l?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(E=o[D],null!=l&&E>=l)break}else o[D]<0&&(s[18]+=65536),(E<g||-1==g)&&(Md(s,a,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Md(s,o,a,l){const d=a[l]<0,g=a[l+1],E=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class bs{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Lo(s,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const g=a[l++],v=a[l++],E=a[l++];s.setAttribute(o,v,E,g)}else{const g=d,v=a[++l];Gu(g)?s.setProperty(o,g,v):s.setAttribute(o,g,v),l++}}return l}function ro(s){return 3===s||4===s||6===s}function Gu(s){return 64===s.charCodeAt(0)}function ka(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||Nd(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function Nd(s,o,a,l,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const E=s[g++];if("number"==typeof E){if(E===o){v=-1;break}if(E>o){v=g-1;break}}}for(;g<s.length;){const E=s[g];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(s[g+1]=d));if(l===s[g+1])return void(s[g+2]=d)}g++,null!==l&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,a),null!==l&&s.splice(g++,0,l),null!==d&&s.splice(g++,0,d)}function Rd(s){return-1!==s}function ur(s){return 32767&s}function La(s,o){let a=function Fa(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Vi=!0;function Va(s){const o=Vi;return Vi=s,o}let On=0;const bi={};function io(s,o){const a=qu(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Ba(l.data,s),Ba(o,null),Ba(l.blueprint,null));const d=Wu(s,o),g=s.injectorIndex;if(Rd(d)){const v=ur(d),E=La(d,o),D=E[1].data;for(let S=0;S<8;S++)o[g+S]=E[v+S]|D[v+S]}return o[g+8]=d,g}function Ba(s,o){s.push(0,0,0,0,0,0,0,0,o)}function qu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Wu(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=Bo(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Cs(s,o,a){!function zu(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(j)&&(l=a[j]),null==l&&(l=a[j]=On++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Ts(s,o,a){if(a&Ze.Optional)return s;ve()}function Zu(s,o,a,l){if(a&Ze.Optional&&void 0===l&&(l=null),0==(a&(Ze.Self|Ze.Host))){const d=s[9],g=Nn(void 0);try{return d?d.get(o,l,a&Ze.Optional):vi(o,l,a&Ze.Optional)}finally{Nn(g)}}return Ts(l,0,a)}function so(s,o,a,l=Ze.Default,d){if(null!==s){if(1024&o[2]){const v=function Uo(s,o,a,l,d){let g=s,v=o;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=ja(g,v,a,l|Ze.Self,bi);if(E!==bi)return E;let D=g.parent;if(!D){const S=v[21];if(S){const N=S.get(a,bi,l);if(N!==bi)return N}D=Bo(v),v=v[15]}g=D}return d}(s,o,a,l,bi);if(v!==bi)return v}const g=ja(s,o,a,l,bi);if(g!==bi)return g}return Zu(o,a,l,d)}function ja(s,o,a,l,d){const g=function uc(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(j)?s[j]:void 0;return"number"==typeof o?o>=0?255&o:lc:o}(a);if("function"==typeof g){if(!Lu(o,s,l))return l&Ze.Host?Ts(d,0,l):Zu(o,a,l,d);try{const v=g(l);if(null!=v||l&Ze.Optional)return v;ve()}finally{Cd()}}else if("number"==typeof g){let v=null,E=qu(s,o),D=-1,S=l&Ze.Host?o[16][6]:null;for((-1===E||l&Ze.SkipSelf)&&(D=-1===E?Wu(s,o):o[E+8],-1!==D&&$a(l,!1)?(v=o[1],E=ur(D),o=La(D,o)):E=-1);-1!==E;){const N=o[1];if(Ku(g,E,N.data)){const P=kd(E,o,a,v,l,S);if(P!==bi)return P}D=o[E+8],-1!==D&&$a(l,o[1].data[E+8]===S)&&Ku(g,E,o)?(v=N,E=ur(D),o=La(D,o)):E=-1}}return d}function kd(s,o,a,l,d,g){const v=o[1],E=v.data[s+8],N=Vo(E,v,a,null==l?Ta(E)&&Vi:l!=v&&0!=(3&E.type),d&Ze.Host&&g===E);return null!==N?is(o,v,N,E):bi}function Vo(s,o,a,l,d){const g=s.providerIndexes,v=o.data,E=1048575&g,D=s.directiveStart,N=g>>20,z=d?E+N:s.directiveEnd;for(let ee=l?E:E+N;ee<z;ee++){const Ee=v[ee];if(ee<D&&a===Ee||ee>=D&&Ee.type===a)return ee}if(d){const ee=v[D];if(ee&&Dr(ee)&&ee.type===a)return D}return null}function is(s,o,a,l){let d=s[a];const g=o.data;if(function to(s){return s instanceof bs}(d)){const v=d;v.resolving&&function Ye(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new we(-200,`Circular dependency in DI detected for ${s}${a}`)}(function pe(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():_e(s)}(g[a]));const E=Va(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?Nn(v.injectImpl):null;Lu(s,l,Ze.Default);try{d=s[a]=v.factory(void 0,g,s,l),o.firstCreatePass&&a>=l.directiveStart&&function Sd(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(l){const v=Ks(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),g&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,g),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,g))}(a,g[a],o)}finally{null!==D&&Nn(D),Va(E),v.resolving=!1,Cd()}}return d}function Ku(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function $a(s,o){return!(s&Ze.Self||s&Ze.Host&&o)}class oo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return so(this._tNode,this._lView,o,l,a)}}function lc(){return new oo(Cn(),Te())}function ss(s){return Rn(()=>{const o=s.prototype.constructor,a=o[Z]||Yu(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const g=d[Z]||Yu(d);if(g&&g!==a)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Yu(s){return Ve(s)?()=>{const o=Yu(Q(s));return o&&o()}:Fi(s)}function Bo(s){const o=s[1],a=o.type;return 2===a?o.declTNode:1===a?s[6]:null}function Qu(s){return function Pd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const g=a[d];if(ro(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(g===o)return a[d+1];d+=2}}}return null}(Cn(),s)}const Ss="__parameters__";function Ho(s,o,a){return Rn(()=>{const l=function Ju(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...g){if(this instanceof d)return l.apply(this,g),this;const v=new d(...g);return E.annotation=v,E;function E(D,S,N){const P=D.hasOwnProperty(Ss)?D[Ss]:Object.defineProperty(D,Ss,{value:[]})[Ss];for(;P.length<=N;)P.push(null);return(P[N]=P[N]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class dn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vn(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),vn(l,o)):o!==s&&o.push(l)}return o}function Ti(s,o){s.forEach(a=>Array.isArray(a)?Ti(a,o):o(a))}function za(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function kr(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function ot(s,o,a){let l=xs(s,o);return l>=0?s[1|l]=a:(l=~l,function cc(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Wa(s,o){const a=xs(s,o);if(a>=0)return s[1|a]}function xs(s,o){return function zo(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const g=l+(d-l>>1),v=s[g<<a];if(o===v)return g<<a;v>o?d=g:l=g+1}return~(d<<a)}(s,o,1)}const Si={},fc="__NG_DI_FLAG__",Wo="ngTempTokenPath",os=/\n/gm,br="__source";let Os;function as(s){const o=Os;return Os=s,o}function Gn(s,o=Ze.Default){if(void 0===Os)throw new we(-203,!1);return null===Os?vi(s,void 0,o):Os.get(s,o&Ze.Optional?null:void 0,o)}function pn(s,o=Ze.Default){return(function Ki(){return qr}()||Gn)(Q(s),o)}function b(s,o=Ze.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),pn(s,o)}function C(s){const o=[];for(let a=0;a<s.length;a++){const l=Q(s[a]);if(Array.isArray(l)){if(0===l.length)throw new we(900,!1);let d,g=Ze.Default;for(let v=0;v<l.length;v++){const E=l[v],D=F(E);"number"==typeof D?-1===D?d=E.token:g|=D:d=E}o.push(pn(d,g))}else o.push(pn(l))}return o}function x(s,o){return s[fc]=o,s.prototype[fc]=o,s}function F(s){return s[fc]}const Re=x(Ho("Optional"),8),wt=x(Ho("SkipSelf"),4);let cf,Ya,pc;function yg(s){cf=s}function lo(s){return function Fd(){if(void 0===Ya&&(Ya=null,on.trustedTypes))try{Ya=on.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return Ya}()?.createHTML(s)||s}function vg(s){return function co(){if(void 0===pc&&(pc=null,on.trustedTypes))try{pc=on.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return pc}()?.createHTML(s)||s}class ho{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ud extends ho{getTypeName(){return"HTML"}}class Ja extends ho{getTypeName(){return"Style"}}class wg extends ho{getTypeName(){return"Script"}}class gc extends ho{getTypeName(){return"URL"}}class qy extends ho{getTypeName(){return"ResourceURL"}}function Mi(s){return s instanceof ho?s.changingThisBreaksApplicationSecurity:s}function fo(s,o){const a=function hf(s){return s instanceof ho&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function ff(s){return new Ud(s)}function Wy(s){return new Ja(s)}function Zy(s){return new wg(s)}function Ky(s){return new gc(s)}function pf(s){return new qy(s)}class Yy{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(lo(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class Qy{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=lo(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=lo(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const v=a.item(d).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Jy=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function po(s){return(s=String(s)).match(Jy)?s:"unsafe:"+s}function Fs(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function xi(...s){const o={};for(const a of s)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const Bd=Fs("area,br,col,hr,img,wbr"),Xy=Fs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),jd=Fs("rp,rt"),Xa=xi(Bd,xi(Xy,Fs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xi(jd,Fs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xi(jd,Xy)),Qo=Fs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),yc=Fs("srcset"),eu=xi(Qo,yc,Fs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),yf=Fs("script,style,template");class _f{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!Xa.hasOwnProperty(a))return this.sanitizedSomething=!0,!yf.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let d=0;d<l.length;d++){const g=l.item(d),v=g.name,E=v.toLowerCase();if(!eu.hasOwnProperty(E)){this.sanitizedSomething=!0;continue}let D=g.value;Qo[E]&&(D=po(D)),yc[E]&&(s=D,D=(s=String(s)).split(",").map(o=>po(o.trim())).join(", ")),this.buf.push(" ",v,'="',tu(D),'"')}var s;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();Xa.hasOwnProperty(a)&&!Bd.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(tu(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const Eg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t_=/([^\#-~ |!])/g;function tu(s){return s.replace(/&/g,"&amp;").replace(Eg,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(t_,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Jo;function Ig(s,o){let a=null;try{Jo=Jo||function Yo(s){const o=new Qy(s);return function gf(){try{return!!(new window.DOMParser).parseFromString(lo(""),"text/html")}catch{return!1}}()?new Yy(o):o}(s);let l=o?String(o):"";a=Jo.getInertBodyElement(l);let d=5,g=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=g,g=a.innerHTML,a=Jo.getInertBodyElement(l)}while(l!==g);return lo((new _f).sanitizeChildren(_c(a)||a))}finally{if(a){const l=_c(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function _c(s){return"content"in s&&function Dg(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Pn=(()=>((Pn=Pn||{})[Pn.NONE=0]="NONE",Pn[Pn.HTML=1]="HTML",Pn[Pn.STYLE=2]="STYLE",Pn[Pn.SCRIPT=3]="SCRIPT",Pn[Pn.URL=4]="URL",Pn[Pn.RESOURCE_URL=5]="RESOURCE_URL",Pn))();function vf(s){const o=nu();return o?vg(o.sanitize(Pn.HTML,s)||""):fo(s,"HTML")?vg(Mi(s)):Ig(function _g(){return void 0!==cf?cf:typeof document<"u"?document:void 0}(),_e(s))}function vc(s){const o=nu();return o?o.sanitize(Pn.URL,s)||"":fo(s,"URL")?Mi(s):po(_e(s))}function nu(){const s=Te();return s&&s[12]}const wc=new dn("ENVIRONMENT_INITIALIZER"),Ef=new dn("INJECTOR",-1),bg=new dn("INJECTOR_DEF_TYPES");class Gd{get(o,a=Si){if(a===Si){const l=new Error(`NullInjectorError: No provider for ${fe(o)}!`);throw l.name="NullInjectorError",l}return a}}function o_(...s){return{\u0275providers:Qr(0,s)}}function Qr(s,...o){const a=[],l=new Set;let d;return Ti(o,g=>{const v=g;Ec(v,a,[],l)&&(d||(d=[]),d.push(v))}),void 0!==d&&nl(d,a),a}function nl(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];Ti(d,g=>{o.push(g)})}}function Ec(s,o,a,l){if(!(s=Q(s)))return!1;let d=null,g=ms(s);const v=!g&&Pt(s);if(g||v){if(v&&!v.standalone)return!1;d=s}else{const D=s.ngModule;if(g=ms(D),!g)return!1;d=D}const E=l.has(d);if(v){if(E)return!1;if(l.add(d),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const S of D)Ec(S,o,a,l)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let S;l.add(d);try{Ti(g.imports,N=>{Ec(N,o,a,l)&&(S||(S=[]),S.push(N))})}finally{}void 0!==S&&nl(S,o)}if(!E){const S=Fi(d)||(()=>new d);o.push({provide:d,useFactory:S,deps:Dt},{provide:bg,useValue:d,multi:!0},{provide:wc,useValue:()=>pn(d),multi:!0})}const D=g.providers;null==D||E||Ti(D,N=>{o.push(N)})}}return d!==s&&void 0!==s.providers}const Ic=he({provide:String,useValue:he});function Ni(s){return null!==s&&"object"==typeof s&&Ic in s}function Xo(s){return"function"==typeof s}const us=new dn("Set Injector scope."),Dc={},a_={};let rl;function il(){return void 0===rl&&(rl=new Gd),rl}class kn{}class bc extends kn{constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wd(o,v=>this.processProvider(v)),this.records.set(Ef,su(void 0,this)),d.has("environment")&&this.records.set(kn,su(void 0,this));const g=this.records.get(us);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(bg.multi,Dt,Ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=as(this),l=Nn(void 0);try{return o()}finally{as(a),Nn(l)}}get(o,a=Si,l=Ze.Default){this.assertNotDestroyed();const d=as(this),g=Nn(void 0);try{if(!(l&Ze.SkipSelf)){let E=this.records.get(o);if(void 0===E){const D=function qd(s){return"function"==typeof s||"object"==typeof s&&s instanceof dn}(o)&&rn(o);E=D&&this.injectableDefInScope(D)?su(iu(o),Dc):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(l&Ze.Self?il():this.parent).get(o,a=l&Ze.Optional&&a===Si?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[Wo]=v[Wo]||[]).unshift(fe(o)),d)throw v;return function J(s,o,a,l){const d=s[Wo];throw o[br]&&d.unshift(o[br]),s.message=function re(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=fe(o);if(Array.isArray(o))d=o.map(fe).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let E=o[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):fe(E)))}d=`{${g.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(os,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Wo]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Nn(g),as(d)}}resolveInjectorInitializers(){const o=as(this),a=Nn(void 0);try{const l=this.get(wc.multi,Dt,Ze.Self);for(const d of l)d()}finally{as(o),Nn(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(fe(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new we(205,!1)}processProvider(o){let a=Xo(o=Q(o))?o:Q(o&&o.provide);const l=function mo(s){return Ni(s)?su(void 0,s.useValue):su(Ls(s),Dc)}(o);if(Xo(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=su(void 0,Dc,!0),d.factory=()=>C(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Dc&&(a.value=a_,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Df(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function iu(s){const o=rn(s),a=null!==o?o.factory:Fi(s);if(null!==a)return a;if(s instanceof dn)throw new we(204,!1);if(s instanceof Function)return function If(s){const o=s.length;if(o>0)throw function As(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new we(204,!1);const a=function Ir(s){const o=s&&(s[Oi]||s[_i]);if(o){const a=function Gr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new we(204,!1)}function Ls(s,o,a){let l;if(Xo(s)){const d=Q(s);return Fi(d)||iu(d)}if(Ni(s))l=()=>Q(s.useValue);else if(function zd(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...C(s.deps||[]));else if(function ru(s){return!(!s||!s.useExisting)}(s))l=()=>pn(Q(s.useExisting));else{const d=Q(s&&(s.useClass||s.provide));if(!function Tg(s){return!!s.deps}(s))return Fi(d)||iu(d);l=()=>new d(...C(s.deps))}return l}function su(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function Sg(s){return!!s.\u0275providers}function Wd(s,o){for(const a of s)Array.isArray(a)?Wd(a,o):Sg(a)?Wd(a.\u0275providers,o):o(a)}class Mg{}class w{resolveComponentFactory(o){throw function y(s){const o=Error(`No component factory found for ${fe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let A=(()=>{class s{}return s.NULL=new w,s})();function R(){return W(Cn(),Te())}function W(s,o){return new ce(Pr(s,o))}let ce=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=R,s})();function Le(s){return s instanceof ce?s.nativeElement:s}class Et{}let ht=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function cr(){const s=Te(),a=zt(Cn().index,s);return(ar(a)?a:s)[11]}(),s})(),ls=(()=>{class s{}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:()=>null}),s})();class Cc{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Tc=new Cc("14.2.0"),Fr={};function d_(s){return s.ngOriginalError}class Ng{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&d_(o);for(;a&&d_(a);)a=d_(a);return a||null}}const f_=new Map;let Pb=0;const Yd="__ngContext__";function ui(s,o){ar(o)?(s[Yd]=o[20],function Fb(s){f_.set(s[20],s)}(o)):s[Yd]=o}function Cf(s){const o=s[Yd];return"number"==typeof o?function g0(s){return f_.get(s)||null}(o):o||null}function p_(s){const o=Cf(s);return o?ar(o)?o:o.lView:null}function au(s){return s instanceof Function?s():s}var na=(()=>((na=na||{})[na.Important=1]="Important",na[na.DashCase=2]="DashCase",na))();function Vg(s,o){return undefined(s,o)}function Jd(s){const o=s[3];return Or(o)?o[3]:o}function v_(s){return D0(s[13])}function w_(s){return D0(s[4])}function D0(s){for(;null!==s&&!Or(s);)s=s[4];return s}function Xd(s,o,a,l,d){if(null!=l){let g,v=!1;Or(l)?g=l:ar(l)&&(v=!0,l=l[0]);const E=bn(l);0===s&&null!==a?null==d?T0(o,a,E):xc(o,a,E,d||null,!0):1===s&&null!==a?xc(o,a,E,d||null,!0):2===s?function Hg(s,o,a){const l=dr(s,o);l&&function Yb(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,E,v):3===s&&o.destroyNode(E),null!=g&&function eh(s,o,a,l,d){const g=a[7];g!==bn(a)&&Xd(o,s,l,g,d);for(let E=10;E<a.length;E++){const D=a[E];ol(D[1],D,s,o,l,g)}}(o,s,g,a,d)}}function Ug(s,o,a){return s.createElement(o,a)}function Af(s,o){const a=s[9],l=a.indexOf(o),d=o[3];512&o[2]&&(o[2]&=-513,En(d,-1)),a.splice(l,1)}function Bg(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&Af(d,l),o>0&&(s[a-1][4]=l[4]);const g=kr(s,10+o);!function b0(s,o){ol(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=g[19];null!==v&&v.detachView(g[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function jg(s,o){if(!(128&o[2])){const a=o[11];a.destroyNode&&ol(s,o,a,3,null,null),function zb(s){let o=s[13];if(!o)return Mf(s[1],s);for(;o;){let a=null;if(ar(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)ar(o)&&Mf(o[1],o),o=o[3];null===o&&(o=s),ar(o)&&Mf(o[1],o),a=o&&o[4]}o=a}}(o)}}function Mf(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Kb(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof bs)){const g=a[l+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=d[g[v]],D=g[v+1];try{D.call(E)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function Zb(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let g=0;g<a.length-1;g+=2)if("string"==typeof a[g]){const v=a[g+1],E="function"==typeof v?v(o):bn(o[v]),D=l[d=a[g+2]],S=a[g+3];"boolean"==typeof S?E.removeEventListener(a[g],D,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),g+=2}else{const v=l[d=a[g+1]];a[g].call(v)}if(null!==l){for(let g=d+1;g<l.length;g++)(0,l[g])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const a=o[17];if(null!==a&&Or(o[3])){a!==o[3]&&Af(a,o);const l=o[19];null!==l&&l.detachView(s)}!function m0(s){f_.delete(s[20])}(o)}}function xf(s,o,a){return function C0(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===ut.None||d===ut.Emulated)return null}return Pr(l,a)}(s,o.parent,a)}function xc(s,o,a,l,d){s.insertBefore(o,a,l,d)}function T0(s,o,a){s.appendChild(o,a)}function S0(s,o,a,l,d){null!==l?xc(s,o,a,l,d):T0(s,o,a)}function dr(s,o){return s.parentNode(o)}let $g=function Nf(s,o,a){return 40&s.type?Pr(s,a):null};function Rf(s,o,a,l){const d=xf(s,l,o),g=o[11],E=function b_(s,o,a){return $g(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)S0(g,d,a[D],E,!1);else S0(g,d,a,E,!1)}function T_(s,o){if(null!==o){const a=o.type;if(3&a)return Pr(o,s);if(4&a)return S_(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return T_(s,l);{const d=s[o.index];return Or(d)?S_(-1,d):bn(d)}}if(32&a)return Vg(o,s)()||bn(s[o.index]);{const l=Xb(s,o);return null!==l?Array.isArray(l)?l[0]:T_(Jd(s[16]),l):T_(s,o.next)}}return null}function Xb(s,o){return null!==o?s[16][6].projection[o.projection]:null}function S_(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return T_(l,d)}return o[7]}function Gg(s,o,a,l,d,g,v){for(;null!=a;){const E=l[a.index],D=a.type;if(v&&0===o&&(E&&ui(bn(E),l),a.flags|=4),64!=(64&a.flags))if(8&D)Gg(s,o,a.child,l,d,g,!1),Xd(o,s,d,E,g);else if(32&D){const S=Vg(a,l);let N;for(;N=S();)Xd(o,s,d,N,g);Xd(o,s,d,E,g)}else 16&D?A_(s,o,l,a,d,g):Xd(o,s,d,E,g);a=v?a.projectionNext:a.next}}function ol(s,o,a,l,d,g){Gg(a,l,s.firstChild,o,d,g,!1)}function A_(s,o,a,l,d,g){const v=a[16],D=v[6].projection[l.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)Xd(o,s,d,D[S],g);else Gg(s,o,D,v[3],d,g,!0)}function eC(s,o,a){s.setAttribute(o,"style",a)}function zg(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function x_(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===l||s.charCodeAt(d+g)<=32)return d}a=d+1}}const x0="ng-template";function tC(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==x_(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function N0(s){return 4===s.type&&s.value!==x0}function R0(s,o,a){return o===(4!==s.type||a?s.value:x0)}function nC(s,o,a){let l=4;const d=s.attrs||[],g=function iC(s){for(let o=0;o<s.length;o++)if(ro(s[o]))return o;return s.length}(d);let v=!1;for(let E=0;E<o.length;E++){const D=o[E];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!R0(s,D,a)||""===D&&1===o.length){if(ra(l))return!1;v=!0}}else{const S=8&l?D:o[++E];if(8&l&&null!==s.attrs){if(!tC(s.attrs,S,a)){if(ra(l))return!1;v=!0}continue}const P=qg(8&l?"class":D,d,N0(s),a);if(-1===P){if(ra(l))return!1;v=!0;continue}if(""!==S){let z;z=P>g?"":d[P+1].toLowerCase();const ee=8&l?z:null;if(ee&&-1!==x_(ee,S,0)||2&l&&S!==z){if(ra(l))return!1;v=!0}}}}else{if(!v&&!ra(l)&&!ra(D))return!1;if(v&&ra(D))continue;v=!1,l=D|1&l}}return ra(l)||v}function ra(s){return 0==(1&s)}function qg(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function sC(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function rC(s,o,a=!1){for(let l=0;l<o.length;l++)if(nC(s,o[l],a))return!0;return!1}function k0(s,o){return s?":not("+o.trim()+")":o}function oC(s){let o=s[0],a=1,l=2,d="",g=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const E=s[++a];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!ra(v)&&(o+=k0(g,d),d=""),l=v,g=g||!ra(l);a++}return""!==d&&(o+=k0(g,d)),o}const Ft={};function N_(s){F0($t(),Te(),Qn()+s,!1)}function F0(s,o,a,l){if(!l)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Po(o,g,a)}else{const g=s.preOrderHooks;null!==g&&ko(o,g,0,a)}Zr(a)}function B0(s,o=null,a=null,l){const d=Of(s,o,a,l);return d.resolveInjectorInitializers(),d}function Of(s,o=null,a=null,l,d=new Set){const g=[a||Dt,o_(s)];return l=l||("object"==typeof s?void 0:fe(s)),new bc(g,o||il(),l||null,d)}let Nc=(()=>{class s{static create(a,l){if(Array.isArray(a))return B0({name:""},l,a,"");{const d=a.name??"";return B0({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=Si,s.NULL=new Gd,s.\u0275prov=Kt({token:s,providedIn:"any",factory:()=>pn(Ef)}),s.__NG_ELEMENT_ID__=-1,s})();function kc(s,o=Ze.Default){const a=Te();return null===a?pn(s,o):so(Cn(),a,Q(s),o)}function F_(){throw new Error("invalid")}function yo(s,o){return s<<17|o<<2}function Vs(s){return s>>17&32767}function Jg(s){return 2|s}function sa(s){return(131068&s)>>2}function kf(s,o){return-131069&s|o<<2}function L_(s){return 1|s}function G_(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],g=a[l+1];if(-1!==g){const v=s.data[g];Pa(d),v.contentQueries(2,o[g],g)}}}function nm(s,o,a,l,d,g,v,E,D,S,N){const P=o.blueprint.slice();return P[0]=d,P[2]=76|l,(null!==N||s&&1024&s[2])&&(P[2]|=1024),Mu(P),P[3]=P[15]=s,P[8]=a,P[10]=v||s&&s[10],P[11]=E||s&&s[11],P[12]=D||s&&s[12]||null,P[9]=S||s&&s[9]||null,P[6]=g,P[20]=function kb(){return Pb++}(),P[21]=N,P[16]=2==o.type?s[16]:P,P}function Vc(s,o,a,l,d){let g=s.data[o];if(null===g)g=function uE(s,o,a,l,d){const g=ku(),v=xa(),D=s.data[o]=function hE(s,o,a,l,d,g){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=D),null!==g&&(v?null==g.child&&null!==D.parent&&(g.child=D):null===g.next&&(g.next=D)),D}(s,o,a,l,d),function og(){return bt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=a,g.value=l,g.attrs=d;const v=function Oo(){const s=bt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return oi(g,!0),g}function dl(s,o,a,l){if(0===a)return-1;const d=o.length;for(let g=0;g<a;g++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function rm(s,o,a){Vu(o);try{const l=s.viewQuery;null!==l&&$f(1,l,a);const d=s.template;null!==d&&lE(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&G_(s,o),s.staticViewQueries&&$f(2,s.viewQuery,a);const g=s.components;null!==g&&function HM(s,o){for(let a=0;a<o.length;a++)LC(s,o[a])}(o,g)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,Xs()}}function ih(s,o,a,l){const d=o[2];if(128!=(128&d)){Vu(o);try{Mu(o),function Ql(s){return bt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&lE(s,o,a,2,l);const v=3==(3&d);if(v){const S=s.preOrderCheckHooks;null!==S&&Po(o,S,null)}else{const S=s.preOrderHooks;null!==S&&ko(o,S,0,null),Ad(o,0)}if(function IE(s){for(let o=v_(s);null!==o;o=w_(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],g=d[3];0==(512&d[2])&&En(g,1),d[2]|=512}}}(o),function Y_(s){for(let o=v_(s);null!==o;o=w_(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];Ys(l)&&ih(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&G_(s,o),v){const S=s.contentCheckHooks;null!==S&&Po(o,S)}else{const S=s.contentHooks;null!==S&&ko(o,S,1),Ad(o,1)}!function CC(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)Zr(~d);else{const g=d,v=a[++l],E=a[++l];ag(v,g),E(2,o[g])}}}finally{Zr(-1)}}(s,o);const E=s.components;null!==E&&function TC(s,o){for(let a=0;a<o.length;a++)FC(s,o[a])}(o,E);const D=s.viewQuery;if(null!==D&&$f(2,D,l),v){const S=s.viewCheckHooks;null!==S&&Po(o,S)}else{const S=s.viewHooks;null!==S&&ko(o,S,2),Ad(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,En(o[3],-1))}finally{Xs()}}}function z_(s,o,a,l){const d=o[10],v=Aa(o);try{!v&&d.begin&&d.begin(),v&&rm(s,o,l),ih(s,o,a,l)}finally{!v&&d.end&&d.end()}}function lE(s,o,a,l,d){const g=Qn(),v=2&l;try{Zr(-1),v&&o.length>22&&F0(s,o,22,!1),a(l,d)}finally{Zr(g)}}function SC(s,o,a){if(Du(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,a[g],g)}}}function q_(s,o,a){!ns()||(function mE(s,o,a,l){const d=a.directiveStart,g=a.directiveEnd;s.firstCreatePass||io(a,o),ui(l,o);const v=a.initialInputs;for(let E=d;E<g;E++){const D=s.data[E],S=Dr(D);S&&PC(o,a,D);const N=is(o,s,E,a);ui(N,o),null!==v&&lm(0,E-d,N,D,0,v),S&&(zt(a.index,o)[8]=N)}}(s,o,a,Pr(a,o)),128==(128&a.flags)&&function NC(s,o,a){const l=a.directiveStart,d=a.directiveEnd,g=a.index,v=function Jl(){return bt.lFrame.currentDirectiveIndex}();try{Zr(g);for(let E=l;E<d;E++){const D=s.data[E],S=o[E];Fu(E),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&RC(D,S)}}finally{Zr(-1),Fu(v)}}(s,o,a))}function Uc(s,o,a=Pr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let g=0;g<l.length;g+=2){const v=l[g+1],E=-1===v?a(o,s):s[v];s[d++]=E}}}function im(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=sm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function sm(s,o,a,l,d,g,v,E,D,S){const N=22+l,P=N+d,z=function cE(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Ft);return a}(N,P),ee="function"==typeof S?S():S;return z[1]={type:s,blueprint:z,template:a,queries:null,viewQuery:E,declTNode:o,data:z.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:ee,incompleteFirstPass:!1}}function dE(s,o,a,l){const d=X_(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&ev(s).push(l,d.length-1))}function AC(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function MC(s,o){const l=o.directiveEnd,d=s.data,g=o.attrs,v=[];let E=null,D=null;for(let S=o.directiveStart;S<l;S++){const N=d[S],P=N.inputs,z=null===g||N0(o)?null:kC(P,g);v.push(z),E=AC(P,S,E),D=AC(N.outputs,S,D)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=E,o.outputs=D}function Us(s,o,a,l,d,g,v,E){const D=Pr(o,a);let N,S=o.inputs;!E&&null!=S&&(N=S[l])?(dm(s,a,N,l,d),Ta(o)&&fE(a,o.index)):3&o.type&&(l=function zM(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,g.setProperty(D,l,d))}function fE(s,o){const a=zt(o,s);16&a[2]||(a[2]|=32)}function am(s,o,a,l){let d=!1;if(ns()){const g=function yE(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let g=0;g<l.length;g++){const v=l[g];rC(a,v.selectors,!1)&&(d||(d=[]),Cs(io(a,o),s,v.type),Dr(v)?(_E(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==g){d=!0,Z_(a,s.data.length,g.length);for(let N=0;N<g.length;N++){const P=g[N];P.providersResolver&&P.providersResolver(P)}let E=!1,D=!1,S=dl(s,o,g.length,null);for(let N=0;N<g.length;N++){const P=g[N];a.mergedAttrs=ka(a.mergedAttrs,P.hostAttrs),um(s,a,o,S,P),OC(S,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const z=P.type.prototype;!E&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),E=!0),!D&&(z.ngOnChanges||z.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),S++}MC(s,a)}v&&function vE(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=a[o[d+1]];if(null==g)throw new we(-301,!1);l.push(o[d],g)}}}(a,l,v)}return a.mergedAttrs=ka(a.mergedAttrs,a.attrs),d}function W_(s,o,a,l,d,g){const v=g.hostBindings;if(v){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const D=~o.index;(function xC(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(E)!=D&&E.push(D),E.push(l,d,v)}}function RC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function _E(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function OC(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Dr(o)&&(a[""]=s)}}function Z_(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function um(s,o,a,l,d){s.data[l]=d;const g=d.factory||(d.factory=Fi(d.type)),v=new bs(g,Dr(d),kc);s.blueprint[l]=v,a[l]=v,W_(s,o,0,l,dl(s,a,d.hostVars,Ft),d)}function PC(s,o,a){const l=Pr(o,s),d=im(a),g=s[10],v=cm(s,nm(s,d,null,a.onPush?32:16,l,o,g,g.createRenderer(l,a),null,null,null));s[o.index]=v}function _o(s,o,a,l,d,g){const v=Pr(s,o);!function K_(s,o,a,l,d,g,v){if(null==g)s.removeAttribute(o,d,a);else{const E=null==v?_e(g):v(g,l||"",d);s.setAttribute(o,d,E,a)}}(o[11],v,g,s.value,a,l,d)}function lm(s,o,a,l,d,g){const v=g[o];if(null!==v){const E=l.setInput;for(let D=0;D<v.length;){const S=v[D++],N=v[D++],P=v[D++];null!==E?l.setInput(a,P,S,N):a[N]=P}}}function kC(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function EE(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function FC(s,o){const a=zt(o,s);if(Ys(a)){const l=a[1];48&a[2]?ih(l,a,l.template,a[8]):a[5]>0&&jf(a)}}function jf(s){for(let l=v_(s);null!==l;l=w_(l))for(let d=10;d<l.length;d++){const g=l[d];if(Ys(g))if(512&g[2]){const v=g[1];ih(v,g,v.template,g[8])}else g[5]>0&&jf(g)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=zt(a[l],s);Ys(d)&&d[5]>0&&jf(d)}}function LC(s,o){const a=zt(o,s),l=a[1];(function DE(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),rm(l,a,a[8])}function cm(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function sh(s){for(;s;){s[2]|=32;const o=Jd(s);if(Zh(s)&&!o)return s;s=o}return null}function $f(s,o,a){Pa(0),o(s,a)}function X_(s){return s[7]||(s[7]=[])}function ev(s){return s.cleanup||(s.cleanup=[])}function CE(s,o){const a=s[9],l=a?a.get(Ng,null):null;l&&l.handleError(o)}function dm(s,o,a,l,d){for(let g=0;g<a.length;){const v=a[g++],E=a[g++],D=o[v],S=s.data[v];null!==S.setInput?S.setInput(D,d,l,E):D[E]=d}}function Hf(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const E=o[v];"number"==typeof E?g=E:1==g?d=ge(d,E):2==g&&(l=ge(l,E+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}function hm(s,o,a,l,d=!1){for(;null!==a;){const g=o[a.index];if(null!==g&&l.push(bn(g)),Or(g))for(let E=10;E<g.length;E++){const D=g[E],S=D[1].firstChild;null!==S&&hm(D[1],D,S,l)}const v=a.type;if(8&v)hm(s,o,a.child,l);else if(32&v){const E=Vg(a,o);let D;for(;D=E();)l.push(D)}else if(16&v){const E=Xb(o,a);if(Array.isArray(E))l.push(...E);else{const D=Jd(o[16]);hm(D[1],D,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class Gf{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return hm(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Or(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(Bg(o,l),kr(a,l))}this._attachedToViewContainer=!1}jg(this._lView[1],this._lView)}onDestroy(o){dE(this._lView[1],this._lView,null,o)}markForCheck(){sh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Q_(s,o,a){const l=o[10];l.begin&&l.begin();try{ih(s,o,s.template,a)}catch(d){throw CE(o,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new we(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Gb(s,o){ol(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new we(902,!1);this._appRef=o}}class fm extends Gf{constructor(o){super(o),this._view=o}detectChanges(){!function J_(s){!function bE(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=p_(a);if(null!==l){const d=l[1];z_(d,l,d.template,a)}}}(s[8])}(this._view)}checkNoChanges(){}get context(){return null}}class pm extends A{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Pt(o);return new oh(a,this.ngModule)}}function TE(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class UC{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){const d=this.injector.get(o,Fr,l);return d!==Fr||a===Fr?d:this.parentInjector.get(o,a,l)}}class oh extends Mg{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function aC(s){return s.map(oC).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return TE(this.componentDef.inputs)}get outputs(){return TE(this.componentDef.outputs)}create(o,a,l,d){let g=(d=d||this.ngModule)instanceof kn?d:d?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new UC(o,g):o,E=v.get(Et,null);if(null===E)throw new we(407,!1);const D=v.get(ls,null),S=E.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",P=l?function GM(s,o,a){return s.selectRootElement(o,a===ut.ShadowDom)}(S,l,this.componentDef.encapsulation):Ug(E.createRenderer(null,this.componentDef),N,function SE(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),z=this.componentDef.onPush?288:272,ee={components:[]},Ee=sm(0,null,null,1,0,null,null,null,null,null),Oe=nm(null,Ee,ee,z,null,null,E,S,D,v,null);let $e,Qe;Vu(Oe);try{const _t=function ZM(s,o,a,l,d,g){const v=a[1];a[22]=s;const D=Vc(v,22,2,"#host",null),S=D.mergedAttrs=o.hostAttrs;null!==S&&(Hf(D,S,!0),null!==s&&(Lo(d,s,S),null!==D.classes&&zg(d,s,D.classes),null!==D.styles&&eC(d,s,D.styles)));const N=l.createRenderer(s,o),P=nm(a,im(o),null,o.onPush?32:16,a[22],D,l,N,g||null,null,null);return v.firstCreatePass&&(Cs(io(D,a),v,o.type),_E(v,D),Z_(D,a.length,1)),cm(a,P),a[22]=P}(P,this.componentDef,Oe,E,S);if(P)if(l)Lo(S,P,["ng-version",Tc.full]);else{const{attrs:Ne,classes:gt}=function uC(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let g=s[l];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++l]):8===d&&a.push(g);else{if(!ra(d))break;d=g}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Ne&&Lo(S,P,Ne),gt&&gt.length>0&&zg(S,P,gt.join(" "))}if(Qe=Ro(Ee,22),void 0!==a){const Ne=Qe.projection=[];for(let gt=0;gt<this.ngContentSelectors.length;gt++){const xt=a[gt];Ne.push(null!=xt?Array.from(xt):null)}}$e=function KM(s,o,a,l,d){const g=a[1],v=function gE(s,o,a){const l=Cn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),um(s,l,o,dl(s,o,1,null),a),MC(s,l));const d=is(o,s,l.directiveStart,l);ui(d,o);const g=Pr(l,o);return g&&ui(g,o),d}(g,a,o);if(l.components.push(v),s[8]=v,null!==d)for(const D of d)D(v,o);if(o.contentQueries){const D=Cn();o.contentQueries(1,v,D.directiveStart)}const E=Cn();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Zr(E.index),W_(a[1],E,0,E.directiveStart,E.directiveEnd,o),RC(o,v)),v}(_t,this.componentDef,Oe,ee,[AE]),rm(Ee,Oe,null)}finally{Xs()}return new $C(this.componentType,$e,W(Qe,Oe),Oe,Qe)}}class $C extends class Ag{}{constructor(o,a,l,d,g){super(),this.location=l,this._rootLView=d,this._tNode=g,this.instance=a,this.hostView=this.changeDetectorRef=new fm(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){const g=this._rootLView;dm(g[1],g,d,o,a),fE(g,this._tNode.index)}}get injector(){return new oo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function AE(){const s=Cn();oc(Te()[1],s)}function zf(s){let o=function ME(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Dr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new we(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=NE(s.inputs),v.declaredInputs=NE(s.declaredInputs),v.outputs=NE(s.outputs);const E=d.hostBindings;E&&GC(s,E);const D=d.viewQuery,S=d.contentQueries;if(D&&QM(s,D),S&&RE(s,S),le(s.inputs,d.inputs),le(s.declaredInputs,d.declaredInputs),le(s.outputs,d.outputs),Dr(d)&&d.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(s),E===zf&&(a=!1)}}o=Object.getPrototypeOf(o)}!function xE(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=ka(d.hostAttrs,a=ka(a,d.hostAttrs))}}(l)}function NE(s){return s===Nr?{}:s===Dt?[]:s}function QM(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function RE(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,g)=>{o(l,d,g),a(l,d,g)}:o}function GC(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let gm=null;function zn(){if(!gm){const s=on.Symbol;if(s&&s.iterator)gm=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(gm=l)}}}return gm}function qf(s){return!!PE(s)&&(Array.isArray(s)||!(s instanceof Map)&&zn()in s)}function PE(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Cr(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Eo(s,o,a,l){const d=Te();return Cr(d,Js(),o)&&($t(),_o(fn(),d,s,o,a,l)),Eo}function nv(s,o,a,l,d,g,v,E){const D=Te(),S=$t(),N=s+22,P=S.firstCreatePass?function ZC(s,o,a,l,d,g,v,E,D){const S=o.consts,N=Vc(o,s,4,v||null,Di(S,E));am(o,a,N,Di(S,D)),oc(o,N);const P=N.tViews=sm(2,N,l,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,N),P.queries=o.queries.embeddedTView(N)),N}(N,S,D,o,a,l,d,g,v):S.data[N];oi(P,!1);const z=D[11].createComment("");Rf(S,D,z,P),ui(z,D),cm(D,D[N]=EE(z,D,z,P)),$l(P)&&q_(S,D,P),null!=v&&Uc(D,P,E)}function ym(s,o,a){const l=Te();return Cr(l,Js(),o)&&Us($t(),fn(),l,s,o,l[11],a,!1),ym}function Xr(s,o,a,l,d){const v=d?"class":"style";dm(s,a,o.inputs[v],v,l)}function Br(s,o,a,l){const d=Te(),g=$t(),v=22+s,E=d[11],D=d[v]=Ug(E,o,function Bu(){return bt.lFrame.currentNamespace}()),S=g.firstCreatePass?function iv(s,o,a,l,d,g,v){const E=o.consts,S=Vc(o,s,2,d,Di(E,g));return am(o,a,S,Di(E,v)),null!==S.attrs&&Hf(S,S.attrs,!1),null!==S.mergedAttrs&&Hf(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,g,d,0,o,a,l):g.data[v];oi(S,!0);const N=S.mergedAttrs;null!==N&&Lo(E,D,N);const P=S.classes;null!==P&&zg(E,D,P);const z=S.styles;return null!==z&&eC(E,D,z),64!=(64&S.flags)&&Rf(g,d,D,S),0===function Nu(){return bt.lFrame.elementDepthCount}()&&ui(D,d),function Ru(){bt.lFrame.elementDepthCount++}(),$l(S)&&(q_(g,d,S),SC(g,S,d)),null!==l&&Uc(d,S),Br}function Zf(){let s=Cn();xa()?Na():(s=s.parent,oi(s,!1));const o=s;!function Wl(){bt.lFrame.elementDepthCount--}();const a=$t();return a.firstCreatePass&&(oc(a,s),Du(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Hu(s){return 0!=(16&s.flags)}(o)&&Xr(a,o,Te(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function xd(s){return 0!=(32&s.flags)}(o)&&Xr(a,o,Te(),o.stylesWithoutHost,!1),Zf}function _m(s,o,a,l){return Br(s,o,a,l),Zf(),_m}function Kf(s,o,a){const l=Te(),d=$t(),g=s+22,v=d.firstCreatePass?function sv(s,o,a,l,d){const g=o.consts,v=Di(g,l),E=Vc(o,s,8,"ng-container",v);return null!==v&&Hf(E,v,!0),am(o,a,E,Di(g,d)),null!==o.queries&&o.queries.elementStart(o,E),E}(g,d,l,o,a):d.data[g];oi(v,!0);const E=l[g]=l[11].createComment("");return Rf(d,l,E,v),ui(E,l),$l(v)&&(q_(d,l,v),SC(d,v,l)),null!=a&&Uc(l,v),Kf}function Yf(){let s=Cn();const o=$t();return xa()?Na():(s=s.parent,oi(s,!1)),o.firstCreatePass&&(oc(o,s),Du(s)&&o.queries.elementEnd(s)),Yf}function vm(){return Te()}function av(s){return!!s&&"function"==typeof s.then}function BE(s){return!!s&&"function"==typeof s.subscribe}const Bc=BE;function wm(s,o,a,l){const d=Te(),g=$t(),v=Cn();return function $E(s,o,a,l,d,g,v,E){const D=$l(l),N=s.firstCreatePass&&ev(s),P=o[8],z=X_(o);let ee=!0;if(3&l.type||E){const $e=Pr(l,o),Qe=E?E($e):$e,_t=z.length,Ne=E?xt=>E(bn(xt[l.index])):l.index;let gt=null;if(!E&&D&&(gt=function jE(s,o,a,l){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===a&&d[g+1]===l){const E=o[7],D=d[g+2];return E.length>D?E[D]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,l.index)),null!==gt)(gt.__ngLastListenerFn__||gt).__ngNextListenerFn__=g,gt.__ngLastListenerFn__=g,ee=!1;else{g=Qf(l,o,P,g,!1);const xt=a.listen(Qe,d,g);z.push(g,xt),N&&N.push(d,Ne,_t,_t+1)}}else g=Qf(l,o,P,g,!1);const Ee=l.outputs;let Oe;if(ee&&null!==Ee&&(Oe=Ee[d])){const $e=Oe.length;if($e)for(let Qe=0;Qe<$e;Qe+=2){const Dn=o[Oe[Qe]][Oe[Qe+1]].subscribe(g),_a=z.length;z.push(g,Dn),N&&N.push(d,l.index,_a,-(_a+1))}}}(g,d,d[11],v,s,o,0,l),wm}function uv(s,o,a,l){try{return!1!==a(l)}catch(d){return CE(s,d),!1}}function Qf(s,o,a,l,d){return function g(v){if(v===Function)return l;sh(2&s.flags?zt(s.index,o):o);let D=uv(o,0,l,v),S=g.__ngNextListenerFn__;for(;S;)D=uv(o,0,S,v)&&D,S=S.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function Im(s=1){return function eo(s){return(bt.lFrame.contextLView=function Uu(s,o){for(;s>0;)o=o[15],s--;return o}(s,bt.lFrame.contextLView))[8]}(s)}function Cm(s,o,a,l,d){const g=s[a+1],v=null===o;let E=l?Vs(g):sa(g),D=!1;for(;0!==E&&(!1===D||v);){const N=s[E+1];hv(s[E],o)&&(D=!0,s[E+1]=l?L_(N):Jg(N)),E=l?Vs(N):sa(N)}D&&(s[a+1]=l?Jg(g):L_(g))}function hv(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&xs(s,o)>=0}const hr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Tm(s){return s.substring(hr.key,hr.keyEnd)}function YE(s,o){const a=hr.textEnd;return a===o?-1:(o=hr.keyEnd=function YC(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,hr.key=o,a),jc(s,o,a))}function jc(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function dh(s,o,a){return Io(s,o,a,!1),dh}function Xf(s,o){return Io(s,o,null,!0),Xf}function mv(s){!function cs(s,o,a,l){const d=$t(),g=rs(2);d.firstUpdatePass&&JE(d,null,g,l);const v=Te();if(a!==Ft&&Cr(v,g,a)){const E=d.data[Qn()];if(nI(E,l)&&!Mm(d,g)){let D=l?E.classesWithoutHost:E.stylesWithoutHost;null!==D&&(a=ge(D,a||"")),Xr(d,E,v,a,l)}else!function tp(s,o,a,l,d,g,v,E){d===Ft&&(d=Dt);let D=0,S=0,N=0<d.length?d[0]:null,P=0<g.length?g[0]:null;for(;null!==N||null!==P;){const z=D<d.length?d[D+1]:void 0,ee=S<g.length?g[S+1]:void 0;let Oe,Ee=null;N===P?(D+=2,S+=2,z!==ee&&(Ee=P,Oe=ee)):null===P||null!==N&&N<P?(D+=2,Ee=N):(S+=2,Ee=P,Oe=ee),null!==Ee&&_v(s,o,a,l,Ee,Oe,v,E),N=D<d.length?d[D]:null,P=S<g.length?g[S]:null}}(d,E,v,v[11],v[g+1],v[g+1]=function eI(s,o,a){if(null==a||""===a)return Dt;const l=[],d=Mi(a);if(Array.isArray(d))for(let g=0;g<d.length;g++)s(l,d[g],!0);else if("object"==typeof d)for(const g in d)d.hasOwnProperty(g)&&s(l,g,d[g]);else"string"==typeof d&&o(l,d);return l}(s,o,a),l,g)}}(ot,ua,s,!0)}function ua(s,o){for(let a=function KE(s){return function Sm(s){hr.key=0,hr.keyEnd=0,hr.value=0,hr.valueEnd=0,hr.textEnd=s.length}(s),YE(s,jc(s,0,hr.textEnd))}(o);a>=0;a=YE(o,a))ot(s,Tm(o),!0)}function Io(s,o,a,l){const d=Te(),g=$t(),v=rs(2);g.firstUpdatePass&&JE(g,s,v,l),o!==Ft&&Cr(d,v,o)&&_v(g,g.data[Qn()],d,d[11],s,d[v+1]=function Nm(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=fe(Mi(s)))),s}(o,a),l,v)}function Mm(s,o){return o>=s.expandoStartIndex}function JE(s,o,a,l){const d=s.data;if(null===d[a+1]){const g=d[Qn()],v=Mm(s,a);nI(g,l)&&null===o&&!v&&(o=!1),o=function yv(s,o,a,l){const d=Oa(s);let g=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=$c(a=ep(null,s,o,a,l),o.attrs,l),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=ep(d,s,o,a,l),null===g){let D=function XE(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==sa(l))return s[Vs(l)]}(s,o,l);void 0!==D&&Array.isArray(D)&&(D=ep(null,s,o,D[1],l),D=$c(D,o.attrs,l),function JC(s,o,a,l){s[Vs(a?o.classBindings:o.styleBindings)]=l}(s,o,l,D))}else g=function xm(s,o,a){let l;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)l=$c(l,s[g].hostAttrs,a);return $c(l,o.attrs,a)}(s,o,l)}return void 0!==g&&(l?o.residualClasses=g:o.residualStyles=g),a}(d,g,o,l),function Dm(s,o,a,l,d,g){let v=g?o.classBindings:o.styleBindings,E=Vs(v),D=sa(v);s[l]=a;let N,S=!1;if(Array.isArray(a)){const P=a;N=P[1],(null===N||xs(P,N)>0)&&(S=!0)}else N=a;if(d)if(0!==D){const z=Vs(s[E+1]);s[l+1]=yo(z,E),0!==z&&(s[z+1]=kf(s[z+1],l)),s[E+1]=function $M(s,o){return 131071&s|o<<17}(s[E+1],l)}else s[l+1]=yo(E,0),0!==E&&(s[E+1]=kf(s[E+1],l)),E=l;else s[l+1]=yo(D,0),0===E?E=l:s[D+1]=kf(s[D+1],l),D=l;S&&(s[l+1]=Jg(s[l+1])),Cm(s,N,l,!0),Cm(s,N,l,!1),function bm(s,o,a,l,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&xs(g,o)>=0&&(a[l+1]=L_(a[l+1]))}(o,N,s,l,g),v=yo(E,D),g?o.classBindings=v:o.styleBindings=v}(d,g,o,a,v,l)}}function ep(s,o,a,l,d){let g=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(g=o[E],l=$c(l,g.hostAttrs,d),g!==s);)E++;return null!==s&&(a.directiveStylingLast=E),l}function $c(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ot(s,v,!!a||o[++g]))}return void 0===s?null:s}function _v(s,o,a,l,d,g,v,E){if(!(3&o.type))return;const D=s.data,S=D[E+1];np(function Ff(s){return 1==(1&s)}(S)?vv(D,o,a,d,sa(S),v):void 0)||(np(g)||function yC(s){return 2==(2&s)}(S)&&(g=vv(D,null,a,d,E,v)),function M_(s,o,a,l,d){if(o)d?s.addClass(a,l):s.removeClass(a,l);else{let g=-1===l.indexOf("-")?void 0:na.DashCase;null==d?s.removeStyle(a,l,g):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),g|=na.Important),s.setStyle(a,l,d,g))}}(l,v,si(Qn(),a),d,g))}function vv(s,o,a,l,d,g){const v=null===o;let E;for(;d>0;){const D=s[d],S=Array.isArray(D),N=S?D[1]:D,P=null===N;let z=a[d+1];z===Ft&&(z=P?Dt:void 0);let ee=P?Wa(z,l):N===l?z:void 0;if(S&&!np(ee)&&(ee=Wa(D,l)),np(ee)&&(E=ee,v))return E;const Ee=s[d+1];d=v?Vs(Ee):sa(Ee)}if(null!==o){let D=g?o.residualClasses:o.residualStyles;null!=D&&(E=Wa(D,l))}return E}function np(s){return void 0!==s}function nI(s,o){return 0!=(s.flags&(o?16:32))}function rI(s,o=""){const a=Te(),l=$t(),d=s+22,g=l.firstCreatePass?Vc(l,d,1,o,null):l.data[d],v=a[d]=function E_(s,o){return s.createText(o)}(a[11],o);Rf(l,a,v,g),oi(g,!1)}function Rm(s,o,a){const l=Te(),d=function fl(s,o,a,l){return Cr(s,Js(),a)?o+_e(a)+l:Ft}(l,s,o,a);return d!==Ft&&function uu(s,o,a){const l=si(o,s);!function I_(s,o,a){s.setValue(o,a)}(s[11],l,a)}(l,Qn(),d),Rm}function Ov(s,o,a){const l=Te();if(Cr(l,Js(),o)){const g=$t(),v=fn();Us(g,v,l,s,o,function hl(s,o,a){return(null===s||Dr(s))&&(a=function Tu(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(a[o.index])),a[11]}(Oa(g.data),v,l),a,!0)}return Ov}const du=void 0;var Pv=["en",[["a","p"],["AM","PM"],du],[["AM","PM"],du,du],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],du,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],du,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",du,"{1} 'at' {0}",du],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function gh(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let js={};function kv(s){const o=function dI(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=up(o);if(a)return a;const l=o.split("-")[0];if(a=up(l),a)return a;if("en"===l)return Pv;throw new we(701,!1)}function la(s){return kv(s)[yt.PluralCase]}function up(s){return s in js||(js[s]=on.ng&&on.ng.common&&on.ng.common.locales&&on.ng.common.locales[s]),js[s]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const yh="en-US";let hI=yh;function Wv(s,o,a,l,d){if(s=Q(s),Array.isArray(s))for(let g=0;g<s.length;g++)Wv(s[g],o,a,l,d);else{const g=$t(),v=Te();let E=Xo(s)?s:Q(s.provide),D=Ls(s);const S=Cn(),N=1048575&S.providerIndexes,P=S.directiveStart,z=S.providerIndexes>>20;if(Xo(s)||!s.multi){const ee=new bs(D,d,kc),Ee=El(E,o,d?N:N+z,P);-1===Ee?(Cs(io(S,v),g,E),Qm(g,s,o.length),o.push(E),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(ee),v.push(ee)):(a[Ee]=ee,v[Ee]=ee)}else{const ee=El(E,o,N+z,P),Ee=El(E,o,N,N+z),Oe=ee>=0&&a[ee],$e=Ee>=0&&a[Ee];if(d&&!$e||!d&&!Oe){Cs(io(S,v),g,E);const Qe=function ke(s,o,a,l,d){const g=new bs(s,a,kc);return g.multi=[],g.index=o,g.componentProviders=0,Ar(g,d,l&&!a),g}(d?Zv:Il,a.length,d,l,D);!d&&$e&&(a[Ee].providerFactory=Qe),Qm(g,s,o.length,0),o.push(E),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Qe),v.push(Qe)}else Qm(g,s,ee>-1?ee:Ee,Ar(a[d?Ee:ee],D,!d&&l));!d&&l&&$e&&a[Ee].componentProviders++}}}function Qm(s,o,a,l){const d=Xo(o),g=function ea(s){return!!s.useClass}(o);if(d||g){const D=(g?Q(o.useClass):o).prototype.ngOnDestroy;if(D){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const N=S.indexOf(a);-1===N?S.push(a,[l,D]):S[N+1].push(l,D)}else S.push(a,D)}}}function Ar(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function El(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function Il(s,o,a,l){return Kv(this.multi,[])}function Zv(s,o,a,l){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=is(a,a[1],this.providerFactory.index,l);g=E.slice(0,v),Kv(d,g);for(let D=v;D<E.length;D++)g.push(E[D])}else g=[],Kv(d,g);return g}function Kv(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function tr(s,o=[]){return a=>{a.providersResolver=(l,d)=>function Ym(s,o,a){const l=$t();if(l.firstCreatePass){const d=Dr(s);Wv(a,l.data,l.blueprint,d,!0),Wv(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class $s{}class Jm{}function tt(s,o){return new FI(s,o??null)}class FI extends $s{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new pm(this);const l=Rr(o);this._bootstrapComponents=au(l.bootstrap),this._r3Injector=Of(o,a,[{provide:$s,useValue:this},{provide:A,useValue:this.componentFactoryResolver}],fe(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class qe extends Jm{constructor(o){super(),this.moduleType=o}create(o){return new FI(this.moduleType,o)}}class de extends $s{constructor(o,a,l){super(),this.componentFactoryResolver=new pm(this),this.instance=null;const d=new bc([...o,{provide:$s,useValue:this},{provide:A,useValue:this.componentFactoryResolver}],a||il(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function xe(s,o,a=null){return new de(s,o,a).injector}let jr=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=Qr(0,a.type),d=l.length>0?xe([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=Kt({token:s,providedIn:"environment",factory:()=>new s(pn(kn))}),s})();function Yv(s){s.getStandaloneInjector=o=>o.get(jr).getOrCreateStandaloneInjector(s)}function wp(s){return o=>{setTimeout(s,void 0,o)}}const ca=class GI extends h.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,g=a||(()=>null),v=l;if(o&&"object"==typeof o){const D=o;d=D.next?.bind(D),g=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(g=wp(g),d&&(d=wp(d)),v&&(v=wp(v)));const E=super.subscribe({next:d,error:g,complete:v});return o instanceof te.w0&&o.add(E),E}};function IT(){return this._results[zn()]()}class hi{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=zn(),l=hi.prototype;l[a]||(l[a]=IT)}get changes(){return this._changes||(this._changes=new ca)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=vn(o);(this._changesDetected=!function Hn(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],g=o[l];if(a&&(d=a(d),g=a(g)),g!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ch=(()=>{class s{}return s.__NG_ELEMENT_ID__=rr,s})();const Zc=Ch,zI=class extends Zc{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o,a){const l=this._declarationTContainer.tViews,d=nm(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(l)),rm(l,d,o),new Gf(d)}};function rr(){return Kc(Cn(),Te())}function Kc(s,o){return 4&s.type?new zI(o,s,W(s,o)):null}let vr=(()=>{class s{}return s.__NG_ELEMENT_ID__=gn,s})();function gn(){return wr(Cn(),Te())}const qI=vr,Yc=class extends qI{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return W(this._hostTNode,this._hostLView)}get injector(){return new oo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Wu(this._hostTNode,this._hostLView);if(Rd(o)){const a=La(o,this._hostLView),l=ur(o);return new oo(a[1].data[l+8],a)}return new oo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=zi(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){let d,g;"number"==typeof l?d=l:null!=l&&(d=l.index,g=l.injector);const v=o.createEmbeddedView(a||{},g);return this.insert(v,d),v}createComponent(o,a,l,d,g){const v=o&&!function Ci(s){return"function"==typeof s}(o);let E;if(v)E=a;else{const P=a||{};E=P.index,l=P.injector,d=P.projectableNodes,g=P.environmentInjector||P.ngModuleRef}const D=v?o:new oh(Pt(o)),S=l||this.parentInjector;if(!g&&null==D.ngModule){const z=(v?S:this.parentInjector).get(kn,null);z&&(g=z)}const N=D.create(S,d,void 0,g);return this.insert(N.hostView,E),N}insert(o,a){const l=o._lView,d=l[1];if(function Au(s){return Or(s[3])}(l)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const P=l[3],z=new Yc(P,P[6],P[3]);z.detach(z.indexOf(o))}}const g=this._adjustIndex(a),v=this._lContainer;!function qb(s,o,a,l){const d=10+l,g=a.length;l>0&&(a[d-1][4]=o),l<g-10?(o[4]=a[d],za(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Wb(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=64}(d,l,v,g);const E=S_(g,v),D=l[11],S=dr(D,v[7]);return null!==S&&function VM(s,o,a,l,d,g){l[0]=d,l[6]=o,ol(s,l,a,1,d,g)}(d,v[6],D,l,S,E),o.attachToViewContainerRef(),za(iw(v),g,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=zi(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=Bg(this._lContainer,a);l&&(kr(iw(this._lContainer),a),jg(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=Bg(this._lContainer,a);return l&&null!=kr(iw(this._lContainer),a)?new Gf(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function zi(s){return s[8]}function iw(s){return s[8]||(s[8]=[])}function wr(s,o){let a;const l=o[s.index];if(Or(l))a=l;else{let d;if(8&s.type)d=bn(l);else{const g=o[11];d=g.createComment("");const v=Pr(s,o);xc(g,dr(g,v),d,function Jb(s,o){return s.nextSibling(o)}(g,v),!1)}o[s.index]=a=EE(l,o,d,s),cm(o,a)}return new Yc(a,s,o)}class gu{constructor(o){this.queryList=o,this.matches=null}clone(){return new gu(this.queryList)}setDirty(){this.queryList.setDirty()}}class Ep{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let g=0;g<l;g++){const v=a.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Ep(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==iy(o,a).matches&&this.queries[a].setDirty()}}class sw{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Qc{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,g=this.getByIndex(l).embeddedTView(o,d);g&&(g.indexInDeclarationView=l,null!==a?a.push(g):a=[g])}return null!==a?new Qc(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ow{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new ow(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const g=l[d];this.matchTNodeWithReadOption(o,a,Cl(a,g)),this.matchTNodeWithReadOption(o,a,Vo(a,o,g,!1,!1))}else l===Ch?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Vo(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===ce||d===vr||d===Ch&&4&a.type)this.addMatch(a.index,-2);else{const g=Vo(a,o,d,!1,!1);null!==g&&this.addMatch(a.index,g)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function Cl(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Dp(s,o,a,l){return-1===a?function Ip(s,o){return 11&s.type?W(s,o):4&s.type?Kc(s,o):null}(o,s):-2===a?function WI(s,o,a){return a===ce?W(o,s):a===Ch?Kc(o,s):a===vr?wr(o,s):void 0}(s,o,l):is(s,s[1],a,o)}function mu(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const g=s.data,v=a.matches,E=[];for(let D=0;D<v.length;D+=2){const S=v[D];E.push(S<0?null:Dp(o,g[S],v[D+1],a.metadata.read))}d.matches=E}return d.matches}function Th(s,o,a,l){const d=s.queries.getByIndex(a),g=d.matches;if(null!==g){const v=mu(s,o,d,a);for(let E=0;E<g.length;E+=2){const D=g[E];if(D>0)l.push(v[E/2]);else{const S=g[E+1],N=o[-D];for(let P=10;P<N.length;P++){const z=N[P];z[17]===z[3]&&Th(z[1],z,S,l)}if(null!==N[9]){const P=N[9];for(let z=0;z<P.length;z++){const ee=P[z];Th(ee[1],ee,S,l)}}}}}return l}function Tl(s){const o=Te(),a=$t(),l=Xl();Pa(l+1);const d=iy(a,l);if(s.dirty&&Aa(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Th(a,o,l,[]):mu(a,o,d,l);s.reset(g,Le),s.notifyOnChanges()}return!0}return!1}function Sh(s,o,a,l){const d=$t();if(d.firstCreatePass){const g=Cn();(function ry(s,o,a){null===s.queries&&(s.queries=new Qc),s.queries.track(new ow(o,a))})(d,new sw(o,a,l),g.index),function Xc(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function Jc(s,o,a){const l=new hi(4==(4&a));dE(s,o,l,l.destroy),null===o[19]&&(o[19]=new Ep),o[19].queries.push(new gu(l))}(d,Te(),a)}function yu(){return function ZI(s,o){return s[19].queries[o].queryList}(Te(),Xl())}function iy(s,o){return s.queries.getByIndex(o)}function fa(...s){}const Al=new dn("Application Initializer");let Rp=(()=>{class s{constructor(a){this.appInits=a,this.resolve=fa,this.reject=fa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(av(g))a.push(g);else if(Bc(g)){const v=new Promise((E,D)=>{g.subscribe({complete:E,error:D})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(pn(Al,8))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const sd=new dn("AppId",{providedIn:"root",factory:function mw(){return`${od()}${od()}${od()}`}});function od(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const sD=new dn("Platform Initializer"),FT=new dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),An=new dn("appBootstrapListener"),cy=new dn("AnimationModuleType");let oD=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Ml=new dn("LocaleId",{providedIn:"root",factory:()=>b(Ml,Ze.Optional|Ze.SkipSelf)||function LT(){return typeof $localize<"u"&&$localize.locale||yh}()}),VT=new dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class aD{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let uD=(()=>{class s{compileModuleSync(a){return new qe(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),g=au(Rr(a).declarations).reduce((v,E)=>{const D=Pt(E);return D&&v.push(new oh(D)),v},[]);return new aD(l,g)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const dD=(()=>Promise.resolve(0))();function pa(s){typeof Zone>"u"?dD.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Mn{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ca(!1),this.onMicrotaskEmpty=new ca(!1),this.onStable=new ca(!1),this.onError=new ca(!1),typeof Zone>"u")throw new we(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function BT(){let s=on.requestAnimationFrame,o=on.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function ga(s){const o=()=>{!function fD(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(on,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,dy(s),s.isCheckStableRunning=!0,ad(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),dy(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,g,v,E)=>{try{return Nh(s),a.invokeTask(d,g,v,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),pD(s)}},onInvoke:(a,l,d,g,v,E,D)=>{try{return Nh(s),a.invoke(d,g,v,E,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),pD(s)}},onHasTask:(a,l,d,g)=>{a.hasTask(d,g),l===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,dy(s),ad(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(a,l,d,g)=>(a.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mn.isInAngularZone())throw new we(909,!1)}static assertNotInAngularZone(){if(Mn.isInAngularZone())throw new we(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,hD,fa,fa);try{return g.runTask(v,a,l)}finally{g.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const hD={};function ad(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function dy(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Nh(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function pD(s){s._nesting--,ad(s)}class jT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ca,this.onMicrotaskEmpty=new ca,this.onStable=new ca,this.onError=new ca}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const Ut=new dn(""),gD=new dn("");let Oh,hy=(()=>{class s{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Oh||(function kp(s){Oh=s}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mn.assertNotInAngularZone(),pa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())pa(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let g=-1;l&&l>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:g,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(pn(Mn),pn(Rh),pn(gD))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac}),s})(),Rh=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Oh?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),_u=null;const vw=new dn("AllowMultipleToken"),fy=new dn("PlatformDestroyListeners");class GT{constructor(o,a){this.name=o,this.token=a}}function Mr(s,o,a=[]){const l=`Platform: ${o}`,d=new dn(l);return(g=[])=>{let v=Gs();if(!v||v.injector.get(vw,!1)){const E=[...a,...g,{provide:d,useValue:!0}];s?s(E):function zT(s){if(_u&&!_u.get(vw,!1))throw new we(400,!1);_u=s;const o=s.get(gy);(function ww(s){const o=s.get(sD,null);o&&o.forEach(a=>a())})(s)}(function Iw(s=[],o){return Nc.create({name:o,providers:[{provide:us,useValue:"platform"},{provide:fy,useValue:new Set([()=>_u=null])},...s]})}(E,l))}return function Ew(s){const o=Gs();if(!o)throw new we(401,!1);return o}()}}function Gs(){return _u?.get(gy)??null}let gy=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function Ph(s,o){let a;return a="noop"===s?new jT:("zone.js"===s?void 0:s)||new Mn(o),a}(l?.ngZone,function Dw(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(l)),g=[{provide:Mn,useValue:d}];return d.run(()=>{const v=Nc.create({providers:g,parent:this.injector,name:a.moduleType.name}),E=a.create(v),D=E.injector.get(Ng,null);if(!D)throw new we(402,!1);return d.runOutsideAngular(()=>{const S=d.onError.subscribe({next:N=>{D.handleError(N)}});E.onDestroy(()=>{my(this._modules,E),S.unsubscribe()})}),function bw(s,o,a){try{const l=a();return av(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(D,d,()=>{const S=E.injector.get(Rp);return S.runInitializers(),S.donePromise.then(()=>(function fI(s){Gt(s,"Expected localeId to be defined"),"string"==typeof s&&(hI=s.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Ml,yh)||yh),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const d=Cw({},l);return function mD(s,o,a){const l=new qe(a);return Promise.resolve(l)}(0,0,a).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(a){const l=a.injector.get(Lp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new we(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new we(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(fy,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(pn(Nc))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function Cw(s,o){return Array.isArray(o)?o.reduce(Cw,s):{...s,...o}}let Lp=(()=>{class s{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{Mn.assertNotInAngularZone(),pa(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{Mn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{D.unsubscribe(),S.unsubscribe()}});this.isStable=(0,ae.T)(g,v.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Mg;if(!this._injector.get(Rp).done)throw!d&&Pi(a),new we(405,false);let v;v=d?a:this._injector.get(A).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function HT(s){return s.isBoundToModule}(v)?void 0:this._injector.get($s),S=v.create(Nc.NULL,[],l||v.selector,E),N=S.location.nativeElement,P=S.injector.get(Ut,null);return P?.registerApplication(N),S.onDestroy(()=>{this.detachView(S.hostView),my(this.components,S),P?.unregisterApplication(N)}),this._loadComponent(S),S}tick(){if(this._runningTick)throw new we(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;my(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(An,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>my(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new we(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)(pn(Mn),pn(kn),pn(Ng))},s.\u0275prov=Kt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function my(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let yy=!0,_D=!1;function vD(){return _D=!0,yy}function wD(){if(_D)throw new Error("Cannot enable prod mode after platform setup.");yy=!1}let WT=(()=>{class s{}return s.__NG_ELEMENT_ID__=ZT,s})();function ZT(s){return function kh(s,o,a){if(Ta(s)&&!a){const l=zt(s.index,o);return new Gf(l,l)}return 47&s.type?new Gf(o[16],o):null}(Cn(),Te(),16==(16&s))}class ID{constructor(){}supports(o){return qf(o)}create(o){return new JT(o)}}const QT=(s,o)=>o;class JT{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||QT}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,g=null;for(;a||l;){const v=!l||a&&a.currentIndex<DD(l,d,g)?a:l,E=DD(v,d,g),D=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{g||(g=[]);const S=E-d,N=D-d;if(S!=N){for(let z=0;z<S;z++){const ee=z<g.length?g[z]:g[z]=0,Ee=ee+z;N<=Ee&&Ee<S&&(g[z]=ee+1)}g[v.previousIndex]=N-S}}E!==D&&o(v,E,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!qf(o))throw new we(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)g=o[E],v=this._trackByFn(E,g),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,g,v,E)),Object.is(a.item,g)||this._addIdentityChange(a,g)):(a=this._mismatch(a,g,v,E),l=!0),a=a._next}else d=0,function vo(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[zn()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,E=>{v=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,g,d)):o=this._addAfter(new XT(a,l),g,d),o}_verifyReinsertion(o,a,l,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Ow),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ow),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class XT{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Ow{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new eS,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function DD(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class Pw{constructor(){}supports(o){return o instanceof Map||PE(o)}create(){return new bD}}class bD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||PE(o)))throw new we(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const g=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,g)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const l=new tS(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class tS{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function wy(){return new Er([new ID])}let Er=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||wy()),deps:[[s,new wt,new Re]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new we(901,!1)}}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:wy}),s})();function Ey(){return new Bp([new Pw])}let Bp=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Ey()),deps:[[s,new wt,new Re]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new we(901,!1)}}return s.\u0275prov=Kt({token:s,providedIn:"root",factory:Ey}),s})();const Iy=Mr(null,"core",[]);let ud=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(pn(Lp))},s.\u0275mod=it({type:s}),s.\u0275inj=Vt({}),s})();function ld(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(lt,Se,k)=>{k.d(Se,{Z:()=>we});var h=k(2090),te=k(4859),O=k(9681),ae=k(1877);class ie{constructor(_e,pe){this._delegate=_e,this.firebase=pe,(0,O._addComponent)(_e,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(_e,pe=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const rt=this._delegate.container.getProvider(_e);return!rt.isInitialized()&&"EXPLICIT"===(null===(Ye=rt.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&rt.initialize(),rt.getImmediate({identifier:pe})}_removeServiceInstance(_e,pe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(pe)}_addComponent(_e){(0,O._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,O._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ge(){const Xe=function fe(Xe){const _e={},pe={__esModule:!0,initializeApp:function Ae(je,U={}){const ye=O.initializeApp(je,U);if((0,h.r3)(_e,ye.name))return _e[ye.name];const Y=new Xe(ye,pe);return _e[ye.name]=Y,Y},app:rt,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function De(je){const U=je.name,ye=U.replace("-compat","");if(O._registerComponent(je)&&"PUBLIC"===je.type){const Y=(X=rt())=>{if("function"!=typeof X[ye])throw le.create("invalid-app-argument",{appName:U});return X[ye]()};void 0!==je.serviceProps&&(0,h.ZB)(Y,je.serviceProps),pe[ye]=Y,Xe.prototype[ye]=function(...X){return this._getService.bind(this,U).apply(this,je.multipleInstances?X:[])}}return"PUBLIC"===je.type?pe[ye]:null},removeApp:function Ye(je){delete _e[je]},useAsService:function Be(je,U){return"serverAuth"===U?null:U},modularAPIs:O}};function rt(je){if(!(0,h.r3)(_e,je=je||O._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:je});return _e[je]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function ve(){return Object.keys(_e).map(je=>_e[je])}}),rt.App=Xe,pe}(ie);return Xe.INTERNAL=Object.assign(Object.assign({},Xe.INTERNAL),{createFirebaseNamespace:ge,extendNamespace:function _e(pe){(0,h.ZB)(Xe,pe)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),Xe}(),$=new ae.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Xe=self.firebase.SDK_VERSION;Xe&&Xe.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const we=B;!function Me(Xe){(0,O.registerVersion)("@firebase/app-compat","0.1.33",Xe)}()},9681:(lt,Se,k)=>{k.r(Se),k.d(Se,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>ms,_DEFAULT_ENTRY_NAME:()=>Gt,_addComponent:()=>Zt,_addOrOverwriteComponent:()=>Kt,_apps:()=>sn,_clearComponents:()=>ba,_components:()=>xn,_getProvider:()=>Vt,_registerComponent:()=>xr,_removeServiceInstance:()=>rn,deleteApp:()=>Ao,getApp:()=>zr,getApps:()=>_i,initializeApp:()=>Oi,onLog:()=>Ki,registerVersion:()=>qr,setLogLevel:()=>Nn});var h=k(5861),te=k(4859),O=k(1877),ae=k(2090),ie=k(8766);class he{constructor(H){this.container=H}getPlatformInfoString(){return this.container.getProviders().map(q=>{if(function le(V){return"VERSION"===V.getComponent()?.type}(q)){const Ce=q.getImmediate();return`${Ce.library}/${Ce.version}`}return null}).filter(q=>q).join(" ")}}const fe="@firebase/app",B=new O.Yd("@firebase/app"),Gt="[DEFAULT]",ze={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,xn=new Map;function Zt(V,H){try{V.container.addComponent(H)}catch(q){B.debug(`Component ${H.name} failed to register with FirebaseApp ${V.name}`,q)}}function Kt(V,H){V.container.addOrOverwriteComponent(H)}function xr(V){const H=V.name;if(xn.has(H))return B.debug(`There were multiple attempts to register component ${H}.`),!1;xn.set(H,V);for(const q of sn.values())Zt(q,V);return!0}function Vt(V,H){const q=V.container.getProvider("heartbeat").getImmediate({optional:!0});return q&&q.triggerHeartbeat(),V.container.getProvider(H)}function rn(V,H,q=Gt){Vt(V,H).clearInstance(q)}function ba(){xn.clear()}const Ir=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Gr{constructor(H,q,Ce){this._isDeleted=!1,this._options=Object.assign({},H),this._config=Object.assign({},q),this._name=q.name,this._automaticDataCollectionEnabled=q.automaticDataCollectionEnabled,this._container=Ce,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(H){this.checkDestroyed(),this._automaticDataCollectionEnabled=H}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(H){this._isDeleted=H}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}}const ms="9.9.4";function Oi(V,H={}){"object"!=typeof H&&(H={name:H});const q=Object.assign({name:Gt,automaticDataCollectionEnabled:!1},H),Ce=q.name;if("string"!=typeof Ce||!Ce)throw Ir.create("bad-app-name",{appName:String(Ce)});const Ue=sn.get(Ce);if(Ue){if((0,ae.vZ)(V,Ue.options)&&(0,ae.vZ)(q,Ue.config))return Ue;throw Ir.create("duplicate-app",{appName:Ce})}const it=new te.H0(Ce);for(const Qt of xn.values())it.addComponent(Qt);const cn=new Gr(V,q,it);return sn.set(Ce,cn),cn}function zr(V=Gt){const H=sn.get(V);if(!H)throw Ir.create("no-app",{appName:V});return H}function _i(){return Array.from(sn.values())}function Ao(V){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,h.Z)(function*(V){const H=V.name;sn.has(H)&&(sn.delete(H),yield Promise.all(V.container.getProviders().map(q=>q.delete())),V.isDeleted=!0)})).apply(this,arguments)}function qr(V,H,q){var Ce;let Ue=null!==(Ce=ze[V])&&void 0!==Ce?Ce:V;q&&(Ue+=`-${q}`);const it=Ue.match(/\s|\//),cn=H.match(/\s|\//);if(it||cn){const Qt=[`Unable to register library "${Ue}" with version "${H}":`];return it&&Qt.push(`library name "${Ue}" contains illegal characters (whitespace or "/")`),it&&cn&&Qt.push("and"),cn&&Qt.push(`version name "${H}" contains illegal characters (whitespace or "/")`),void B.warn(Qt.join(" "))}xr(new te.wA(`${Ue}-version`,()=>({library:Ue,version:H}),"VERSION"))}function Ki(V,H){if(null!==V&&"function"!=typeof V)throw Ir.create("invalid-log-argument");(0,O.Am)(V,H)}function Nn(V){(0,O.Ub)(V)}const Rn="firebase-heartbeat-store";let Wn=null;function hn(){return Wn||(Wn=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(V,H)=>{0===H&&V.createObjectStore(Rn)}}).catch(V=>{throw Ir.create("idb-open",{originalErrorMessage:V.message})})),Wn}function ut(){return(ut=(0,h.Z)(function*(V){var H;try{return(yield hn()).transaction(Rn).objectStore(Rn).get(or(V))}catch(q){if(q instanceof ae.ZR)B.warn(q.message);else{const Ce=Ir.create("idb-get",{originalErrorMessage:null===(H=q)||void 0===H?void 0:H.message});B.warn(Ce.message)}}})).apply(this,arguments)}function on(V,H){return sr.apply(this,arguments)}function sr(){return(sr=(0,h.Z)(function*(V,H){var q;try{const Ue=(yield hn()).transaction(Rn,"readwrite");return yield Ue.objectStore(Rn).put(H,or(V)),Ue.done}catch(Ce){if(Ce instanceof ae.ZR)B.warn(Ce.message);else{const Ue=Ir.create("idb-set",{originalErrorMessage:null===(q=Ce)||void 0===q?void 0:q.message});B.warn(Ue.message)}}})).apply(this,arguments)}function or(V){return`${V.name}!${V.options.appId}`}class Yi{constructor(H){this.container=H,this._heartbeatsCache=null;const q=this.container.getProvider("app").getImmediate();this._storage=new Wt(q),this._heartbeatsCachePromise=this._storage.read().then(Ce=>(this._heartbeatsCache=Ce,Ce))}triggerHeartbeat(){var H=this;return(0,h.Z)(function*(){const Ce=H.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ue=Yt();if(null===H._heartbeatsCache&&(H._heartbeatsCache=yield H._heartbeatsCachePromise),H._heartbeatsCache.lastSentHeartbeatDate!==Ue&&!H._heartbeatsCache.heartbeats.some(it=>it.date===Ue))return H._heartbeatsCache.heartbeats.push({date:Ue,agent:Ce}),H._heartbeatsCache.heartbeats=H._heartbeatsCache.heartbeats.filter(it=>{const cn=new Date(it.date).valueOf();return Date.now()-cn<=2592e6}),H._storage.overwrite(H._heartbeatsCache)})()}getHeartbeatsHeader(){var H=this;return(0,h.Z)(function*(){if(null===H._heartbeatsCache&&(yield H._heartbeatsCachePromise),null===H._heartbeatsCache||0===H._heartbeatsCache.heartbeats.length)return"";const q=Yt(),{heartbeatsToSend:Ce,unsentEntries:Ue}=function wi(V,H=1024){const q=[];let Ce=V.slice();for(const Ue of V){const it=q.find(cn=>cn.agent===Ue.agent);if(it){if(it.dates.push(Ue.date),Z(q)>H){it.dates.pop();break}}else if(q.push({agent:Ue.agent,dates:[Ue.date]}),Z(q)>H){q.pop();break}Ce=Ce.slice(1)}return{heartbeatsToSend:q,unsentEntries:Ce}}(H._heartbeatsCache.heartbeats),it=(0,ae.L)(JSON.stringify({version:2,heartbeats:Ce}));return H._heartbeatsCache.lastSentHeartbeatDate=q,Ue.length>0?(H._heartbeatsCache.heartbeats=Ue,yield H._storage.overwrite(H._heartbeatsCache)):(H._heartbeatsCache.heartbeats=[],H._storage.overwrite(H._heartbeatsCache)),it})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class Wt{constructor(H){this.app=H,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var H=this;return(0,h.Z)(function*(){return(yield H._canUseIndexedDBPromise)&&(yield function pt(V){return ut.apply(this,arguments)}(H.app))||{heartbeats:[]}})()}overwrite(H){var q=this;return(0,h.Z)(function*(){var Ce;if(yield q._canUseIndexedDBPromise){const it=yield q.read();return on(q.app,{lastSentHeartbeatDate:null!==(Ce=H.lastSentHeartbeatDate)&&void 0!==Ce?Ce:it.lastSentHeartbeatDate,heartbeats:H.heartbeats})}})()}add(H){var q=this;return(0,h.Z)(function*(){var Ce;if(yield q._canUseIndexedDBPromise){const it=yield q.read();return on(q.app,{lastSentHeartbeatDate:null!==(Ce=H.lastSentHeartbeatDate)&&void 0!==Ce?Ce:it.lastSentHeartbeatDate,heartbeats:[...it.heartbeats,...H.heartbeats]})}})()}}function Z(V){return(0,ae.L)(JSON.stringify({version:2,heartbeats:V})).length}!function j(V){xr(new te.wA("platform-logger",H=>new he(H),"PRIVATE")),xr(new te.wA("heartbeat",H=>new Yi(H),"PRIVATE")),qr(fe,"0.7.32",V),qr(fe,"0.7.32","esm2017"),qr("fire-js","")}("")},4859:(lt,Se,k)=>{k.d(Se,{H0:()=>fe,wA:()=>O});var h=k(5861),te=k(2090);class O{constructor(B,$,Q){this.name=B,this.instanceFactory=$,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const ae="[DEFAULT]";class ie{constructor(B,$){this.name=B,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const $=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has($)){const Q=new te.BH;if(this.instancesDeferred.set($,Q),this.isInitialized($)||this.shouldAutoInitialize())try{const Ve=this.getOrInitializeService({instanceIdentifier:$});Ve&&Q.resolve(Ve)}catch{}}return this.instancesDeferred.get($).promise}getImmediate(B){var $;const Q=this.normalizeInstanceIdentifier(B?.identifier),Ve=null!==($=B?.optional)&&void 0!==$&&$;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Ve)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Me){if(Ve)return null;throw Me}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function le(ge){return"EAGER"===ge.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[$,Q]of this.instancesDeferred.entries()){const Ve=this.normalizeInstanceIdentifier($);try{const Me=this.getOrInitializeService({instanceIdentifier:Ve});Q.resolve(Me)}catch{}}}}clearInstance(B=ae){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,h.Z)(function*(){const $=Array.from(B.instances.values());yield Promise.all([...$.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...$.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=ae){return this.instances.has(B)}getOptions(B=ae){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:$={}}=B,Q=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ve=this.getOrInitializeService({instanceIdentifier:Q,options:$});for(const[Me,we]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Me)&&we.resolve(Ve);return Ve}onInit(B,$){var Q;const Ve=this.normalizeInstanceIdentifier($),Me=null!==(Q=this.onInitCallbacks.get(Ve))&&void 0!==Q?Q:new Set;Me.add(B),this.onInitCallbacks.set(Ve,Me);const we=this.instances.get(Ve);return we&&B(we,Ve),()=>{Me.delete(B)}}invokeOnInitCallbacks(B,$){const Q=this.onInitCallbacks.get($);if(Q)for(const Ve of Q)try{Ve(B,$)}catch{}}getOrInitializeService({instanceIdentifier:B,options:$={}}){let Q=this.instances.get(B);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ge=B,ge===ae?void 0:ge),options:$}),this.instances.set(B,Q),this.instancesOptions.set(B,$),this.invokeOnInitCallbacks(Q,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Q)}catch{}var ge;return Q||null}normalizeInstanceIdentifier(B=ae){return this.component?this.component.multipleInstances?B:ae:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const $=this.getProvider(B.name);if($.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);$.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const $=new ie(B,this);return this.providers.set(B,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Se,k)=>{k.d(Se,{Am:()=>ge,Ub:()=>fe,Yd:()=>le,in:()=>te});const h=[];var te=(()=>{return(B=te||(te={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",te;var B})();const O={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},ae=te.INFO,ie={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},he=(B,$,...Q)=>{if($<B.logLevel)return;const Ve=(new Date).toISOString(),Me=ie[$];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Me](`[${Ve}]  ${B.name}:`,...Q)};class le{constructor($){this.name=$,this._logLevel=ae,this._logHandler=he,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in te))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...$),this._logHandler(this,te.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...$),this._logHandler(this,te.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,te.INFO,...$),this._logHandler(this,te.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,te.WARN,...$),this._logHandler(this,te.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...$),this._logHandler(this,te.ERROR,...$)}}function fe(B){h.forEach($=>{$.setLogLevel(B)})}function ge(B,$){for(const Q of h){let Ve=null;$&&$.level&&(Ve=O[$.level]),Q.userLogHandler=null===B?null:(Me,we,...Xe)=>{const _e=Xe.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");we>=(Ve??Me.logLevel)&&B({level:te[we].toLowerCase(),message:_e,args:Xe,type:Me.name})}}}},8766:(lt,Se,k)=>{k.d(Se,{Lj:()=>Ae,X3:()=>rt});var h=k(5861);let O,ae;const le=new WeakMap,fe=new WeakMap,ge=new WeakMap,B=new WeakMap,$=new WeakMap;let Me={get(U,ye,Y){if(U instanceof IDBTransaction){if("done"===ye)return fe.get(U);if("objectStoreNames"===ye)return U.objectStoreNames||ge.get(U);if("store"===ye)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return pe(U[ye])},set:(U,ye,Y)=>(U[ye]=Y,!0),has:(U,ye)=>U instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in U};function _e(U){return"function"==typeof U?function Xe(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ye){return U.apply(Ye(this),ye),pe(le.get(this))}:function(...ye){return pe(U.apply(Ye(this),ye))}:function(ye,...Y){const X=U.call(Ye(this),ye,...Y);return ge.set(X,ye.sort?ye.sort():[ye]),pe(X)}}(U):(U instanceof IDBTransaction&&function Ve(U){if(fe.has(U))return;const ye=new Promise((Y,X)=>{const se=()=>{U.removeEventListener("complete",ne),U.removeEventListener("error",Fe),U.removeEventListener("abort",Fe)},ne=()=>{Y(),se()},Fe=()=>{X(U.error||new DOMException("AbortError","AbortError")),se()};U.addEventListener("complete",ne),U.addEventListener("error",Fe),U.addEventListener("abort",Fe)});fe.set(U,ye)}(U),((U,ye)=>ye.some(Y=>U instanceof Y))(U,function ie(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Me):U)}function pe(U){if(U instanceof IDBRequest)return function Q(U){const ye=new Promise((Y,X)=>{const se=()=>{U.removeEventListener("success",ne),U.removeEventListener("error",Fe)},ne=()=>{Y(pe(U.result)),se()},Fe=()=>{X(U.error),se()};U.addEventListener("success",ne),U.addEventListener("error",Fe)});return ye.then(Y=>{Y instanceof IDBCursor&&le.set(Y,U)}).catch(()=>{}),$.set(ye,U),ye}(U);if(B.has(U))return B.get(U);const ye=_e(U);return ye!==U&&(B.set(U,ye),$.set(ye,U)),ye}const Ye=U=>$.get(U);function rt(U,ye,{blocked:Y,upgrade:X,blocking:se,terminated:ne}={}){const Fe=indexedDB.open(U,ye),Pe=pe(Fe);return X&&Fe.addEventListener("upgradeneeded",ft=>{X(pe(Fe.result),ft.oldVersion,ft.newVersion,pe(Fe.transaction))}),Y&&Fe.addEventListener("blocked",()=>Y()),Pe.then(ft=>{ne&&ft.addEventListener("close",()=>ne()),se&&ft.addEventListener("versionchange",()=>se())}).catch(()=>{}),Pe}function Ae(U,{blocked:ye}={}){const Y=indexedDB.deleteDatabase(U);return ye&&Y.addEventListener("blocked",()=>ye()),pe(Y).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],De=["put","add","delete","clear"],Be=new Map;function je(U,ye){if(!(U instanceof IDBDatabase)||ye in U||"string"!=typeof ye)return;if(Be.get(ye))return Be.get(ye);const Y=ye.replace(/FromIndex$/,""),X=ye!==Y,se=De.includes(Y);if(!(Y in(X?IDBIndex:IDBObjectStore).prototype)||!se&&!ve.includes(Y))return;const ne=function(){var Fe=(0,h.Z)(function*(Pe,...ft){const qt=this.transaction(Pe,se?"readwrite":"readonly");let Gt=qt.store;return X&&(Gt=Gt.index(ft.shift())),(yield Promise.all([Gt[Y](...ft),se&&qt.done]))[0]});return function(ft){return Fe.apply(this,arguments)}}();return Be.set(ye,ne),ne}!function we(U){Me=U(Me)}(U=>({...U,get:(ye,Y,X)=>je(ye,Y)||U.get(ye,Y,X),has:(ye,Y)=>!!je(ye,Y)||U.has(ye,Y)}))},5861:(lt,Se,k)=>{function h(O,ae,ie,he,le,fe,ge){try{var B=O[fe](ge),$=B.value}catch(Q){return void ie(Q)}B.done?ae($):Promise.resolve($).then(he,le)}function te(O){return function(){var ae=this,ie=arguments;return new Promise(function(he,le){var fe=O.apply(ae,ie);function ge($){h(fe,he,le,ge,B,"next",$)}function B($){h(fe,he,le,ge,B,"throw",$)}ge(void 0)})}}k.d(Se,{Z:()=>te})}},lt=>{lt(lt.s=107)}]);